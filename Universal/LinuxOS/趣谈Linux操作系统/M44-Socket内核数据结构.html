<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap" rel="stylesheet"><link rel="icon" href="/站点图标/favicon.ico"><title>44 | Socket内核数据结构：如何成立特大项目合作部？ | NgxuAnGMH</title><meta name="description" content="">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-33908bae.css" as="style"><link rel="stylesheet" href="/assets/style-33908bae.css">
    <link rel="modulepreload" href="/assets/app-cdabc73c.js"><link rel="modulepreload" href="/assets/M44-Socket内核数据结构.html-8ae99e37.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/M44-Socket内核数据结构.html-84bdbcaf.js"><link rel="prefetch" href="/assets/index.html-185e7c96.js" as="script"><link rel="prefetch" href="/assets/index.html-1c408abf.js" as="script"><link rel="prefetch" href="/assets/00-名词解释LOL.html-31ba2bfb.js" as="script"><link rel="prefetch" href="/assets/01-白泽带你读论文丨kAFL Hardware-Assisted Feedback Fuzzing for OS Kernels.html-61daaf0d.js" as="script"><link rel="prefetch" href="/assets/02-白泽带你读论文CREDALTowards Locating a Memory Corruption Vulnerability.html-f6fecb04.js" as="script"><link rel="prefetch" href="/assets/03-白泽带你读论文丨A Large-Scale Analysis of Security of Embedded Firmwares.html-8f11a809.js" as="script"><link rel="prefetch" href="/assets/04-白泽带你读论文丨Razzer Finding Kernel Race Bugs through Fuzzing.html-48b6b0e6.js" as="script"><link rel="prefetch" href="/assets/05-白泽带你读论文丨Precise and Scalable Detection of Double-Fetch.html-bb464ec7.js" as="script"><link rel="prefetch" href="/assets/06-白泽带你读论文丨DIFUZE Interface Aware Fuzzing for Kernel Drivers.html-69671fee.js" as="script"><link rel="prefetch" href="/assets/07-白泽带你读论文丨CheckItAgainDetecting Lacking-Recheck Bugs in OS Kernel.html-a327ebf9.js" as="script"><link rel="prefetch" href="/assets/08-白泽带你读论文丨POMPPostmortem Program Analysis with Hardware-Enhanced.html-0e1b7390.js" as="script"><link rel="prefetch" href="/assets/09-白泽带你读论文丨MoonShine Optimizing OS Fuzzer Seed Selection.html-e38e3fa2.js" as="script"><link rel="prefetch" href="/assets/10-白泽带你读论文丨Do Android Taint Analysis Tools Keep their Promises.html-193f9c21.js" as="script"><link rel="prefetch" href="/assets/11-白泽带你读论文丨Fuzzing File Systems via Two-Dimensional Input Space.html-f3eaaf45.js" as="script"><link rel="prefetch" href="/assets/12-白泽带你读论文丨PeriScope An Effective Probing and Fuzzing Framework.html-6c6067c8.js" as="script"><link rel="prefetch" href="/assets/13-白泽带你读论文FirmaliceAutomatic Detection of Bypass Vulnerabilities.html-f309c101.js" as="script"><link rel="prefetch" href="/assets/14-白泽带你读论文丨Challenges in Fuzzing Embedded Devices：What You Corrupt.html-90540298.js" as="script"><link rel="prefetch" href="/assets/15-白泽带你读论文丨Automatically Identifying and Understanding DarkJargons.html-f263e451.js" as="script"><link rel="prefetch" href="/assets/16-白泽带你读论文丨VUzzer Application-aware Evolutionary Fuzzing.html-0fb33f86.js" as="script"><link rel="prefetch" href="/assets/17-白泽带你读论文丨Protocol state machine fuzzing of TLS Implementation.html-c0c8721c.js" as="script"><link rel="prefetch" href="/assets/18-白泽带你读论文丨REDQUEEN Fuzzing with Input-to-State Correspondence.html-59fed6cf.js" as="script"><link rel="prefetch" href="/assets/19-白泽带你读论文丨Flaws in Security-Focused StaticAnalysisToolsforAndroid.html-427f7e23.js" as="script"><link rel="prefetch" href="/assets/20-白泽带你读论文丨Dowsing for Overflows A Guided Fuzzer to Find Buffer.html-2f20e66d.js" as="script"><link rel="prefetch" href="/assets/21-白泽带你读论文丨Full-speed Fuzzing Reducing Fuzzing Overhead through.html-9d39cdd7.js" as="script"><link rel="prefetch" href="/assets/22-白泽带你读论文丨Fuzzing with Code Fragments.html-80a15911.js" as="script"><link rel="prefetch" href="/assets/23-白泽带你读论文丨NAUTILUS Fishing for Deep Bugs with Grammars.html-95028d84.js" as="script"><link rel="prefetch" href="/assets/24-白泽带你读论文丨DR. CHECKER A Soundy Analysis for Linux Kernel Drivers.html-9c7194f7.js" as="script"><link rel="prefetch" href="/assets/25-白泽带你读论文丨K-Miner Uncovering Memory Corruption in Linux.html-d108f893.js" as="script"><link rel="prefetch" href="/assets/26-白泽带你读论文丨LockDoc Trace-Based Analysis of Locking in the Linux.html-8af6d4d3.js" as="script"><link rel="prefetch" href="/assets/27-白泽带你读论文丨Precisely Characterizing Security Impact in a Flood of.html-6cb79bf4.js" as="script"><link rel="prefetch" href="/assets/28-白泽带你读论文丨MVP Detecting Vulnerabilities using Patch-Enhanced.html-3e08f20b.js" as="script"><link rel="prefetch" href="/assets/29-白泽带你读论文Using Safety Properties to Generate VulnerabilityPatches.html-7177d713.js" as="script"><link rel="prefetch" href="/assets/30-白泽带你读论文丨Large-Scale Analysis of Style Injection by Relative.html-3a7b585d.js" as="script"><link rel="prefetch" href="/assets/31-白泽带你读论文丨FUSE Finding File Upload Bugs via Penetration Testing.html-562fa069.js" as="script"><link rel="prefetch" href="/assets/32-白泽带你读论文丨Efficient and Flexible Discovery of PHP Application.html-6c5a1cd3.js" as="script"><link rel="prefetch" href="/assets/33-白泽带你读论文丨Code Reuse Attacks in PHP Automated POPChainGeneration.html-86a20d64.js" as="script"><link rel="prefetch" href="/assets/34-白泽带你读论文丨Chainsaw Chained Automated Workflow-based Exploit.html-61692f34.js" as="script"><link rel="prefetch" href="/assets/35-白泽带你读论文丨NAVEX Precise and Scalable Exploit Generation for.html-c8c2cc46.js" as="script"><link rel="prefetch" href="/assets/36-白泽带你读论文丨Different Is Good Detecting the Use of Uninitialized.html-980e52b0.js" as="script"><link rel="prefetch" href="/assets/37-白泽带你读论文丨Digtool A Virtualization-Based Framework for Detecting.html-dcc7ec2a.js" as="script"><link rel="prefetch" href="/assets/38-白泽带你读论文丨Efficient Scalable Thread-Safety-Violation Detection.html-45898b13.js" as="script"><link rel="prefetch" href="/assets/39-白泽带你读论文丨Block Oriented Programming Automating Data-Only Attacks.html-065b5c6d.js" as="script"><link rel="prefetch" href="/assets/40-白泽带你读论文丨Data-Oriented Programming On the Expressiveness of (copy).html-5123b73b.js" as="script"><link rel="prefetch" href="/assets/41-白泽带你读论文丨Data-Oriented Programming On the Expressiveness of.html-e1f75241.js" as="script"><link rel="prefetch" href="/assets/42-白泽带你读论文丨NoJITsu Locking Down JavaScript Engines.html-391e24f0.js" as="script"><link rel="prefetch" href="/assets/43-白泽带你读论文丨Measuring and Modeling the Label Dynamics of Online.html-6057b954.js" as="script"><link rel="prefetch" href="/assets/44-白泽带你读论文丨DeepRefiner Multi-layer Android Malware Detection.html-d59440a5.js" as="script"><link rel="prefetch" href="/assets/45-白泽带你读论文丨On Training Robust PDF Malware Classifiers.html-ddf58af5.js" as="script"><link rel="prefetch" href="/assets/46-白泽带你读论文丨MACE Detecting Privilege Escalation Vulnerabilities in.html-1d7ac20a.js" as="script"><link rel="prefetch" href="/assets/47-白泽带你读论文丨Static Detection of Second-Order Vulnerabilities in Web.html-fe002bf2.js" as="script"><link rel="prefetch" href="/assets/48-白泽带你读论文丨IJON Exploring Deep State Spaces via Fuzzing.html-d52d8b82.js" as="script"><link rel="prefetch" href="/assets/49-白泽带你读论文丨FuzzGen Automatic Fuzzer Generation.html-051bf29f.js" as="script"><link rel="prefetch" href="/assets/50-白泽带你读论文丨HFL Hybrid Fuzzing on the Linux Kernel.html-c2366ff0.js" as="script"><link rel="prefetch" href="/assets/51-白泽带你读论文丨Jump-Oriented Programming A New Class of Code-Reuse.html-df3f2f1d.js" as="script"><link rel="prefetch" href="/assets/52-白泽带你读论文丨Counterfeit Object-oriented Programming.html-ecc743db.js" as="script"><link rel="prefetch" href="/assets/53-白泽带你读论文丨USBFuzz A Framework for Fuzzing USB Drivers by Device.html-6cd25f3a.js" as="script"><link rel="prefetch" href="/assets/54-白泽带你读论文丨Symbolic execution with SYMCC Don’t interpret_ compile!.html-641ca286.js" as="script"><link rel="prefetch" href="/assets/55-白泽带你读论文丨Detecting Kernel Memory Leaks in Specialized Modules.html-b3e17c7e.js" as="script"><link rel="prefetch" href="/assets/56-白泽带你读论文  Towards Measuring Supply Chain Attacks.html-433d1c35.js" as="script"><link rel="prefetch" href="/assets/57-白泽带你读论文  FavocadoFuzzing the Binding Code of JavaScriptEngines.html-28a6824b.js" as="script"><link rel="prefetch" href="/assets/58-白泽带你读论文  Mining and Exploiting Payment Credential Leaks.html-ec77ffb7.js" as="script"><link rel="prefetch" href="/assets/59-白泽带你读论文  Share First_ Ask Later.html-28ae0d47.js" as="script"><link rel="prefetch" href="/assets/60-白泽带你读论文  STOCHFUZZ (copy).html-ee4a6b36.js" as="script"><link rel="prefetch" href="/assets/61-白泽带你读论文  STOCHFUZZ.html-d82c0fd8.js" as="script"><link rel="prefetch" href="/assets/62-白泽带你读论文  Object Dependence Graph and Query.html-aa02c63a.js" as="script"><link rel="prefetch" href="/assets/63-白泽带你读论文  FUGIO Automatic Exploit Generation for PHP.html-cb28ff26.js" as="script"><link rel="prefetch" href="/assets/64-Igor Crash Deduplication Through Root-Cause Clustering.html-698e9dda.js" as="script"><link rel="prefetch" href="/assets/65-白泽带你读论文  Journey to the Center of the Cookie Ecosystem.html-ff8dd0c5.js" as="script"><link rel="prefetch" href="/assets/66-Summary of How Machine Learning.html-be805c64.js" as="script"><link rel="prefetch" href="/assets/67-白泽带你读论文  Messy States of Wiring Vulnerabilities in Emergin.html-7eb07b72.js" as="script"><link rel="prefetch" href="/assets/68-白泽带你读论文  A Formal Analysis of the FIDO UAF Protocol.html-081ad8ad.js" as="script"><link rel="prefetch" href="/assets/69-白泽带你读论文  Adversarial Attacks on Speaker Recognition Systems.html-604602c2.js" as="script"><link rel="prefetch" href="/assets/70-白泽带你读论文丨SoK.html-2be98024.js" as="script"><link rel="prefetch" href="/assets/71-白泽带你读论文  Probe the Proto.html-b2d85c8c.js" as="script"><link rel="prefetch" href="/assets/72-白泽带你读论文  V0Finder.html-c25e23f9.js" as="script"><link rel="prefetch" href="/assets/73-白泽带你读论文  Robbery on DevOps.html-ef11c967.js" as="script"><link rel="prefetch" href="/assets/74-白泽带你读论文  MetaEmu.html-1b3e76d2.js" as="script"><link rel="prefetch" href="/assets/75-白泽带你读论文  VetSC.html-092debc1.js" as="script"><link rel="prefetch" href="/assets/76-白泽带你读论文  DriveFuzz.html-e194472a.js" as="script"><link rel="prefetch" href="/assets/77-白泽带你读论文  Poirot.html-39107c7b.js" as="script"><link rel="prefetch" href="/assets/78-白泽带你读论文｜FAST.html-2956a80e.js" as="script"><link rel="prefetch" href="/assets/79-白泽带你读论文｜ALASTOR.html-7bfe86e2.js" as="script"><link rel="prefetch" href="/assets/80-白泽带你读论文｜ALFORE.html-c24febf9.js" as="script"><link rel="prefetch" href="/assets/81-白泽带你读论文｜MPChecker.html-501c509c.js" as="script"><link rel="prefetch" href="/assets/82-白泽带你读论文｜How Long Do Vulnerabilities Live in the Code.html-875593a9.js" as="script"><link rel="prefetch" href="/assets/83-成果分享｜知识图谱嵌入投毒攻击.html-1dcfa9ae.js" as="script"><link rel="prefetch" href="/assets/84-白泽带你读论文｜RSFUZZER.html-886321ca.js" as="script"><link rel="prefetch" href="/assets/85-成果分享｜基于结构语义建模的点云分类模型.html-05d2867d.js" as="script"><link rel="prefetch" href="/assets/86-成果分享｜Anti-FakeU 托攻击防御算法.html-c8ff1779.js" as="script"><link rel="prefetch" href="/assets/87-成果分享｜神经网络水印破解.html-73b9cd98.js" as="script"><link rel="prefetch" href="/assets/88-成果分享｜无人驾驶通用防御模块LOP.html-0fe14f59.js" as="script"><link rel="prefetch" href="/assets/89-白泽带你读论文｜MANTA.html-c3608cd2.js" as="script"><link rel="prefetch" href="/assets/90-白泽带你读论文｜FOAP.html-530f7159.js" as="script"><link rel="prefetch" href="/assets/91-白泽带你读论文｜APICraft.html-fbcef897.js" as="script"><link rel="prefetch" href="/assets/92-白泽带你读论文｜MAYDAY.html-d41aa312.js" as="script"><link rel="prefetch" href="/assets/index.html-9e8dd341.js" as="script"><link rel="prefetch" href="/assets/复旦白泽战队.html-eb4228a0.js" as="script"><link rel="prefetch" href="/assets/A01-开篇词.html-c8ee372e.js" as="script"><link rel="prefetch" href="/assets/A02-编辑手记.html-d79e95d8.js" as="script"><link rel="prefetch" href="/assets/B03-内核结构与设计.html-5eeb2859.js" as="script"><link rel="prefetch" href="/assets/B04-业界成熟的内核架构.html-4966d65f.js" as="script"><link rel="prefetch" href="/assets/B：《基础铺垫》.html-930cccaf.js" as="script"><link rel="prefetch" href="/assets/C00-待整理的内容.html-93896443.js" as="script"><link rel="prefetch" href="/assets/C05-CPU工作模式.html-4fb46f75.js" as="script"><link rel="prefetch" href="/assets/C06-MMU虚拟地址转换.html-8cabe855.js" as="script"><link rel="prefetch" href="/assets/C07-Cache与内存.html-cf6da279.js" as="script"><link rel="prefetch" href="/assets/C08-并发中常用的锁.html-76f0d2f6.js" as="script"><link rel="prefetch" href="/assets/C09-Linux数据同步手段.html-9419a737.js" as="script"><link rel="prefetch" href="/assets/C：《硬件知识》.html-7200a383.js" as="script"><link rel="prefetch" href="/assets/D10-设置工作模式与环境（上）.html-d44f75ac.js" as="script"><link rel="prefetch" href="/assets/D11-设置工作模式与环境（中）.html-482e2269.js" as="script"><link rel="prefetch" href="/assets/D12-Cosmos-initldr.html-e5304694.js" as="script"><link rel="prefetch" href="/assets/D12-设置工作模式与环境（下）.html-73b9468d.js" as="script"><link rel="prefetch" href="/assets/D13-Cosmos-hal.html-e0fd9ea3.js" as="script"><link rel="prefetch" href="/assets/D13-主板初始化.html-fb73fc6d.js" as="script"><link rel="prefetch" href="/assets/D14-Linux初始化（上）.html-c3d91b19.js" as="script"><link rel="prefetch" href="/assets/D15-Linux初始化（下）.html-77fb934c.js" as="script"><link rel="prefetch" href="/assets/D：【系统初始化】.html-4dad8380.js" as="script"><link rel="prefetch" href="/assets/H16-内存分页分段与分区.html-e88aaf96.js" as="script"><link rel="prefetch" href="/assets/H17-内存管理初始化.html-20d56270.js" as="script"><link rel="prefetch" href="/assets/H18-内存页的分配与释放.html-364f1fd5.js" as="script"><link rel="prefetch" href="/assets/H19-容器管理内存对象.html-f73cbc60.js" as="script"><link rel="prefetch" href="/assets/H20-地址空间的相关设计.html-aa3c2044.js" as="script"><link rel="prefetch" href="/assets/H21-虚拟内存分配与释放.html-bea90caa.js" as="script"><link rel="prefetch" href="/assets/H22-Linux的伙伴系统.html-9ceec7f6.js" as="script"><link rel="prefetch" href="/assets/H23-Linux的SLAB分配器.html-bb209bb7.js" as="script"><link rel="prefetch" href="/assets/H：【内存管理系统】.html-4af90905.js" as="script"><link rel="prefetch" href="/assets/I24-进程活动的描述.html-07fa649f.js" as="script"><link rel="prefetch" href="/assets/I25-多个活动要安排（上）.html-5b7d40c2.js" as="script"><link rel="prefetch" href="/assets/I26-多个活动要安排（下）.html-341b1656.js" as="script"><link rel="prefetch" href="/assets/I27-Linux进程管理系统.html-4397dfa3.js" as="script"><link rel="prefetch" href="/assets/I：【进程管理系统】.html-ce2b6c9f.js" as="script"><link rel="prefetch" href="/assets/J28-设备类型与设备驱动.html-0c575d5d.js" as="script"><link rel="prefetch" href="/assets/J29-在内核中注册设备.html-a152731e.js" as="script"><link rel="prefetch" href="/assets/J30-设备处理内核IO包.html-9538e7f6.js" as="script"><link rel="prefetch" href="/assets/J31-Linux获取设备信息.html-4a20d2e3.js" as="script"><link rel="prefetch" href="/assets/J：【IO系统与设备管理】.html-7726ff18.js" as="script"><link rel="prefetch" href="/assets/K32-文件系统数据结构.html-d690ec85.js" as="script"><link rel="prefetch" href="/assets/K33-文件系统的格式化.html-9d79ee0d.js" as="script"><link rel="prefetch" href="/assets/K34-文件的基本操作.html-d8199cdc.js" as="script"><link rel="prefetch" href="/assets/K35-Linux的VFS.html-84fda81c.js" as="script"><link rel="prefetch" href="/assets/K：【文件管理系统】.html-51f43485.js" as="script"><link rel="prefetch" href="/assets/L36-从URL到网卡.html-d20ed497.js" as="script"><link rel="prefetch" href="/assets/L37-从内核到应用.html-4c206624.js" as="script"><link rel="prefetch" href="/assets/L38-宏观网络架构.html-d072b72f.js" as="script"><link rel="prefetch" href="/assets/L39-Linux中Socket接口.html-c2744943.js" as="script"><link rel="prefetch" href="/assets/L40-Linux中Socket实现.html-13763a25.js" as="script"><link rel="prefetch" href="/assets/L：【网络通信协议栈】.html-7c1f703c.js" as="script"><link rel="prefetch" href="/assets/M41-用户态与内核态之间的接口.html-83ca8189.js" as="script"><link rel="prefetch" href="/assets/M42-Linux的系统API.html-d4576b8f.js" as="script"><link rel="prefetch" href="/assets/M：【内核接口系统API】.html-ae1a79df.js" as="script"><link rel="prefetch" href="/assets/N43-虚拟机内核KVM.html-18a8c90b.js" as="script"><link rel="prefetch" href="/assets/N44-容器的实现机制.html-c2876868.js" as="script"><link rel="prefetch" href="/assets/N：【虚拟化容器化】.html-6c2d274e.js" as="script"><link rel="prefetch" href="/assets/O45-ARM新宠苹果M1.html-2cc176bc.js" as="script"><link rel="prefetch" href="/assets/O46-AArch64体系.html-b0cb5196.js" as="script"><link rel="prefetch" href="/assets/O：【ARM新架构】.html-9f666403.js" as="script"><link rel="prefetch" href="/assets/P47-参考答案.html-64f0fd0e.js" as="script"><link rel="prefetch" href="/assets/P48-大咖助场.html-ea5ba909.js" as="script"><link rel="prefetch" href="/assets/P49-用户故事1.html-a1957ed1.js" as="script"><link rel="prefetch" href="/assets/P50-用户故事2.html-6c3004ee.js" as="script"><link rel="prefetch" href="/assets/P51-用户故事3.html-72ca6614.js" as="script"><link rel="prefetch" href="/assets/P52-用户故事4.html-58b1e992.js" as="script"><link rel="prefetch" href="/assets/P53-用户故事5.html-2b300cb4.js" as="script"><link rel="prefetch" href="/assets/P54-用户故事6.html-d05acf73.js" as="script"><link rel="prefetch" href="/assets/P55-结束语.html-91467e90.js" as="script"><link rel="prefetch" href="/assets/P56-结课测试.html-52bd31dc.js" as="script"><link rel="prefetch" href="/assets/P：《结束答疑与加餐》.html-eeb3a6fa.js" as="script"><link rel="prefetch" href="/assets/index.html-2cda69f0.js" as="script"><link rel="prefetch" href="/assets/√B01-程序的运行过程.html-4c84f2ea.js" as="script"><link rel="prefetch" href="/assets/√B02-汇编加C实现极简内核.html-b01b00d5.js" as="script"><link rel="prefetch" href="/assets/操作系统实战45讲.html-ad81c997.js" as="script"><link rel="prefetch" href="/assets/操作系统实战45讲【待办】.html-2d4ae23e.js" as="script"><link rel="prefetch" href="/assets/趣谈实战原理.html-4524e806.js" as="script"><link rel="prefetch" href="/assets/A00-开篇词.html-ceae51cf.js" as="script"><link rel="prefetch" href="/assets/A01-冯诺依曼体系结构.html-d0bbbb9d.js" as="script"><link rel="prefetch" href="/assets/A02-知识地图.html-ab43d88b.js" as="script"><link rel="prefetch" href="/assets/A03-CPU性能.html-cc8b4819.js" as="script"><link rel="prefetch" href="/assets/A04-如何提升性能.html-4ac63ed3.js" as="script"><link rel="prefetch" href="/assets/A：《入门开篇》.html-a28a0a6f.js" as="script"><link rel="prefetch" href="/assets/B11-二进制编码.html-ada29a81.js" as="script"><link rel="prefetch" href="/assets/B12-理解电路.html-90979a27.js" as="script"><link rel="prefetch" href="/assets/B13-加法器.html-a52a5772.js" as="script"><link rel="prefetch" href="/assets/B14-乘法器.html-0c3eda12.js" as="script"><link rel="prefetch" href="/assets/B15-浮点数和定点数（上）.html-5a2e465d.js" as="script"><link rel="prefetch" href="/assets/B16-浮点数和定点数（下）.html-838aefed.js" as="script"><link rel="prefetch" href="/assets/B：《指令和运算》.html-ee7e1760.js" as="script"><link rel="prefetch" href="/assets/C17-建立数据通路（上）.html-1775d0fc.js" as="script"><link rel="prefetch" href="/assets/C18-建立数据通路（中）.html-e1fa7442.js" as="script"><link rel="prefetch" href="/assets/C19-建立数据通路（下）.html-d2727a6b.js" as="script"><link rel="prefetch" href="/assets/C：【CPU硬件模块】.html-43908d3c.js" as="script"><link rel="prefetch" href="/assets/D20-流水线指令设计（上）.html-3378bd6c.js" as="script"><link rel="prefetch" href="/assets/D21-流水线指令设计（下）.html-91af5e21.js" as="script"><link rel="prefetch" href="/assets/D22-冒险和预测（一）.html-6c7aa123.js" as="script"><link rel="prefetch" href="/assets/D23-冒险和预测（二）.html-e34ed90d.js" as="script"><link rel="prefetch" href="/assets/D24-冒险和预测（三）.html-a22b4571.js" as="script"><link rel="prefetch" href="/assets/D25-冒险和预测（四）.html-72b9fc19.js" as="script"><link rel="prefetch" href="/assets/D26-多发射与超标量.html-47a3a3a3.js" as="script"><link rel="prefetch" href="/assets/D27-超线程与SIMD.html-af7116d1.js" as="script"><link rel="prefetch" href="/assets/D：【CPU性能设计】.html-4ba5dd74.js" as="script"><link rel="prefetch" href="/assets/E28-异常和中断.html-e9cfa32b.js" as="script"><link rel="prefetch" href="/assets/E29-CISC复杂RISC精简.html-7479bfc1.js" as="script"><link rel="prefetch" href="/assets/E30-GPU（上）.html-6bfbf8f7.js" as="script"><link rel="prefetch" href="/assets/E31-GPU（下）.html-570943de.js" as="script"><link rel="prefetch" href="/assets/E32-FPGA和ASIC.html-958aad66.js" as="script"><link rel="prefetch" href="/assets/E33-解读TPU.html-27890e60.js" as="script"><link rel="prefetch" href="/assets/E34-理解虚拟机.html-fe48bf9d.js" as="script"><link rel="prefetch" href="/assets/E：《了解相关知识》.html-ae2837f8.js" as="script"><link rel="prefetch" href="/assets/F35-存储层次全景.html-8dca1341.js" as="script"><link rel="prefetch" href="/assets/F36-局部性原理.html-66d1ceb5.js" as="script"><link rel="prefetch" href="/assets/F37-高速缓存（上）.html-0a403fa4.js" as="script"><link rel="prefetch" href="/assets/F38-高速缓存（下）.html-0e96e78f.js" as="script"><link rel="prefetch" href="/assets/F39-MESI协议.html-fb25737d.js" as="script"><link rel="prefetch" href="/assets/F40-理解内存（上）.html-1860e111.js" as="script"><link rel="prefetch" href="/assets/F41-理解内存（下）.html-d40fba90.js" as="script"><link rel="prefetch" href="/assets/F：《存储相关原理》.html-af886c7a.js" as="script"><link rel="prefetch" href="/assets/G42-理解总线.html-5f7c1609.js" as="script"><link rel="prefetch" href="/assets/G43-输入输出设备.html-6f436291.js" as="script"><link rel="prefetch" href="/assets/G44-理解IO性能.html-2522fae2.js" as="script"><link rel="prefetch" href="/assets/G45-机械硬盘HDD.html-30368229.js" as="script"><link rel="prefetch" href="/assets/G46-固态硬盘SSD（上）.html-14a71b68.js" as="script"><link rel="prefetch" href="/assets/G47-固态硬盘SSD（下）.html-b581cbae.js" as="script"><link rel="prefetch" href="/assets/G48-DMA启发Kafka.html-2448314a.js" as="script"><link rel="prefetch" href="/assets/G49-错误损坏校验.html-0a5563bc.js" as="script"><link rel="prefetch" href="/assets/G50-错误损坏还原.html-fe44dd85.js" as="script"><link rel="prefetch" href="/assets/G：《总线与IO设备》.html-34fdff68.js" as="script"><link rel="prefetch" href="/assets/H51-分布式系统.html-07d2ea32.js" as="script"><link rel="prefetch" href="/assets/H52-DMP系统（上）.html-e296c9b5.js" as="script"><link rel="prefetch" href="/assets/H53-DMP系统（下）.html-ae257811.js" as="script"><link rel="prefetch" href="/assets/H54-理解Disruptor（上）.html-9fed7e1a.js" as="script"><link rel="prefetch" href="/assets/H55-理解Disruptor（下）.html-f56cf3b5.js" as="script"><link rel="prefetch" href="/assets/H：《工程实战应用》.html-31675f1a.js" as="script"><link rel="prefetch" href="/assets/I56-结束语.html-a0f9c339.js" as="script"><link rel="prefetch" href="/assets/I57-用户故事.html-8fc99bc0.js" as="script"><link rel="prefetch" href="/assets/I58-FAQ第一期.html-a127bae9.js" as="script"><link rel="prefetch" href="/assets/I59-FAQ第二期.html-ac8dc169.js" as="script"><link rel="prefetch" href="/assets/I60-特别加餐1.html-c7bdac60.js" as="script"><link rel="prefetch" href="/assets/I61-特别加餐2.html-3d8c3768.js" as="script"><link rel="prefetch" href="/assets/I：《结束答疑与加餐》.html-9c770ea5.js" as="script"><link rel="prefetch" href="/assets/index.html-05b8ae61.js" as="script"><link rel="prefetch" href="/assets/√B05-理解纸带编程.html-5cb10a5c.js" as="script"><link rel="prefetch" href="/assets/√B06-理解指令跳转.html-09da500a.js" as="script"><link rel="prefetch" href="/assets/√B07-理解函数调用.html-441b90d9.js" as="script"><link rel="prefetch" href="/assets/√B08-ELF和静态链接.html-4a0bc294.js" as="script"><link rel="prefetch" href="/assets/√B09-程序装载.html-174780ae.js" as="script"><link rel="prefetch" href="/assets/√B10-动态链接.html-b562db02.js" as="script"><link rel="prefetch" href="/assets/深入浅出计算机组成原理.html-22468004.js" as="script"><link rel="prefetch" href="/assets/A00-开篇词.html-2e679377.js" as="script"><link rel="prefetch" href="/assets/A01-CISC复杂RISC精简.html-52264827.js" as="script"><link rel="prefetch" href="/assets/A02-RISC特性与发展.html-7a49bcaf.js" as="script"><link rel="prefetch" href="/assets/A：《开篇导读》.html-9bd4599b.js" as="script"><link rel="prefetch" href="/assets/F00-用户故事：一生一芯.html-8e7092c2.js" as="script"><link rel="prefetch" href="/assets/F00-用户故事：学习Verilog.html-8fd74738.js" as="script"><link rel="prefetch" href="/assets/F01-先睹为快【视频缺失】.html-5ba8294b.js" as="script"><link rel="prefetch" href="/assets/F03-硬件编程语言（一）.html-06af2617.js" as="script"><link rel="prefetch" href="/assets/F04-硬件编程语言（二）.html-9d0d11a4.js" as="script"><link rel="prefetch" href="/assets/F05-指令架构RISC-V.html-2483ed06.js" as="script"><link rel="prefetch" href="/assets/F06-手写CPU（一）.html-08460948.js" as="script"><link rel="prefetch" href="/assets/F07-手写CPU（二）.html-5643da12.js" as="script"><link rel="prefetch" href="/assets/F08-手写CPU（三）.html-af8ae684.js" as="script"><link rel="prefetch" href="/assets/F09-手写CPU（四）.html-5ced6c84.js" as="script"><link rel="prefetch" href="/assets/F10-手写CPU（五）.html-ec464f8e.js" as="script"><link rel="prefetch" href="/assets/F11-手写CPU（六）.html-e0fa93ef.js" as="script"><link rel="prefetch" href="/assets/F：《手写MiniCPU系列》.html-c03e719c.js" as="script"><link rel="prefetch" href="/assets/I16-算术指令（上）RISC-V.html-8a391ff9.js" as="script"><link rel="prefetch" href="/assets/I17-算术指令（下）RISC-V.html-c37f5971.js" as="script"><link rel="prefetch" href="/assets/I18-跳转指令（上）RISC-V.html-fc25221c.js" as="script"><link rel="prefetch" href="/assets/I19-跳转指令（下）RISC-V.html-3cbddd17.js" as="script"><link rel="prefetch" href="/assets/I20-原子指令RISC-V.html-6cea168a.js" as="script"><link rel="prefetch" href="/assets/I21-加载指令RISC-V.html-a0a483d9.js" as="script"><link rel="prefetch" href="/assets/I22-访存指令RISC-V.html-ef130b54.js" as="script"><link rel="prefetch" href="/assets/I：【RISC-V指令】.html-d5a60c57.js" as="script"><link rel="prefetch" href="/assets/J23-内存地址空间.html-a3632316.js" as="script"><link rel="prefetch" href="/assets/J24-虚拟内存和物理内存.html-765cf8cd.js" as="script"><link rel="prefetch" href="/assets/J25-堆与栈的区别和应用.html-69aff6f3.js" as="script"><link rel="prefetch" href="/assets/J26-延迟分配的三种机制.html-4073411c.js" as="script"><link rel="prefetch" href="/assets/J27-内存的管理与分配.html-6dde2a6c.js" as="script"><link rel="prefetch" href="/assets/J：【内存管理系统】.html-59d3415c.js" as="script"><link rel="prefetch" href="/assets/K28-进程调度.html-50e16922.js" as="script"><link rel="prefetch" href="/assets/K：【进程管理系统】.html-15d9a27c.js" as="script"><link rel="prefetch" href="/assets/L29-应用间通信（一）.html-6dccd121.js" as="script"><link rel="prefetch" href="/assets/L30-应用间通信（二）.html-6e920f8f.js" as="script"><link rel="prefetch" href="/assets/L：【进程间通信机制】.html-62bf0379.js" as="script"><link rel="prefetch" href="/assets/M31-设备Cache与IO调度.html-e1f0216f.js" as="script"><link rel="prefetch" href="/assets/M32-Linux的IO设备管理.html-bd8e1fea.js" as="script"><link rel="prefetch" href="/assets/M33-iotop与iostat.html-02a603aa.js" as="script"><link rel="prefetch" href="/assets/M：【IO系统与设备管理】.html-302f7078.js" as="script"><link rel="prefetch" href="/assets/N34-文件仓库.html-10549fc7.js" as="script"><link rel="prefetch" href="/assets/N35-Linux文件系统（一）.html-d1ea602f.js" as="script"><link rel="prefetch" href="/assets/N36-Linux文件系统（二）.html-6ac028f7.js" as="script"><link rel="prefetch" href="/assets/N：【文件管理系统】.html-38b8a033.js" as="script"><link rel="prefetch" href="/assets/O37-浏览器原理（一）.html-12d41b5c.js" as="script"><link rel="prefetch" href="/assets/O38-浏览器原理（二）.html-f8daf59a.js" as="script"><link rel="prefetch" href="/assets/O39-V8执行JS全过程.html-cd31e951.js" as="script"><link rel="prefetch" href="/assets/O40-内功心法（一）.html-425994f6.js" as="script"><link rel="prefetch" href="/assets/O41-内功心法（二）.html-a45cb39a.js" as="script"><link rel="prefetch" href="/assets/O42-eBPF性能调优.html-40910980.js" as="script"><link rel="prefetch" href="/assets/O：《综合应用》.html-3f9ab470.js" as="script"><link rel="prefetch" href="/assets/P43-参考答案（一）.html-206376ce.js" as="script"><link rel="prefetch" href="/assets/P44-参考答案（二）.html-61e8f402.js" as="script"><link rel="prefetch" href="/assets/P45-结束语.html-a43ac82a.js" as="script"><link rel="prefetch" href="/assets/P46-期末测试.html-8bbbf9d1.js" as="script"><link rel="prefetch" href="/assets/P：《结束答疑与加餐》.html-c63ef143.js" as="script"><link rel="prefetch" href="/assets/Q47-云计算基础.html-24f6bd35.js" as="script"><link rel="prefetch" href="/assets/Q48-大数据基础（一）.html-dd266022.js" as="script"><link rel="prefetch" href="/assets/Q49-大数据基础（二）.html-bb0d1429.js" as="script"><link rel="prefetch" href="/assets/Q50-容器云与CaaS平台.html-9011033b.js" as="script"><link rel="prefetch" href="/assets/Q51-分布式微服务.html-749dbe9b.js" as="script"><link rel="prefetch" href="/assets/Q：《技术雷达》.html-a84790e5.js" as="script"><link rel="prefetch" href="/assets/index.html-f41bb1cf.js" as="script"><link rel="prefetch" href="/assets/√G12-交叉编译QEMU.html-1313482f.js" as="script"><link rel="prefetch" href="/assets/√G13-跑通HelloWorld.html-6073a1f8.js" as="script"><link rel="prefetch" href="/assets/√G：《实验环境搭建》.html-64bed50e.js" as="script"><link rel="prefetch" href="/assets/√H14-走进C语言.html-c82afca4.js" as="script"><link rel="prefetch" href="/assets/√H15-C语言编译器.html-2e35d391.js" as="script"><link rel="prefetch" href="/assets/√H16-代码优化和栈保护机制.html-43b608e7.js" as="script"><link rel="prefetch" href="/assets/√H：《高级语言C与汇编》.html-e9952045.js" as="script"><link rel="prefetch" href="/assets/计算机基础实战课.html-261e7907.js" as="script"><link rel="prefetch" href="/assets/E00-开篇词.html-620f0a23.js" as="script"><link rel="prefetch" href="/assets/E01-入学测验.html-f24cb0f2.js" as="script"><link rel="prefetch" href="/assets/E02-学习路径.html-22be69d4.js" as="script"><link rel="prefetch" href="/assets/E03-实用指南.html-c878117f.js" as="script"><link rel="prefetch" href="/assets/E04-学习攻略.html-3d46a57d.js" as="script"><link rel="prefetch" href="/assets/E：《开篇导读》.html-58d6efc9.js" as="script"><link rel="prefetch" href="/assets/F03-理解操作系统.html-9b298ca6.js" as="script"><link rel="prefetch" href="/assets/F04-命令行快速上手.html-bdd2b4ee.js" as="script"><link rel="prefetch" href="/assets/F05-理解系统调用.html-b4f4f642.js" as="script"><link rel="prefetch" href="/assets/F06-Linux系统调用函数大全.html-73e0f071.js" as="script"><link rel="prefetch" href="/assets/F07-Linux大型公司.html-8030b28b.js" as="script"><link rel="prefetch" href="/assets/F：《Linux综述》.html-84e25db9.js" as="script"><link rel="prefetch" href="/assets/G05-科普BootLoader.html-b714e3da.js" as="script"><link rel="prefetch" href="/assets/G06-x86CPU架构解析.html-ebc6a6ef.js" as="script"><link rel="prefetch" href="/assets/G07-从BIOS到BootLoader.html-0307fd86.js" as="script"><link rel="prefetch" href="/assets/G08-内核初始化.html-e62775c7.js" as="script"><link rel="prefetch" href="/assets/G09-系统调用.html-5151cdbc.js" as="script"><link rel="prefetch" href="/assets/G：【系统初始化】.html-ec412360.js" as="script"><link rel="prefetch" href="/assets/H10-进程.html-5a9f17d7.js" as="script"><link rel="prefetch" href="/assets/H11-线程.html-f7fe05e1.js" as="script"><link rel="prefetch" href="/assets/H12-进程数据结构（上）.html-6ee97581.js" as="script"><link rel="prefetch" href="/assets/H13-进程数据结构（中）.html-c8b400a7.js" as="script"><link rel="prefetch" href="/assets/H14-进程数据结构（下）.html-90c1f7b5.js" as="script"><link rel="prefetch" href="/assets/H15-调度（上）.html-744a87b2.js" as="script"><link rel="prefetch" href="/assets/H16-调度（中）.html-198d18ff.js" as="script"><link rel="prefetch" href="/assets/H17-调度（下）.html-c5b05c39.js" as="script"><link rel="prefetch" href="/assets/H18-进程的创建.html-4f40f2f9.js" as="script"><link rel="prefetch" href="/assets/H19-线程的创建.html-a9a465e0.js" as="script"><link rel="prefetch" href="/assets/H：【进程管理系统】.html-45f1597c.js" as="script"><link rel="prefetch" href="/assets/I20-进程内存空间布局.html-037c1930.js" as="script"><link rel="prefetch" href="/assets/I21-分段分页机制比对.html-9408f7d4.js" as="script"><link rel="prefetch" href="/assets/I22-进程空间管理.html-923e3ad7.js" as="script"><link rel="prefetch" href="/assets/I23-物理内存管理（上）.html-57cecab3.js" as="script"><link rel="prefetch" href="/assets/I24-物理内存管理（下）.html-fde50a0c.js" as="script"><link rel="prefetch" href="/assets/I25-用户态内存映射.html-877225db.js" as="script"><link rel="prefetch" href="/assets/I26-内核态内存映射.html-bc086f33.js" as="script"><link rel="prefetch" href="/assets/I：【内存管理系统】.html-9b16186e.js" as="script"><link rel="prefetch" href="/assets/J27-文件系统.html-ecfd0272.js" as="script"><link rel="prefetch" href="/assets/J28-硬盘文件系统.html-3b01f67f.js" as="script"><link rel="prefetch" href="/assets/J29-VFS虚拟文件系统.html-1838d5d3.js" as="script"><link rel="prefetch" href="/assets/J30-文件缓存机制.html-2dd12a13.js" as="script"><link rel="prefetch" href="/assets/J：【文件管理系统】.html-07d9fa16.js" as="script"><link rel="prefetch" href="/assets/K31-IO设备管理流程结构.html-9b880d2b.js" as="script"><link rel="prefetch" href="/assets/K32-字符设备（上）.html-362656cf.js" as="script"><link rel="prefetch" href="/assets/K33-字符设备（下）.html-0448d63b.js" as="script"><link rel="prefetch" href="/assets/K34-块设备（上）.html-ddfbf0c1.js" as="script"><link rel="prefetch" href="/assets/K35-块设备（下）.html-1525dd40.js" as="script"><link rel="prefetch" href="/assets/K：【IO系统与设备管理】.html-6e9675ac.js" as="script"><link rel="prefetch" href="/assets/L36-进程间通信.html-6ee37d76.js" as="script"><link rel="prefetch" href="/assets/L37-信号（上）.html-2b1ca39e.js" as="script"><link rel="prefetch" href="/assets/L38-信号（下）.html-472fa588.js" as="script"><link rel="prefetch" href="/assets/L39-管道.html-2f4422cf.js" as="script"><link rel="prefetch" href="/assets/L40-IPC（上）.html-06feb834.js" as="script"><link rel="prefetch" href="/assets/L41-IPC（中）.html-4d1ba6a4.js" as="script"><link rel="prefetch" href="/assets/L42-IPC（下）.html-43dbca0c.js" as="script"><link rel="prefetch" href="/assets/L：【进程之间通信】.html-c0635b76.js" as="script"><link rel="prefetch" href="/assets/M00-网络相关的加餐预习.html-5eac3e75.js" as="script"><link rel="prefetch" href="/assets/M43-Socket通信.html-32ea913c.js" as="script"><link rel="prefetch" href="/assets/M45-发送网络包（上）.html-92847b14.js" as="script"><link rel="prefetch" href="/assets/M46-发送网络包（下）.html-dd30f236.js" as="script"><link rel="prefetch" href="/assets/M47-接收网络包（上）.html-22091df6.js" as="script"><link rel="prefetch" href="/assets/M48-接收网络包（下）.html-4dee0400.js" as="script"><link rel="prefetch" href="/assets/M：【网络通信协议栈】.html-6574dd5a.js" as="script"><link rel="prefetch" href="/assets/N49-虚拟机.html-e16f34e0.js" as="script"><link rel="prefetch" href="/assets/N50-虚拟CPU（上）.html-bd7bfa07.js" as="script"><link rel="prefetch" href="/assets/N51-虚拟CPU（下）.html-0a56a667.js" as="script"><link rel="prefetch" href="/assets/N52-内存虚拟化.html-e8b60779.js" as="script"><link rel="prefetch" href="/assets/N53-存储虚拟化（上）.html-a9ac0f7f.js" as="script"><link rel="prefetch" href="/assets/N54-存储虚拟化（下）.html-f9985862.js" as="script"><link rel="prefetch" href="/assets/N55-网络虚拟化.html-2a87e2af.js" as="script"><link rel="prefetch" href="/assets/N：【虚拟化的技术】.html-80a13920.js" as="script"><link rel="prefetch" href="/assets/O56-容器.html-fec2db99.js" as="script"><link rel="prefetch" href="/assets/O57-Namespace技术.html-26cda25a.js" as="script"><link rel="prefetch" href="/assets/O58-cgroup技术.html-e947b724.js" as="script"><link rel="prefetch" href="/assets/O59-数据中心操作系统.html-33cd96a6.js" as="script"><link rel="prefetch" href="/assets/O：【容器化的技术】.html-87ca9fd7.js" as="script"><link rel="prefetch" href="/assets/Q62-知识串讲（一）.html-3800977c.js" as="script"><link rel="prefetch" href="/assets/Q63-知识串讲（二）.html-623d1637.js" as="script"><link rel="prefetch" href="/assets/Q64-知识串讲（三）.html-6a3190ca.js" as="script"><link rel="prefetch" href="/assets/Q65-知识串讲（四）.html-23a7cb93.js" as="script"><link rel="prefetch" href="/assets/Q66-知识串讲（五）.html-89c5ea2b.js" as="script"><link rel="prefetch" href="/assets/Q：《原理知识串讲》.html-c17d08be.js" as="script"><link rel="prefetch" href="/assets/R67-结束语.html-e828f6ea.js" as="script"><link rel="prefetch" href="/assets/R68-期末测试.html-4d16676a.js" as="script"><link rel="prefetch" href="/assets/index.html-5a9810fb.js" as="script"><link rel="prefetch" href="/assets/R：《结束答疑与加餐》.html-bfd29bbe.js" as="script"><link rel="prefetch" href="/assets/√P60-实验环境搭建（上）.html-9deb7be5.js" as="script"><link rel="prefetch" href="/assets/√P61-实验环境搭建（下）.html-7ac68a39.js" as="script"><link rel="prefetch" href="/assets/√P：《实验环境搭建》.html-3e350ad1.js" as="script"><link rel="prefetch" href="/assets/趣谈Linux操作系统.html-ca92fa70.js" as="script"><link rel="prefetch" href="/assets/A：《开篇导读》.html-b594a051.js" as="script"><link rel="prefetch" href="/assets/B03-运算符.html-f35b2bb5.js" as="script"><link rel="prefetch" href="/assets/B04-控制逻辑.html-3e917114.js" as="script"><link rel="prefetch" href="/assets/B05-函数调用（上）.html-5a9e6328.js" as="script"><link rel="prefetch" href="/assets/B06-函数调用（下）.html-cda2cd2a.js" as="script"><link rel="prefetch" href="/assets/B07-整合数据.html-582c9e21.js" as="script"><link rel="prefetch" href="/assets/B08-指针的使用.html-7151d43a.js" as="script"><link rel="prefetch" href="/assets/B：《核心语法》.html-e29b1f93.js" as="script"><link rel="prefetch" href="/assets/C10-字符与数学计算.html-24035a86.js" as="script"><link rel="prefetch" href="/assets/C11-IO系统接口模型.html-893dc161.js" as="script"><link rel="prefetch" href="/assets/C12-非本地跳转与可变参数.html-f21583ec.js" as="script"><link rel="prefetch" href="/assets/C13-并发基础知识.html-27f442b4.js" as="script"><link rel="prefetch" href="/assets/C14-并发中数据同步.html-c39c6c18.js" as="script"><link rel="prefetch" href="/assets/C15-信号与软中断.html-54752c92.js" as="script"><link rel="prefetch" href="/assets/C16-日期时间与实用函数.html-b98745eb.js" as="script"><link rel="prefetch" href="/assets/C17-断言错误处理与对齐.html-659254a6.js" as="script"><link rel="prefetch" href="/assets/C：《标准库》.html-3703356b.js" as="script"><link rel="prefetch" href="/assets/D18-优化性能（上）.html-9fd552d1.js" as="script"><link rel="prefetch" href="/assets/D19-优化性能（下）.html-427e412b.js" as="script"><link rel="prefetch" href="/assets/D20-编码规范.html-e0576317.js" as="script"><link rel="prefetch" href="/assets/D21-单元测试.html-9f1762c7.js" as="script"><link rel="prefetch" href="/assets/D23-HTTPServer(上).html-5c3813e5.js" as="script"><link rel="prefetch" href="/assets/D24-HTTPServer(下).html-96f56126.js" as="script"><link rel="prefetch" href="/assets/D：《高性能工程》.html-72632bae.js" as="script"><link rel="prefetch" href="/assets/E26-进程内存空间管理.html-97a67fef.js" as="script"><link rel="prefetch" href="/assets/E29-程序的入口.html-163a4405.js" as="script"><link rel="prefetch" href="/assets/E30-ABI与API.html-734520c4.js" as="script"><link rel="prefetch" href="/assets/E31-程序与系统API交互.html-320392bc.js" as="script"><link rel="prefetch" href="/assets/E：《程序运行原理》.html-cc248cd4.js" as="script"><link rel="prefetch" href="/assets/F32-课堂答疑（一）.html-67e620fe.js" as="script"><link rel="prefetch" href="/assets/F33-课堂答疑（二）.html-ef958465.js" as="script"><link rel="prefetch" href="/assets/F34-C语言瑞士军刀.html-4ba0d985.js" as="script"><link rel="prefetch" href="/assets/F35-面向对象思想.html-4df26f96.js" as="script"><link rel="prefetch" href="/assets/F36-C的典范Nginx.html-9cb7a8f4.js" as="script"><link rel="prefetch" href="/assets/F40-Go拥抱C简明指南.html-78c461bf.js" as="script"><link rel="prefetch" href="/assets/F41-从C到CPP.html-6531f0e4.js" as="script"><link rel="prefetch" href="/assets/F42-学习攻略.html-fb93e19d.js" as="script"><link rel="prefetch" href="/assets/F43-推荐书籍.html-6cc0c947.js" as="script"><link rel="prefetch" href="/assets/F44-JIT编译技术.html-9b245d3f.js" as="script"><link rel="prefetch" href="/assets/F45-结束语.html-ec1c1380.js" as="script"><link rel="prefetch" href="/assets/F46-期末考试.html-21681627.js" as="script"><link rel="prefetch" href="/assets/F：《结束答疑与加餐》.html-8a5318da.js" as="script"><link rel="prefetch" href="/assets/index.html-49ed6709.js" as="script"><link rel="prefetch" href="/assets/√A00-开篇词.html-0882cc38.js" as="script"><link rel="prefetch" href="/assets/√A00-课前热身.html-56f49caa.js" as="script"><link rel="prefetch" href="/assets/√A01-程序生命周期.html-fbb5206c.js" as="script"><link rel="prefetch" href="/assets/√B02-数据与量值.html-560e2c2a.js" as="script"><link rel="prefetch" href="/assets/√B09-预处理器.html-396f3f36.js" as="script"><link rel="prefetch" href="/assets/√D22-结构化编译加速构建.html-8b33b4c4.js" as="script"><link rel="prefetch" href="/assets/√E25-ELF文件.html-07a5c42c.js" as="script"><link rel="prefetch" href="/assets/√E27-编译器链接.html-1490efd3.js" as="script"><link rel="prefetch" href="/assets/√E28-运行时动态链接.html-d2257c64.js" as="script"><link rel="prefetch" href="/assets/√F37-C编译执行（1）.html-47ca168a.js" as="script"><link rel="prefetch" href="/assets/√F38-C编译执行（2）.html-2897ac2b.js" as="script"><link rel="prefetch" href="/assets/√F39-C编译执行（3）.html-9dcae7bc.js" as="script"><link rel="prefetch" href="/assets/深入C语言和程序运行原理.html-28552483.js" as="script"><link rel="prefetch" href="/assets/A：《JVM基本原理》.html-f60d7df2.js" as="script"><link rel="prefetch" href="/assets/B03-Java类的加载.html-afe28744.js" as="script"><link rel="prefetch" href="/assets/B：《Java类的加载》.html-2c0c2ac0.js" as="script"><link rel="prefetch" href="/assets/C04-JVM执行方法调用1.html-7b9097dd.js" as="script"><link rel="prefetch" href="/assets/C05-JVM执行方法调用2.html-a1a9c667.js" as="script"><link rel="prefetch" href="/assets/C：《执行方法调用》.html-b92b4eda.js" as="script"><link rel="prefetch" href="/assets/D06-异常机制.html-a7d75cb1.js" as="script"><link rel="prefetch" href="/assets/D07-反射机制1.html-15de5df3.js" as="script"><link rel="prefetch" href="/assets/D08-反射机制2.html-3c20b2ab.js" as="script"><link rel="prefetch" href="/assets/D09-反射机制3.html-3e099d2b.js" as="script"><link rel="prefetch" href="/assets/D：《异常以及反射》.html-183eeacc.js" as="script"><link rel="prefetch" href="/assets/E10-对象内存布局.html-66f984bd.js" as="script"><link rel="prefetch" href="/assets/E：《对象内存布局》.html-66bc02f7.js" as="script"><link rel="prefetch" href="/assets/F11-垃圾回收1.html-e2bf7f1d.js" as="script"><link rel="prefetch" href="/assets/F12-垃圾回收2.html-5a991881.js" as="script"><link rel="prefetch" href="/assets/F：《垃圾回收技术》.html-5dfe608c.js" as="script"><link rel="prefetch" href="/assets/G13-Java内存模型.html-b1c6d869.js" as="script"><link rel="prefetch" href="/assets/G：《Java内存模型》.html-9ea1e333.js" as="script"><link rel="prefetch" href="/assets/H14-实现synchronized.html-1d210f69.js" as="script"><link rel="prefetch" href="/assets/H：《实现synchronized》.html-f1a8fe60.js" as="script"><link rel="prefetch" href="/assets/I15-语法糖与编译器.html-654d58a0.js" as="script"><link rel="prefetch" href="/assets/I：《语法糖与编译器》.html-8dc7a252.js" as="script"><link rel="prefetch" href="/assets/J16-即时编译1.html-a8cbddc7.js" as="script"><link rel="prefetch" href="/assets/J17-即时编译2.html-6231fab8.js" as="script"><link rel="prefetch" href="/assets/J18-即时编译3.html-84d040b4.js" as="script"><link rel="prefetch" href="/assets/J：《JIT即时编译》.html-2996f509.js" as="script"><link rel="prefetch" href="/assets/K19-Java字节码.html-b28cc0b3.js" as="script"><link rel="prefetch" href="/assets/K：《Java字节码》.html-ed1752a7.js" as="script"><link rel="prefetch" href="/assets/L20-方法内联1.html-b02ec454.js" as="script"><link rel="prefetch" href="/assets/L21-方法内联2.html-ae6d525f.js" as="script"><link rel="prefetch" href="/assets/L：《方法内联》.html-8ecf3754.js" as="script"><link rel="prefetch" href="/assets/M22-HotSpot虚拟机.html-30a2a697.js" as="script"><link rel="prefetch" href="/assets/M：《HotSpot虚拟机》.html-e675f122.js" as="script"><link rel="prefetch" href="/assets/N23-逃逸分析.html-ba9f6dd8.js" as="script"><link rel="prefetch" href="/assets/N：《逃逸分析》.html-7cc6f135.js" as="script"><link rel="prefetch" href="/assets/O24-字段访问优化.html-11190d77.js" as="script"><link rel="prefetch" href="/assets/O25-循环优化.html-d9586de1.js" as="script"><link rel="prefetch" href="/assets/O26-向量化.html-c3246e30.js" as="script"><link rel="prefetch" href="/assets/O：《代码优化环节》.html-37872d64.js" as="script"><link rel="prefetch" href="/assets/P27-注解处理器.html-1af3759a.js" as="script"><link rel="prefetch" href="/assets/P：《注解处理器》.html-8b400bdf.js" as="script"><link rel="prefetch" href="/assets/Q28-基准测试JMH(上).html-8343f974.js" as="script"><link rel="prefetch" href="/assets/Q29-基准测试JMH(下).html-bf3a3fd1.js" as="script"><link rel="prefetch" href="/assets/Q：《基准测试框架》.html-6d713c30.js" as="script"><link rel="prefetch" href="/assets/R29-常用工具介绍.html-da51a4c0.js" as="script"><link rel="prefetch" href="/assets/R30-监控诊断工具(上).html-125fd1b8.js" as="script"><link rel="prefetch" href="/assets/R31-监控诊断工具(下).html-22120295.js" as="script"><link rel="prefetch" href="/assets/index.html-7f88a69c.js" as="script"><link rel="prefetch" href="/assets/R：《监控诊断工具》.html-a3bfcabf.js" as="script"><link rel="prefetch" href="/assets/S32-JNI运行机制.html-5ce2ebf4.js" as="script"><link rel="prefetch" href="/assets/S：《JNI运行机制》.html-b547d8fd.js" as="script"><link rel="prefetch" href="/assets/T33-Agent与字节码注入.html-4be9ac30.js" as="script"><link rel="prefetch" href="/assets/T：《Agent字节码注入》.html-899e1a04.js" as="script"><link rel="prefetch" href="/assets/U34-GraalVM.html-700dcfeb.js" as="script"><link rel="prefetch" href="/assets/U35-Truffle.html-f675dc72.js" as="script"><link rel="prefetch" href="/assets/U36-SubstrateVM.html-dd6b9351.js" as="script"><link rel="prefetch" href="/assets/U：《新奇黑科技》.html-f3a70c95.js" as="script"><link rel="prefetch" href="/assets/V37-结束语.html-1ddf8aa3.js" as="script"><link rel="prefetch" href="/assets/V38-结课测试.html-f4a2d3c3.js" as="script"><link rel="prefetch" href="/assets/V：《结束语》.html-9bf38b80.js" as="script"><link rel="prefetch" href="/assets/√A00-开篇词.html-195fc691.js" as="script"><link rel="prefetch" href="/assets/√A01-代码如何运行.html-ab9de26b.js" as="script"><link rel="prefetch" href="/assets/√A02-Java基本类型.html-6f9e602f.js" as="script"><link rel="prefetch" href="/assets/深入拆解Java虚拟机.html-3a586445.js" as="script"><link rel="prefetch" href="/assets/404.html-f04ced3e.js" as="script"><link rel="prefetch" href="/assets/index.html-f7f35ccb.js" as="script"><link rel="prefetch" href="/assets/index.html-3bfbe77a.js" as="script"><link rel="prefetch" href="/assets/index.html-88930a72.js" as="script"><link rel="prefetch" href="/assets/index.html-19de02d9.js" as="script"><link rel="prefetch" href="/assets/index.html-2e547c56.js" as="script"><link rel="prefetch" href="/assets/index.html-71fc6e23.js" as="script"><link rel="prefetch" href="/assets/index.html-b8bdf50b.js" as="script"><link rel="prefetch" href="/assets/index.html-6526cdd1.js" as="script"><link rel="prefetch" href="/assets/index.html-e18a1ea6.js" as="script"><link rel="prefetch" href="/assets/index.html-2dd23dbb.js" as="script"><link rel="prefetch" href="/assets/index.html-6dc95667.js" as="script"><link rel="prefetch" href="/assets/index.html-6b9fc218.js" as="script"><link rel="prefetch" href="/assets/index.html-5d70d921.js" as="script"><link rel="prefetch" href="/assets/index.html-3f87be15.js" as="script"><link rel="prefetch" href="/assets/index.html-11ce7ea4.js" as="script"><link rel="prefetch" href="/assets/index.html-869fa6a4.js" as="script"><link rel="prefetch" href="/assets/index.html-52caf55c.js" as="script"><link rel="prefetch" href="/assets/index.html-bdb4c779.js" as="script"><link rel="prefetch" href="/assets/index.html-032a87af.js" as="script"><link rel="prefetch" href="/assets/index.html-15e1c23d.js" as="script"><link rel="prefetch" href="/assets/index.html-fba760bb.js" as="script"><link rel="prefetch" href="/assets/index.html-f653273a.js" as="script"><link rel="prefetch" href="/assets/index.html-8deacd83.js" as="script"><link rel="prefetch" href="/assets/index.html-9f3e6f20.js" as="script"><link rel="prefetch" href="/assets/index.html-c46ecb3b.js" as="script"><link rel="prefetch" href="/assets/index.html-c9c7377a.js" as="script"><link rel="prefetch" href="/assets/index.html-6417bc1c.js" as="script"><link rel="prefetch" href="/assets/index.html-902a6a41.js" as="script"><link rel="prefetch" href="/assets/index.html-4393dbe0.js" as="script"><link rel="prefetch" href="/assets/index.html-644e8ebd.js" as="script"><link rel="prefetch" href="/assets/index.html-8d8a8827.js" as="script"><link rel="prefetch" href="/assets/index.html-6832bca9.js" as="script"><link rel="prefetch" href="/assets/index.html-589d0e8c.js" as="script"><link rel="prefetch" href="/assets/index.html-215e03e2.js" as="script"><link rel="prefetch" href="/assets/index.html-8722a2e3.js" as="script"><link rel="prefetch" href="/assets/index.html-6c705bc2.js" as="script"><link rel="prefetch" href="/assets/index.html-09c0fcde.js" as="script"><link rel="prefetch" href="/assets/index.html-8236a5c8.js" as="script"><link rel="prefetch" href="/assets/index.html-05ac9dc4.js" as="script"><link rel="prefetch" href="/assets/index.html-d66332d2.js" as="script"><link rel="prefetch" href="/assets/index.html-960b40dc.js" as="script"><link rel="prefetch" href="/assets/index.html-0d9ac62a.js" as="script"><link rel="prefetch" href="/assets/index.html-ea4ddd20.js" as="script"><link rel="prefetch" href="/assets/index.html-7174e2c8.js" as="script"><link rel="prefetch" href="/assets/index.html-1f38184f.js" as="script"><link rel="prefetch" href="/assets/index.html-00854a36.js" as="script"><link rel="prefetch" href="/assets/index.html-bd48ca32.js" as="script"><link rel="prefetch" href="/assets/index.html-fc4e63b3.js" as="script"><link rel="prefetch" href="/assets/index.html-ba8cf3d4.js" as="script"><link rel="prefetch" href="/assets/index.html-5d698b59.js" as="script"><link rel="prefetch" href="/assets/index.html-d2e2b250.js" as="script"><link rel="prefetch" href="/assets/index.html-9b846c05.js" as="script"><link rel="prefetch" href="/assets/index.html-d5193920.js" as="script"><link rel="prefetch" href="/assets/index.html-ec89a325.js" as="script"><link rel="prefetch" href="/assets/index.html-60ee7af2.js" as="script"><link rel="prefetch" href="/assets/index.html-23fe3076.js" as="script"><link rel="prefetch" href="/assets/index.html-67a2c4b6.js" as="script"><link rel="prefetch" href="/assets/index.html-a3b569e4.js" as="script"><link rel="prefetch" href="/assets/index.html-06363d8a.js" as="script"><link rel="prefetch" href="/assets/index.html-83851524.js" as="script"><link rel="prefetch" href="/assets/index.html-ea2fadae.js" as="script"><link rel="prefetch" href="/assets/index.html-b7ed822f.js" as="script"><link rel="prefetch" href="/assets/index.html-f726fec9.js" as="script"><link rel="prefetch" href="/assets/index.html-d9a17d63.js" as="script"><link rel="prefetch" href="/assets/index.html-5d268f65.js" as="script"><link rel="prefetch" href="/assets/index.html-48130b91.js" as="script"><link rel="prefetch" href="/assets/index.html-a3859347.js" as="script"><link rel="prefetch" href="/assets/index.html-b5f51f8e.js" as="script"><link rel="prefetch" href="/assets/index.html-e60978e9.js" as="script"><link rel="prefetch" href="/assets/index.html-24fc9bde.js" as="script"><link rel="prefetch" href="/assets/index.html-1951de36.js" as="script"><link rel="prefetch" href="/assets/index.html-29834aa9.js" as="script"><link rel="prefetch" href="/assets/index.html-be0c5606.js" as="script"><link rel="prefetch" href="/assets/index.html-5a423fa6.js" as="script"><link rel="prefetch" href="/assets/index.html-c2fa2d40.js" as="script"><link rel="prefetch" href="/assets/index.html-53a5c43b.js" as="script"><link rel="prefetch" href="/assets/index.html-ed9cfb8a.js" as="script"><link rel="prefetch" href="/assets/index.html-30e693dd.js" as="script"><link rel="prefetch" href="/assets/index.html-ff46c1f7.js" as="script"><link rel="prefetch" href="/assets/index.html-1e81339c.js" as="script"><link rel="prefetch" href="/assets/index.html-a925c048.js" as="script"><link rel="prefetch" href="/assets/index.html-52674ec2.js" as="script"><link rel="prefetch" href="/assets/index.html-380e29bd.js" as="script"><link rel="prefetch" href="/assets/index.html-cb94eae7.js" as="script"><link rel="prefetch" href="/assets/index.html-d84e3905.js" as="script"><link rel="prefetch" href="/assets/index.html-dbdd6dc0.js" as="script"><link rel="prefetch" href="/assets/index.html-18cfedb6.js" as="script"><link rel="prefetch" href="/assets/index.html-1aeb5924.js" as="script"><link rel="prefetch" href="/assets/index.html-7dd39b94.js" as="script"><link rel="prefetch" href="/assets/index.html-d9060dcf.js" as="script"><link rel="prefetch" href="/assets/index.html-0b95a4d7.js" as="script"><link rel="prefetch" href="/assets/index.html-cb22cc3e.js" as="script"><link rel="prefetch" href="/assets/index.html-0fc55f7b.js" as="script"><link rel="prefetch" href="/assets/index.html-0e5c21a1.js" as="script"><link rel="prefetch" href="/assets/index.html-2ca40168.js" as="script"><link rel="prefetch" href="/assets/index.html-2e6cae89.js" as="script"><link rel="prefetch" href="/assets/index.html-e1d1fe4f.js" as="script"><link rel="prefetch" href="/assets/index.html-f18a0497.js" as="script"><link rel="prefetch" href="/assets/index.html-7522b8ff.js" as="script"><link rel="prefetch" href="/assets/index.html-032ce89f.js" as="script"><link rel="prefetch" href="/assets/index.html-0e3d1034.js" as="script"><link rel="prefetch" href="/assets/index.html-df03a3cd.js" as="script"><link rel="prefetch" href="/assets/index.html-3f4222c1.js" as="script"><link rel="prefetch" href="/assets/index.html-b02f4302.js" as="script"><link rel="prefetch" href="/assets/index.html-22a9eb52.js" as="script"><link rel="prefetch" href="/assets/index.html-f9779c44.js" as="script"><link rel="prefetch" href="/assets/index.html-4d24e4dd.js" as="script"><link rel="prefetch" href="/assets/index.html-be8268a6.js" as="script"><link rel="prefetch" href="/assets/index.html-98d754df.js" as="script"><link rel="prefetch" href="/assets/index.html-5113c23a.js" as="script"><link rel="prefetch" href="/assets/index.html-27abe23e.js" as="script"><link rel="prefetch" href="/assets/index.html-13524bbd.js" as="script"><link rel="prefetch" href="/assets/index.html-edc52cd5.js" as="script"><link rel="prefetch" href="/assets/index.html-0129f8bb.js" as="script"><link rel="prefetch" href="/assets/index.html-e61314a0.js" as="script"><link rel="prefetch" href="/assets/index.html-6829207f.js" as="script"><link rel="prefetch" href="/assets/index.html-daf433b5.js" as="script"><link rel="prefetch" href="/assets/index.html-0f1a0ba5.js" as="script"><link rel="prefetch" href="/assets/index.html-87e6c2a6.js" as="script"><link rel="prefetch" href="/assets/index.html-4edbd4eb.js" as="script"><link rel="prefetch" href="/assets/index.html-9f88707f.js" as="script"><link rel="prefetch" href="/assets/index.html-bb4458dc.js" as="script"><link rel="prefetch" href="/assets/index.html-8af5b3dc.js" as="script"><link rel="prefetch" href="/assets/index.html-dd86e35c.js" as="script"><link rel="prefetch" href="/assets/index.html-ebd73f06.js" as="script"><link rel="prefetch" href="/assets/index.html-177181ab.js" as="script"><link rel="prefetch" href="/assets/index.html-626d9244.js" as="script"><link rel="prefetch" href="/assets/index.html-44feb977.js" as="script"><link rel="prefetch" href="/assets/index.html-9d13226b.js" as="script"><link rel="prefetch" href="/assets/index.html-8f7d1d2f.js" as="script"><link rel="prefetch" href="/assets/index.html-ef25d157.js" as="script"><link rel="prefetch" href="/assets/index.html-6b10a389.js" as="script"><link rel="prefetch" href="/assets/index.html-0b9201a7.js" as="script"><link rel="prefetch" href="/assets/index.html-59ccddb2.js" as="script"><link rel="prefetch" href="/assets/index.html-06d65318.js" as="script"><link rel="prefetch" href="/assets/index.html-299372a1.js" as="script"><link rel="prefetch" href="/assets/00-名词解释LOL.html-454bfb31.js" as="script"><link rel="prefetch" href="/assets/01-白泽带你读论文丨kAFL Hardware-Assisted Feedback Fuzzing for OS Kernels.html-dd60db9f.js" as="script"><link rel="prefetch" href="/assets/02-白泽带你读论文CREDALTowards Locating a Memory Corruption Vulnerability.html-11d7831d.js" as="script"><link rel="prefetch" href="/assets/03-白泽带你读论文丨A Large-Scale Analysis of Security of Embedded Firmwares.html-8e2dddb2.js" as="script"><link rel="prefetch" href="/assets/04-白泽带你读论文丨Razzer Finding Kernel Race Bugs through Fuzzing.html-96994cc2.js" as="script"><link rel="prefetch" href="/assets/05-白泽带你读论文丨Precise and Scalable Detection of Double-Fetch.html-d7e7f5c1.js" as="script"><link rel="prefetch" href="/assets/06-白泽带你读论文丨DIFUZE Interface Aware Fuzzing for Kernel Drivers.html-a2fe3d2f.js" as="script"><link rel="prefetch" href="/assets/07-白泽带你读论文丨CheckItAgainDetecting Lacking-Recheck Bugs in OS Kernel.html-276e4bed.js" as="script"><link rel="prefetch" href="/assets/08-白泽带你读论文丨POMPPostmortem Program Analysis with Hardware-Enhanced.html-f04df05c.js" as="script"><link rel="prefetch" href="/assets/09-白泽带你读论文丨MoonShine Optimizing OS Fuzzer Seed Selection.html-a1937ce9.js" as="script"><link rel="prefetch" href="/assets/10-白泽带你读论文丨Do Android Taint Analysis Tools Keep their Promises.html-85d401f3.js" as="script"><link rel="prefetch" href="/assets/11-白泽带你读论文丨Fuzzing File Systems via Two-Dimensional Input Space.html-fe1e77a1.js" as="script"><link rel="prefetch" href="/assets/12-白泽带你读论文丨PeriScope An Effective Probing and Fuzzing Framework.html-bef13c29.js" as="script"><link rel="prefetch" href="/assets/13-白泽带你读论文FirmaliceAutomatic Detection of Bypass Vulnerabilities.html-99ec91e3.js" as="script"><link rel="prefetch" href="/assets/14-白泽带你读论文丨Challenges in Fuzzing Embedded Devices：What You Corrupt.html-94fd9ed2.js" as="script"><link rel="prefetch" href="/assets/15-白泽带你读论文丨Automatically Identifying and Understanding DarkJargons.html-de38710a.js" as="script"><link rel="prefetch" href="/assets/16-白泽带你读论文丨VUzzer Application-aware Evolutionary Fuzzing.html-6dd61f73.js" as="script"><link rel="prefetch" href="/assets/17-白泽带你读论文丨Protocol state machine fuzzing of TLS Implementation.html-35b87677.js" as="script"><link rel="prefetch" href="/assets/18-白泽带你读论文丨REDQUEEN Fuzzing with Input-to-State Correspondence.html-3b3029cd.js" as="script"><link rel="prefetch" href="/assets/19-白泽带你读论文丨Flaws in Security-Focused StaticAnalysisToolsforAndroid.html-02363d5a.js" as="script"><link rel="prefetch" href="/assets/20-白泽带你读论文丨Dowsing for Overflows A Guided Fuzzer to Find Buffer.html-ab67b901.js" as="script"><link rel="prefetch" href="/assets/21-白泽带你读论文丨Full-speed Fuzzing Reducing Fuzzing Overhead through.html-ad9b99d2.js" as="script"><link rel="prefetch" href="/assets/22-白泽带你读论文丨Fuzzing with Code Fragments.html-030e6dc9.js" as="script"><link rel="prefetch" href="/assets/23-白泽带你读论文丨NAUTILUS Fishing for Deep Bugs with Grammars.html-69b9a45a.js" as="script"><link rel="prefetch" href="/assets/24-白泽带你读论文丨DR. CHECKER A Soundy Analysis for Linux Kernel Drivers.html-ce42ea65.js" as="script"><link rel="prefetch" href="/assets/25-白泽带你读论文丨K-Miner Uncovering Memory Corruption in Linux.html-5cd73314.js" as="script"><link rel="prefetch" href="/assets/26-白泽带你读论文丨LockDoc Trace-Based Analysis of Locking in the Linux.html-67be2b46.js" as="script"><link rel="prefetch" href="/assets/27-白泽带你读论文丨Precisely Characterizing Security Impact in a Flood of.html-d8184c95.js" as="script"><link rel="prefetch" href="/assets/28-白泽带你读论文丨MVP Detecting Vulnerabilities using Patch-Enhanced.html-2067c33e.js" as="script"><link rel="prefetch" href="/assets/29-白泽带你读论文Using Safety Properties to Generate VulnerabilityPatches.html-23bd474c.js" as="script"><link rel="prefetch" href="/assets/30-白泽带你读论文丨Large-Scale Analysis of Style Injection by Relative.html-35982a70.js" as="script"><link rel="prefetch" href="/assets/31-白泽带你读论文丨FUSE Finding File Upload Bugs via Penetration Testing.html-af801abb.js" as="script"><link rel="prefetch" href="/assets/32-白泽带你读论文丨Efficient and Flexible Discovery of PHP Application.html-973e4a21.js" as="script"><link rel="prefetch" href="/assets/33-白泽带你读论文丨Code Reuse Attacks in PHP Automated POPChainGeneration.html-d7df4edc.js" as="script"><link rel="prefetch" href="/assets/34-白泽带你读论文丨Chainsaw Chained Automated Workflow-based Exploit.html-b56398f1.js" as="script"><link rel="prefetch" href="/assets/35-白泽带你读论文丨NAVEX Precise and Scalable Exploit Generation for.html-3ae1ed37.js" as="script"><link rel="prefetch" href="/assets/36-白泽带你读论文丨Different Is Good Detecting the Use of Uninitialized.html-f07a07cd.js" as="script"><link rel="prefetch" href="/assets/37-白泽带你读论文丨Digtool A Virtualization-Based Framework for Detecting.html-b555c703.js" as="script"><link rel="prefetch" href="/assets/38-白泽带你读论文丨Efficient Scalable Thread-Safety-Violation Detection.html-db56eeec.js" as="script"><link rel="prefetch" href="/assets/39-白泽带你读论文丨Block Oriented Programming Automating Data-Only Attacks.html-776b3edb.js" as="script"><link rel="prefetch" href="/assets/40-白泽带你读论文丨Data-Oriented Programming On the Expressiveness of (copy).html-1e171243.js" as="script"><link rel="prefetch" href="/assets/41-白泽带你读论文丨Data-Oriented Programming On the Expressiveness of.html-23069a5d.js" as="script"><link rel="prefetch" href="/assets/42-白泽带你读论文丨NoJITsu Locking Down JavaScript Engines.html-ef5ea90b.js" as="script"><link rel="prefetch" href="/assets/43-白泽带你读论文丨Measuring and Modeling the Label Dynamics of Online.html-ae4ecc47.js" as="script"><link rel="prefetch" href="/assets/44-白泽带你读论文丨DeepRefiner Multi-layer Android Malware Detection.html-8692731d.js" as="script"><link rel="prefetch" href="/assets/45-白泽带你读论文丨On Training Robust PDF Malware Classifiers.html-b651f4f5.js" as="script"><link rel="prefetch" href="/assets/46-白泽带你读论文丨MACE Detecting Privilege Escalation Vulnerabilities in.html-6b437a9d.js" as="script"><link rel="prefetch" href="/assets/47-白泽带你读论文丨Static Detection of Second-Order Vulnerabilities in Web.html-63910d9e.js" as="script"><link rel="prefetch" href="/assets/48-白泽带你读论文丨IJON Exploring Deep State Spaces via Fuzzing.html-8596a91b.js" as="script"><link rel="prefetch" href="/assets/49-白泽带你读论文丨FuzzGen Automatic Fuzzer Generation.html-e2fdd3f0.js" as="script"><link rel="prefetch" href="/assets/50-白泽带你读论文丨HFL Hybrid Fuzzing on the Linux Kernel.html-bc0b1f48.js" as="script"><link rel="prefetch" href="/assets/51-白泽带你读论文丨Jump-Oriented Programming A New Class of Code-Reuse.html-3243e93f.js" as="script"><link rel="prefetch" href="/assets/52-白泽带你读论文丨Counterfeit Object-oriented Programming.html-8bda695b.js" as="script"><link rel="prefetch" href="/assets/53-白泽带你读论文丨USBFuzz A Framework for Fuzzing USB Drivers by Device.html-e37641f8.js" as="script"><link rel="prefetch" href="/assets/54-白泽带你读论文丨Symbolic execution with SYMCC Don’t interpret_ compile!.html-9f88716b.js" as="script"><link rel="prefetch" href="/assets/55-白泽带你读论文丨Detecting Kernel Memory Leaks in Specialized Modules.html-5db7640a.js" as="script"><link rel="prefetch" href="/assets/56-白泽带你读论文  Towards Measuring Supply Chain Attacks.html-f0fc9457.js" as="script"><link rel="prefetch" href="/assets/57-白泽带你读论文  FavocadoFuzzing the Binding Code of JavaScriptEngines.html-518fcb18.js" as="script"><link rel="prefetch" href="/assets/58-白泽带你读论文  Mining and Exploiting Payment Credential Leaks.html-a7f44bfe.js" as="script"><link rel="prefetch" href="/assets/59-白泽带你读论文  Share First_ Ask Later.html-f5491500.js" as="script"><link rel="prefetch" href="/assets/60-白泽带你读论文  STOCHFUZZ (copy).html-3e629fa6.js" as="script"><link rel="prefetch" href="/assets/61-白泽带你读论文  STOCHFUZZ.html-b152cc77.js" as="script"><link rel="prefetch" href="/assets/62-白泽带你读论文  Object Dependence Graph and Query.html-03424dc6.js" as="script"><link rel="prefetch" href="/assets/63-白泽带你读论文  FUGIO Automatic Exploit Generation for PHP.html-4f5a6d42.js" as="script"><link rel="prefetch" href="/assets/64-Igor Crash Deduplication Through Root-Cause Clustering.html-d4b6e4aa.js" as="script"><link rel="prefetch" href="/assets/65-白泽带你读论文  Journey to the Center of the Cookie Ecosystem.html-a678a70d.js" as="script"><link rel="prefetch" href="/assets/66-Summary of How Machine Learning.html-c0fb3119.js" as="script"><link rel="prefetch" href="/assets/67-白泽带你读论文  Messy States of Wiring Vulnerabilities in Emergin.html-74dcc192.js" as="script"><link rel="prefetch" href="/assets/68-白泽带你读论文  A Formal Analysis of the FIDO UAF Protocol.html-89dff2c1.js" as="script"><link rel="prefetch" href="/assets/69-白泽带你读论文  Adversarial Attacks on Speaker Recognition Systems.html-12724752.js" as="script"><link rel="prefetch" href="/assets/70-白泽带你读论文丨SoK.html-bf8f0bad.js" as="script"><link rel="prefetch" href="/assets/71-白泽带你读论文  Probe the Proto.html-6cbe8128.js" as="script"><link rel="prefetch" href="/assets/72-白泽带你读论文  V0Finder.html-adc08ce0.js" as="script"><link rel="prefetch" href="/assets/73-白泽带你读论文  Robbery on DevOps.html-bb7e238c.js" as="script"><link rel="prefetch" href="/assets/74-白泽带你读论文  MetaEmu.html-815068a6.js" as="script"><link rel="prefetch" href="/assets/75-白泽带你读论文  VetSC.html-3e456624.js" as="script"><link rel="prefetch" href="/assets/76-白泽带你读论文  DriveFuzz.html-ef5c1820.js" as="script"><link rel="prefetch" href="/assets/77-白泽带你读论文  Poirot.html-9d1dcac9.js" as="script"><link rel="prefetch" href="/assets/78-白泽带你读论文｜FAST.html-48f13f1c.js" as="script"><link rel="prefetch" href="/assets/79-白泽带你读论文｜ALASTOR.html-8026e59c.js" as="script"><link rel="prefetch" href="/assets/80-白泽带你读论文｜ALFORE.html-01fcd24d.js" as="script"><link rel="prefetch" href="/assets/81-白泽带你读论文｜MPChecker.html-99d36465.js" as="script"><link rel="prefetch" href="/assets/82-白泽带你读论文｜How Long Do Vulnerabilities Live in the Code.html-f48c966d.js" as="script"><link rel="prefetch" href="/assets/83-成果分享｜知识图谱嵌入投毒攻击.html-42e91198.js" as="script"><link rel="prefetch" href="/assets/84-白泽带你读论文｜RSFUZZER.html-973b3f70.js" as="script"><link rel="prefetch" href="/assets/85-成果分享｜基于结构语义建模的点云分类模型.html-a03fbaf3.js" as="script"><link rel="prefetch" href="/assets/86-成果分享｜Anti-FakeU 托攻击防御算法.html-6f8e788f.js" as="script"><link rel="prefetch" href="/assets/87-成果分享｜神经网络水印破解.html-5f9ed234.js" as="script"><link rel="prefetch" href="/assets/88-成果分享｜无人驾驶通用防御模块LOP.html-aeee3180.js" as="script"><link rel="prefetch" href="/assets/89-白泽带你读论文｜MANTA.html-46dc51eb.js" as="script"><link rel="prefetch" href="/assets/90-白泽带你读论文｜FOAP.html-dc5c3dab.js" as="script"><link rel="prefetch" href="/assets/91-白泽带你读论文｜APICraft.html-e4da1121.js" as="script"><link rel="prefetch" href="/assets/92-白泽带你读论文｜MAYDAY.html-5c4f7ecf.js" as="script"><link rel="prefetch" href="/assets/index.html-754c6e8c.js" as="script"><link rel="prefetch" href="/assets/复旦白泽战队.html-22c3c9c5.js" as="script"><link rel="prefetch" href="/assets/A01-开篇词.html-2e6f8967.js" as="script"><link rel="prefetch" href="/assets/A02-编辑手记.html-679abab7.js" as="script"><link rel="prefetch" href="/assets/B03-内核结构与设计.html-3d2582ac.js" as="script"><link rel="prefetch" href="/assets/B04-业界成熟的内核架构.html-e6cd55cd.js" as="script"><link rel="prefetch" href="/assets/B：《基础铺垫》.html-fd13c89b.js" as="script"><link rel="prefetch" href="/assets/C00-待整理的内容.html-f7044a00.js" as="script"><link rel="prefetch" href="/assets/C05-CPU工作模式.html-140c17a7.js" as="script"><link rel="prefetch" href="/assets/C06-MMU虚拟地址转换.html-d94f0b1c.js" as="script"><link rel="prefetch" href="/assets/C07-Cache与内存.html-faea5db2.js" as="script"><link rel="prefetch" href="/assets/C08-并发中常用的锁.html-33acf092.js" as="script"><link rel="prefetch" href="/assets/C09-Linux数据同步手段.html-8dbd4331.js" as="script"><link rel="prefetch" href="/assets/C：《硬件知识》.html-d633e6d4.js" as="script"><link rel="prefetch" href="/assets/D10-设置工作模式与环境（上）.html-200d9cea.js" as="script"><link rel="prefetch" href="/assets/D11-设置工作模式与环境（中）.html-fee8879b.js" as="script"><link rel="prefetch" href="/assets/D12-Cosmos-initldr.html-c5d0d06d.js" as="script"><link rel="prefetch" href="/assets/D12-设置工作模式与环境（下）.html-9db88912.js" as="script"><link rel="prefetch" href="/assets/D13-Cosmos-hal.html-58ae0414.js" as="script"><link rel="prefetch" href="/assets/D13-主板初始化.html-25445422.js" as="script"><link rel="prefetch" href="/assets/D14-Linux初始化（上）.html-b43a9081.js" as="script"><link rel="prefetch" href="/assets/D15-Linux初始化（下）.html-c14d83e4.js" as="script"><link rel="prefetch" href="/assets/D：【系统初始化】.html-58420ab0.js" as="script"><link rel="prefetch" href="/assets/H16-内存分页分段与分区.html-aa1da2d2.js" as="script"><link rel="prefetch" href="/assets/H17-内存管理初始化.html-0f83b34b.js" as="script"><link rel="prefetch" href="/assets/H18-内存页的分配与释放.html-a01a2b09.js" as="script"><link rel="prefetch" href="/assets/H19-容器管理内存对象.html-980d4b7d.js" as="script"><link rel="prefetch" href="/assets/H20-地址空间的相关设计.html-e3172cb5.js" as="script"><link rel="prefetch" href="/assets/H21-虚拟内存分配与释放.html-30a0e676.js" as="script"><link rel="prefetch" href="/assets/H22-Linux的伙伴系统.html-2bebf77e.js" as="script"><link rel="prefetch" href="/assets/H23-Linux的SLAB分配器.html-c39b1445.js" as="script"><link rel="prefetch" href="/assets/H：【内存管理系统】.html-5910f59c.js" as="script"><link rel="prefetch" href="/assets/I24-进程活动的描述.html-44b94ee2.js" as="script"><link rel="prefetch" href="/assets/I25-多个活动要安排（上）.html-63564550.js" as="script"><link rel="prefetch" href="/assets/I26-多个活动要安排（下）.html-41f1ea45.js" as="script"><link rel="prefetch" href="/assets/I27-Linux进程管理系统.html-74b92f0d.js" as="script"><link rel="prefetch" href="/assets/I：【进程管理系统】.html-668bd03d.js" as="script"><link rel="prefetch" href="/assets/J28-设备类型与设备驱动.html-af3b5dbc.js" as="script"><link rel="prefetch" href="/assets/J29-在内核中注册设备.html-5a12d3a3.js" as="script"><link rel="prefetch" href="/assets/J30-设备处理内核IO包.html-20be78d5.js" as="script"><link rel="prefetch" href="/assets/J31-Linux获取设备信息.html-21c0a5fd.js" as="script"><link rel="prefetch" href="/assets/J：【IO系统与设备管理】.html-eeb58b33.js" as="script"><link rel="prefetch" href="/assets/K32-文件系统数据结构.html-513a2e32.js" as="script"><link rel="prefetch" href="/assets/K33-文件系统的格式化.html-aeab6616.js" as="script"><link rel="prefetch" href="/assets/K34-文件的基本操作.html-77dd558a.js" as="script"><link rel="prefetch" href="/assets/K35-Linux的VFS.html-2f2f2a27.js" as="script"><link rel="prefetch" href="/assets/K：【文件管理系统】.html-673b5a76.js" as="script"><link rel="prefetch" href="/assets/L36-从URL到网卡.html-71ca69d3.js" as="script"><link rel="prefetch" href="/assets/L37-从内核到应用.html-41ae2b95.js" as="script"><link rel="prefetch" href="/assets/L38-宏观网络架构.html-ce3c2689.js" as="script"><link rel="prefetch" href="/assets/L39-Linux中Socket接口.html-b6abe59f.js" as="script"><link rel="prefetch" href="/assets/L40-Linux中Socket实现.html-3abd6b5a.js" as="script"><link rel="prefetch" href="/assets/L：【网络通信协议栈】.html-737e10a2.js" as="script"><link rel="prefetch" href="/assets/M41-用户态与内核态之间的接口.html-b9098940.js" as="script"><link rel="prefetch" href="/assets/M42-Linux的系统API.html-a41cda03.js" as="script"><link rel="prefetch" href="/assets/M：【内核接口系统API】.html-553e6260.js" as="script"><link rel="prefetch" href="/assets/N43-虚拟机内核KVM.html-af1b0495.js" as="script"><link rel="prefetch" href="/assets/N44-容器的实现机制.html-51f18895.js" as="script"><link rel="prefetch" href="/assets/N：【虚拟化容器化】.html-f15ec717.js" as="script"><link rel="prefetch" href="/assets/O45-ARM新宠苹果M1.html-24f91bd3.js" as="script"><link rel="prefetch" href="/assets/O46-AArch64体系.html-e15868e4.js" as="script"><link rel="prefetch" href="/assets/O：【ARM新架构】.html-175fba60.js" as="script"><link rel="prefetch" href="/assets/P47-参考答案.html-5dccf634.js" as="script"><link rel="prefetch" href="/assets/P48-大咖助场.html-3b102de8.js" as="script"><link rel="prefetch" href="/assets/P49-用户故事1.html-ba830eff.js" as="script"><link rel="prefetch" href="/assets/P50-用户故事2.html-d150c381.js" as="script"><link rel="prefetch" href="/assets/P51-用户故事3.html-0aaa7f6c.js" as="script"><link rel="prefetch" href="/assets/P52-用户故事4.html-6c02bc1b.js" as="script"><link rel="prefetch" href="/assets/P53-用户故事5.html-4c49e924.js" as="script"><link rel="prefetch" href="/assets/P54-用户故事6.html-5276c23b.js" as="script"><link rel="prefetch" href="/assets/P55-结束语.html-dcccec13.js" as="script"><link rel="prefetch" href="/assets/P56-结课测试.html-3cfd20fd.js" as="script"><link rel="prefetch" href="/assets/P：《结束答疑与加餐》.html-c567f53c.js" as="script"><link rel="prefetch" href="/assets/index.html-81fa5e7f.js" as="script"><link rel="prefetch" href="/assets/√B01-程序的运行过程.html-e19ab24e.js" as="script"><link rel="prefetch" href="/assets/√B02-汇编加C实现极简内核.html-d7d93342.js" as="script"><link rel="prefetch" href="/assets/操作系统实战45讲.html-fe6b1f7c.js" as="script"><link rel="prefetch" href="/assets/操作系统实战45讲【待办】.html-55a7a8af.js" as="script"><link rel="prefetch" href="/assets/趣谈实战原理.html-5aff8f4c.js" as="script"><link rel="prefetch" href="/assets/A00-开篇词.html-2c7c2e15.js" as="script"><link rel="prefetch" href="/assets/A01-冯诺依曼体系结构.html-0fda33cf.js" as="script"><link rel="prefetch" href="/assets/A02-知识地图.html-82252f0e.js" as="script"><link rel="prefetch" href="/assets/A03-CPU性能.html-69ec8a1a.js" as="script"><link rel="prefetch" href="/assets/A04-如何提升性能.html-7dc7ebc6.js" as="script"><link rel="prefetch" href="/assets/A：《入门开篇》.html-d9980b0f.js" as="script"><link rel="prefetch" href="/assets/B11-二进制编码.html-e0a9af6e.js" as="script"><link rel="prefetch" href="/assets/B12-理解电路.html-538949b0.js" as="script"><link rel="prefetch" href="/assets/B13-加法器.html-ab30dd6e.js" as="script"><link rel="prefetch" href="/assets/B14-乘法器.html-5fe11ca7.js" as="script"><link rel="prefetch" href="/assets/B15-浮点数和定点数（上）.html-298eda76.js" as="script"><link rel="prefetch" href="/assets/B16-浮点数和定点数（下）.html-1a669202.js" as="script"><link rel="prefetch" href="/assets/B：《指令和运算》.html-41e6ab8c.js" as="script"><link rel="prefetch" href="/assets/C17-建立数据通路（上）.html-2622cab9.js" as="script"><link rel="prefetch" href="/assets/C18-建立数据通路（中）.html-a572170a.js" as="script"><link rel="prefetch" href="/assets/C19-建立数据通路（下）.html-19a8b36b.js" as="script"><link rel="prefetch" href="/assets/C：【CPU硬件模块】.html-3b01acf3.js" as="script"><link rel="prefetch" href="/assets/D20-流水线指令设计（上）.html-e3bef2f4.js" as="script"><link rel="prefetch" href="/assets/D21-流水线指令设计（下）.html-78ba3797.js" as="script"><link rel="prefetch" href="/assets/D22-冒险和预测（一）.html-1e428af9.js" as="script"><link rel="prefetch" href="/assets/D23-冒险和预测（二）.html-b61261f7.js" as="script"><link rel="prefetch" href="/assets/D24-冒险和预测（三）.html-fe4ec7fb.js" as="script"><link rel="prefetch" href="/assets/D25-冒险和预测（四）.html-7f63960b.js" as="script"><link rel="prefetch" href="/assets/D26-多发射与超标量.html-43ab9639.js" as="script"><link rel="prefetch" href="/assets/D27-超线程与SIMD.html-3db1e515.js" as="script"><link rel="prefetch" href="/assets/D：【CPU性能设计】.html-05a27a0a.js" as="script"><link rel="prefetch" href="/assets/E28-异常和中断.html-28e99d84.js" as="script"><link rel="prefetch" href="/assets/E29-CISC复杂RISC精简.html-84d6dcb5.js" as="script"><link rel="prefetch" href="/assets/E30-GPU（上）.html-387dc3f9.js" as="script"><link rel="prefetch" href="/assets/E31-GPU（下）.html-897977be.js" as="script"><link rel="prefetch" href="/assets/E32-FPGA和ASIC.html-a95b97b1.js" as="script"><link rel="prefetch" href="/assets/E33-解读TPU.html-a67230fd.js" as="script"><link rel="prefetch" href="/assets/E34-理解虚拟机.html-24e20ecd.js" as="script"><link rel="prefetch" href="/assets/E：《了解相关知识》.html-c00e95bb.js" as="script"><link rel="prefetch" href="/assets/F35-存储层次全景.html-b338506a.js" as="script"><link rel="prefetch" href="/assets/F36-局部性原理.html-df9faa21.js" as="script"><link rel="prefetch" href="/assets/F37-高速缓存（上）.html-dee50ddc.js" as="script"><link rel="prefetch" href="/assets/F38-高速缓存（下）.html-9b867cdc.js" as="script"><link rel="prefetch" href="/assets/F39-MESI协议.html-5ff5c5fb.js" as="script"><link rel="prefetch" href="/assets/F40-理解内存（上）.html-c04526fa.js" as="script"><link rel="prefetch" href="/assets/F41-理解内存（下）.html-e0779602.js" as="script"><link rel="prefetch" href="/assets/F：《存储相关原理》.html-ef02a294.js" as="script"><link rel="prefetch" href="/assets/G42-理解总线.html-1fd3a54c.js" as="script"><link rel="prefetch" href="/assets/G43-输入输出设备.html-40857e0c.js" as="script"><link rel="prefetch" href="/assets/G44-理解IO性能.html-77c71bd8.js" as="script"><link rel="prefetch" href="/assets/G45-机械硬盘HDD.html-c2d861df.js" as="script"><link rel="prefetch" href="/assets/G46-固态硬盘SSD（上）.html-9fb52e80.js" as="script"><link rel="prefetch" href="/assets/G47-固态硬盘SSD（下）.html-1b8d3ded.js" as="script"><link rel="prefetch" href="/assets/G48-DMA启发Kafka.html-fd782a2b.js" as="script"><link rel="prefetch" href="/assets/G49-错误损坏校验.html-2ae96fdc.js" as="script"><link rel="prefetch" href="/assets/G50-错误损坏还原.html-f5626490.js" as="script"><link rel="prefetch" href="/assets/G：《总线与IO设备》.html-c5792223.js" as="script"><link rel="prefetch" href="/assets/H51-分布式系统.html-012f3f29.js" as="script"><link rel="prefetch" href="/assets/H52-DMP系统（上）.html-9e41793d.js" as="script"><link rel="prefetch" href="/assets/H53-DMP系统（下）.html-b27eadea.js" as="script"><link rel="prefetch" href="/assets/H54-理解Disruptor（上）.html-817fa320.js" as="script"><link rel="prefetch" href="/assets/H55-理解Disruptor（下）.html-b08f758d.js" as="script"><link rel="prefetch" href="/assets/H：《工程实战应用》.html-4ab38be4.js" as="script"><link rel="prefetch" href="/assets/I56-结束语.html-663afaf6.js" as="script"><link rel="prefetch" href="/assets/I57-用户故事.html-6a27cb53.js" as="script"><link rel="prefetch" href="/assets/I58-FAQ第一期.html-69295175.js" as="script"><link rel="prefetch" href="/assets/I59-FAQ第二期.html-400694df.js" as="script"><link rel="prefetch" href="/assets/I60-特别加餐1.html-9ecc1bae.js" as="script"><link rel="prefetch" href="/assets/I61-特别加餐2.html-ffebd4fd.js" as="script"><link rel="prefetch" href="/assets/I：《结束答疑与加餐》.html-db6c0fb3.js" as="script"><link rel="prefetch" href="/assets/index.html-931bee3a.js" as="script"><link rel="prefetch" href="/assets/√B05-理解纸带编程.html-a11be243.js" as="script"><link rel="prefetch" href="/assets/√B06-理解指令跳转.html-02a9258d.js" as="script"><link rel="prefetch" href="/assets/√B07-理解函数调用.html-ffce04f6.js" as="script"><link rel="prefetch" href="/assets/√B08-ELF和静态链接.html-5874b247.js" as="script"><link rel="prefetch" href="/assets/√B09-程序装载.html-a9ea672a.js" as="script"><link rel="prefetch" href="/assets/√B10-动态链接.html-038cc7dc.js" as="script"><link rel="prefetch" href="/assets/深入浅出计算机组成原理.html-1cc47de6.js" as="script"><link rel="prefetch" href="/assets/A00-开篇词.html-794ac798.js" as="script"><link rel="prefetch" href="/assets/A01-CISC复杂RISC精简.html-ab3f4570.js" as="script"><link rel="prefetch" href="/assets/A02-RISC特性与发展.html-12460996.js" as="script"><link rel="prefetch" href="/assets/A：《开篇导读》.html-6442e460.js" as="script"><link rel="prefetch" href="/assets/F00-用户故事：一生一芯.html-fdd624b6.js" as="script"><link rel="prefetch" href="/assets/F00-用户故事：学习Verilog.html-5400b3a9.js" as="script"><link rel="prefetch" href="/assets/F01-先睹为快【视频缺失】.html-4d78ec94.js" as="script"><link rel="prefetch" href="/assets/F03-硬件编程语言（一）.html-722d9c31.js" as="script"><link rel="prefetch" href="/assets/F04-硬件编程语言（二）.html-357385cf.js" as="script"><link rel="prefetch" href="/assets/F05-指令架构RISC-V.html-678fbdf4.js" as="script"><link rel="prefetch" href="/assets/F06-手写CPU（一）.html-90204aff.js" as="script"><link rel="prefetch" href="/assets/F07-手写CPU（二）.html-477080ca.js" as="script"><link rel="prefetch" href="/assets/F08-手写CPU（三）.html-67ddda97.js" as="script"><link rel="prefetch" href="/assets/F09-手写CPU（四）.html-e0b1dc6a.js" as="script"><link rel="prefetch" href="/assets/F10-手写CPU（五）.html-a555920b.js" as="script"><link rel="prefetch" href="/assets/F11-手写CPU（六）.html-4eddde89.js" as="script"><link rel="prefetch" href="/assets/F：《手写MiniCPU系列》.html-bb4eafc0.js" as="script"><link rel="prefetch" href="/assets/I16-算术指令（上）RISC-V.html-884004f8.js" as="script"><link rel="prefetch" href="/assets/I17-算术指令（下）RISC-V.html-5bdaa87d.js" as="script"><link rel="prefetch" href="/assets/I18-跳转指令（上）RISC-V.html-55370c44.js" as="script"><link rel="prefetch" href="/assets/I19-跳转指令（下）RISC-V.html-e39aff7f.js" as="script"><link rel="prefetch" href="/assets/I20-原子指令RISC-V.html-822b7b29.js" as="script"><link rel="prefetch" href="/assets/I21-加载指令RISC-V.html-28ed18a8.js" as="script"><link rel="prefetch" href="/assets/I22-访存指令RISC-V.html-b22c059b.js" as="script"><link rel="prefetch" href="/assets/I：【RISC-V指令】.html-132c6461.js" as="script"><link rel="prefetch" href="/assets/J23-内存地址空间.html-e310825b.js" as="script"><link rel="prefetch" href="/assets/J24-虚拟内存和物理内存.html-f7aa96d6.js" as="script"><link rel="prefetch" href="/assets/J25-堆与栈的区别和应用.html-89565159.js" as="script"><link rel="prefetch" href="/assets/J26-延迟分配的三种机制.html-ed34db22.js" as="script"><link rel="prefetch" href="/assets/J27-内存的管理与分配.html-2198a751.js" as="script"><link rel="prefetch" href="/assets/J：【内存管理系统】.html-bbb21ef4.js" as="script"><link rel="prefetch" href="/assets/K28-进程调度.html-b1f518de.js" as="script"><link rel="prefetch" href="/assets/K：【进程管理系统】.html-bd991cf5.js" as="script"><link rel="prefetch" href="/assets/L29-应用间通信（一）.html-0c4f08ba.js" as="script"><link rel="prefetch" href="/assets/L30-应用间通信（二）.html-388a738d.js" as="script"><link rel="prefetch" href="/assets/L：【进程间通信机制】.html-995f1723.js" as="script"><link rel="prefetch" href="/assets/M31-设备Cache与IO调度.html-7463b351.js" as="script"><link rel="prefetch" href="/assets/M32-Linux的IO设备管理.html-f34be75b.js" as="script"><link rel="prefetch" href="/assets/M33-iotop与iostat.html-37766da9.js" as="script"><link rel="prefetch" href="/assets/M：【IO系统与设备管理】.html-55618316.js" as="script"><link rel="prefetch" href="/assets/N34-文件仓库.html-1f55d938.js" as="script"><link rel="prefetch" href="/assets/N35-Linux文件系统（一）.html-43cdfa63.js" as="script"><link rel="prefetch" href="/assets/N36-Linux文件系统（二）.html-8c50ce07.js" as="script"><link rel="prefetch" href="/assets/N：【文件管理系统】.html-f2edf1ba.js" as="script"><link rel="prefetch" href="/assets/O37-浏览器原理（一）.html-971a124c.js" as="script"><link rel="prefetch" href="/assets/O38-浏览器原理（二）.html-381cbd5c.js" as="script"><link rel="prefetch" href="/assets/O39-V8执行JS全过程.html-35a23c8b.js" as="script"><link rel="prefetch" href="/assets/O40-内功心法（一）.html-04d9fd95.js" as="script"><link rel="prefetch" href="/assets/O41-内功心法（二）.html-6d727906.js" as="script"><link rel="prefetch" href="/assets/O42-eBPF性能调优.html-81fa5d53.js" as="script"><link rel="prefetch" href="/assets/O：《综合应用》.html-390c0d17.js" as="script"><link rel="prefetch" href="/assets/P43-参考答案（一）.html-c480a5e3.js" as="script"><link rel="prefetch" href="/assets/P44-参考答案（二）.html-00d2b307.js" as="script"><link rel="prefetch" href="/assets/P45-结束语.html-f4df6da0.js" as="script"><link rel="prefetch" href="/assets/P46-期末测试.html-125b174f.js" as="script"><link rel="prefetch" href="/assets/P：《结束答疑与加餐》.html-ac0ad411.js" as="script"><link rel="prefetch" href="/assets/Q47-云计算基础.html-fccae7e6.js" as="script"><link rel="prefetch" href="/assets/Q48-大数据基础（一）.html-c7d5cc6b.js" as="script"><link rel="prefetch" href="/assets/Q49-大数据基础（二）.html-cd0aa3ef.js" as="script"><link rel="prefetch" href="/assets/Q50-容器云与CaaS平台.html-81df77cd.js" as="script"><link rel="prefetch" href="/assets/Q51-分布式微服务.html-6e99677c.js" as="script"><link rel="prefetch" href="/assets/Q：《技术雷达》.html-a0412b74.js" as="script"><link rel="prefetch" href="/assets/index.html-0b31469f.js" as="script"><link rel="prefetch" href="/assets/√G12-交叉编译QEMU.html-41753bfc.js" as="script"><link rel="prefetch" href="/assets/√G13-跑通HelloWorld.html-40288a62.js" as="script"><link rel="prefetch" href="/assets/√G：《实验环境搭建》.html-3e63e886.js" as="script"><link rel="prefetch" href="/assets/√H14-走进C语言.html-8fbb20a5.js" as="script"><link rel="prefetch" href="/assets/√H15-C语言编译器.html-0443ca0d.js" as="script"><link rel="prefetch" href="/assets/√H16-代码优化和栈保护机制.html-df965ab9.js" as="script"><link rel="prefetch" href="/assets/√H：《高级语言C与汇编》.html-bd0f0457.js" as="script"><link rel="prefetch" href="/assets/计算机基础实战课.html-193147e3.js" as="script"><link rel="prefetch" href="/assets/E00-开篇词.html-29310627.js" as="script"><link rel="prefetch" href="/assets/E01-入学测验.html-b389e375.js" as="script"><link rel="prefetch" href="/assets/E02-学习路径.html-c7fd11c0.js" as="script"><link rel="prefetch" href="/assets/E03-实用指南.html-bc48d9a1.js" as="script"><link rel="prefetch" href="/assets/E04-学习攻略.html-57053641.js" as="script"><link rel="prefetch" href="/assets/E：《开篇导读》.html-65604c4e.js" as="script"><link rel="prefetch" href="/assets/F03-理解操作系统.html-a01493ed.js" as="script"><link rel="prefetch" href="/assets/F04-命令行快速上手.html-5def91bd.js" as="script"><link rel="prefetch" href="/assets/F05-理解系统调用.html-d72bb3e2.js" as="script"><link rel="prefetch" href="/assets/F06-Linux系统调用函数大全.html-057ac2fc.js" as="script"><link rel="prefetch" href="/assets/F07-Linux大型公司.html-64020af4.js" as="script"><link rel="prefetch" href="/assets/F：《Linux综述》.html-6482cdea.js" as="script"><link rel="prefetch" href="/assets/G05-科普BootLoader.html-a3e86347.js" as="script"><link rel="prefetch" href="/assets/G06-x86CPU架构解析.html-20f34749.js" as="script"><link rel="prefetch" href="/assets/G07-从BIOS到BootLoader.html-d9082441.js" as="script"><link rel="prefetch" href="/assets/G08-内核初始化.html-ea5d4b8c.js" as="script"><link rel="prefetch" href="/assets/G09-系统调用.html-c1f0d984.js" as="script"><link rel="prefetch" href="/assets/G：【系统初始化】.html-bb00de94.js" as="script"><link rel="prefetch" href="/assets/H10-进程.html-ce2b2a89.js" as="script"><link rel="prefetch" href="/assets/H11-线程.html-8b56cac0.js" as="script"><link rel="prefetch" href="/assets/H12-进程数据结构（上）.html-5ed05b47.js" as="script"><link rel="prefetch" href="/assets/H13-进程数据结构（中）.html-a9cc2db2.js" as="script"><link rel="prefetch" href="/assets/H14-进程数据结构（下）.html-5dea75d5.js" as="script"><link rel="prefetch" href="/assets/H15-调度（上）.html-00d0f706.js" as="script"><link rel="prefetch" href="/assets/H16-调度（中）.html-067095bd.js" as="script"><link rel="prefetch" href="/assets/H17-调度（下）.html-0c63ab26.js" as="script"><link rel="prefetch" href="/assets/H18-进程的创建.html-f110936a.js" as="script"><link rel="prefetch" href="/assets/H19-线程的创建.html-04a74846.js" as="script"><link rel="prefetch" href="/assets/H：【进程管理系统】.html-deda20eb.js" as="script"><link rel="prefetch" href="/assets/I20-进程内存空间布局.html-4b60bb48.js" as="script"><link rel="prefetch" href="/assets/I21-分段分页机制比对.html-edbaa529.js" as="script"><link rel="prefetch" href="/assets/I22-进程空间管理.html-2c1a0616.js" as="script"><link rel="prefetch" href="/assets/I23-物理内存管理（上）.html-162969c2.js" as="script"><link rel="prefetch" href="/assets/I24-物理内存管理（下）.html-966fa833.js" as="script"><link rel="prefetch" href="/assets/I25-用户态内存映射.html-36d8c379.js" as="script"><link rel="prefetch" href="/assets/I26-内核态内存映射.html-ae307bc9.js" as="script"><link rel="prefetch" href="/assets/I：【内存管理系统】.html-1a70f057.js" as="script"><link rel="prefetch" href="/assets/J27-文件系统.html-78c89d6f.js" as="script"><link rel="prefetch" href="/assets/J28-硬盘文件系统.html-a1a93756.js" as="script"><link rel="prefetch" href="/assets/J29-VFS虚拟文件系统.html-5ba97cd0.js" as="script"><link rel="prefetch" href="/assets/J30-文件缓存机制.html-2ee13749.js" as="script"><link rel="prefetch" href="/assets/J：【文件管理系统】.html-8ccf741f.js" as="script"><link rel="prefetch" href="/assets/K31-IO设备管理流程结构.html-adaff45e.js" as="script"><link rel="prefetch" href="/assets/K32-字符设备（上）.html-95a0d5ec.js" as="script"><link rel="prefetch" href="/assets/K33-字符设备（下）.html-99f1da5c.js" as="script"><link rel="prefetch" href="/assets/K34-块设备（上）.html-ba731fdf.js" as="script"><link rel="prefetch" href="/assets/K35-块设备（下）.html-f2754ecc.js" as="script"><link rel="prefetch" href="/assets/K：【IO系统与设备管理】.html-1a338df4.js" as="script"><link rel="prefetch" href="/assets/L36-进程间通信.html-e2bdd9df.js" as="script"><link rel="prefetch" href="/assets/L37-信号（上）.html-4c2edcfb.js" as="script"><link rel="prefetch" href="/assets/L38-信号（下）.html-b9107fde.js" as="script"><link rel="prefetch" href="/assets/L39-管道.html-f55e914b.js" as="script"><link rel="prefetch" href="/assets/L40-IPC（上）.html-dddb1f19.js" as="script"><link rel="prefetch" href="/assets/L41-IPC（中）.html-7a4efe36.js" as="script"><link rel="prefetch" href="/assets/L42-IPC（下）.html-87bef296.js" as="script"><link rel="prefetch" href="/assets/L：【进程之间通信】.html-e5c78ddf.js" as="script"><link rel="prefetch" href="/assets/M00-网络相关的加餐预习.html-9ed7ee76.js" as="script"><link rel="prefetch" href="/assets/M43-Socket通信.html-5921291c.js" as="script"><link rel="prefetch" href="/assets/M45-发送网络包（上）.html-ba525534.js" as="script"><link rel="prefetch" href="/assets/M46-发送网络包（下）.html-1dcb6e53.js" as="script"><link rel="prefetch" href="/assets/M47-接收网络包（上）.html-a3783805.js" as="script"><link rel="prefetch" href="/assets/M48-接收网络包（下）.html-10f9801b.js" as="script"><link rel="prefetch" href="/assets/M：【网络通信协议栈】.html-fc156116.js" as="script"><link rel="prefetch" href="/assets/N49-虚拟机.html-da92b8ce.js" as="script"><link rel="prefetch" href="/assets/N50-虚拟CPU（上）.html-251308e2.js" as="script"><link rel="prefetch" href="/assets/N51-虚拟CPU（下）.html-b350d903.js" as="script"><link rel="prefetch" href="/assets/N52-内存虚拟化.html-10242894.js" as="script"><link rel="prefetch" href="/assets/N53-存储虚拟化（上）.html-9fd00d2f.js" as="script"><link rel="prefetch" href="/assets/N54-存储虚拟化（下）.html-21dc30d1.js" as="script"><link rel="prefetch" href="/assets/N55-网络虚拟化.html-d0d8030c.js" as="script"><link rel="prefetch" href="/assets/N：【虚拟化的技术】.html-b0c027b5.js" as="script"><link rel="prefetch" href="/assets/O56-容器.html-f85a1f36.js" as="script"><link rel="prefetch" href="/assets/O57-Namespace技术.html-1e70976f.js" as="script"><link rel="prefetch" href="/assets/O58-cgroup技术.html-342c1a37.js" as="script"><link rel="prefetch" href="/assets/O59-数据中心操作系统.html-3cf4ffd9.js" as="script"><link rel="prefetch" href="/assets/O：【容器化的技术】.html-0d65ad97.js" as="script"><link rel="prefetch" href="/assets/Q62-知识串讲（一）.html-a1090d61.js" as="script"><link rel="prefetch" href="/assets/Q63-知识串讲（二）.html-ee72c96e.js" as="script"><link rel="prefetch" href="/assets/Q64-知识串讲（三）.html-4f236c21.js" as="script"><link rel="prefetch" href="/assets/Q65-知识串讲（四）.html-94f346b7.js" as="script"><link rel="prefetch" href="/assets/Q66-知识串讲（五）.html-19a62bad.js" as="script"><link rel="prefetch" href="/assets/Q：《原理知识串讲》.html-9ed68eeb.js" as="script"><link rel="prefetch" href="/assets/R67-结束语.html-07265c95.js" as="script"><link rel="prefetch" href="/assets/R68-期末测试.html-f19dca2d.js" as="script"><link rel="prefetch" href="/assets/index.html-da59faf9.js" as="script"><link rel="prefetch" href="/assets/R：《结束答疑与加餐》.html-688cb161.js" as="script"><link rel="prefetch" href="/assets/√P60-实验环境搭建（上）.html-253dfb78.js" as="script"><link rel="prefetch" href="/assets/√P61-实验环境搭建（下）.html-801754e6.js" as="script"><link rel="prefetch" href="/assets/√P：《实验环境搭建》.html-e2cf7f8c.js" as="script"><link rel="prefetch" href="/assets/趣谈Linux操作系统.html-e6c165a2.js" as="script"><link rel="prefetch" href="/assets/A：《开篇导读》.html-2c2bdbbb.js" as="script"><link rel="prefetch" href="/assets/B03-运算符.html-1871ec33.js" as="script"><link rel="prefetch" href="/assets/B04-控制逻辑.html-9a4c7eb9.js" as="script"><link rel="prefetch" href="/assets/B05-函数调用（上）.html-8beef064.js" as="script"><link rel="prefetch" href="/assets/B06-函数调用（下）.html-283558f1.js" as="script"><link rel="prefetch" href="/assets/B07-整合数据.html-ec486315.js" as="script"><link rel="prefetch" href="/assets/B08-指针的使用.html-0f3ddeda.js" as="script"><link rel="prefetch" href="/assets/B：《核心语法》.html-a5065fbe.js" as="script"><link rel="prefetch" href="/assets/C10-字符与数学计算.html-88474996.js" as="script"><link rel="prefetch" href="/assets/C11-IO系统接口模型.html-58437028.js" as="script"><link rel="prefetch" href="/assets/C12-非本地跳转与可变参数.html-fae850d7.js" as="script"><link rel="prefetch" href="/assets/C13-并发基础知识.html-0c479dd7.js" as="script"><link rel="prefetch" href="/assets/C14-并发中数据同步.html-69e86265.js" as="script"><link rel="prefetch" href="/assets/C15-信号与软中断.html-9325f1c0.js" as="script"><link rel="prefetch" href="/assets/C16-日期时间与实用函数.html-ad9e857c.js" as="script"><link rel="prefetch" href="/assets/C17-断言错误处理与对齐.html-fb5e78e8.js" as="script"><link rel="prefetch" href="/assets/C：《标准库》.html-482d506f.js" as="script"><link rel="prefetch" href="/assets/D18-优化性能（上）.html-b81dd85a.js" as="script"><link rel="prefetch" href="/assets/D19-优化性能（下）.html-c94f7670.js" as="script"><link rel="prefetch" href="/assets/D20-编码规范.html-f3f112b4.js" as="script"><link rel="prefetch" href="/assets/D21-单元测试.html-2bc88878.js" as="script"><link rel="prefetch" href="/assets/D23-HTTPServer(上).html-4ee81b79.js" as="script"><link rel="prefetch" href="/assets/D24-HTTPServer(下).html-f46eaf90.js" as="script"><link rel="prefetch" href="/assets/D：《高性能工程》.html-91247ddf.js" as="script"><link rel="prefetch" href="/assets/E26-进程内存空间管理.html-66ae41ed.js" as="script"><link rel="prefetch" href="/assets/E29-程序的入口.html-63d221e8.js" as="script"><link rel="prefetch" href="/assets/E30-ABI与API.html-7929d2c8.js" as="script"><link rel="prefetch" href="/assets/E31-程序与系统API交互.html-82144492.js" as="script"><link rel="prefetch" href="/assets/E：《程序运行原理》.html-62ab3f1a.js" as="script"><link rel="prefetch" href="/assets/F32-课堂答疑（一）.html-e5005d37.js" as="script"><link rel="prefetch" href="/assets/F33-课堂答疑（二）.html-e7bafa13.js" as="script"><link rel="prefetch" href="/assets/F34-C语言瑞士军刀.html-0a0465bd.js" as="script"><link rel="prefetch" href="/assets/F35-面向对象思想.html-ed1d2599.js" as="script"><link rel="prefetch" href="/assets/F36-C的典范Nginx.html-585260fd.js" as="script"><link rel="prefetch" href="/assets/F40-Go拥抱C简明指南.html-8f980dff.js" as="script"><link rel="prefetch" href="/assets/F41-从C到CPP.html-64773fb3.js" as="script"><link rel="prefetch" href="/assets/F42-学习攻略.html-4319f582.js" as="script"><link rel="prefetch" href="/assets/F43-推荐书籍.html-806d842e.js" as="script"><link rel="prefetch" href="/assets/F44-JIT编译技术.html-e40e89cc.js" as="script"><link rel="prefetch" href="/assets/F45-结束语.html-fdf7e9ff.js" as="script"><link rel="prefetch" href="/assets/F46-期末考试.html-61de9a73.js" as="script"><link rel="prefetch" href="/assets/F：《结束答疑与加餐》.html-bc5995d3.js" as="script"><link rel="prefetch" href="/assets/index.html-c35df5c3.js" as="script"><link rel="prefetch" href="/assets/√A00-开篇词.html-eebefa05.js" as="script"><link rel="prefetch" href="/assets/√A00-课前热身.html-d9152828.js" as="script"><link rel="prefetch" href="/assets/√A01-程序生命周期.html-48fc7855.js" as="script"><link rel="prefetch" href="/assets/√B02-数据与量值.html-4069bd3a.js" as="script"><link rel="prefetch" href="/assets/√B09-预处理器.html-ce919cd3.js" as="script"><link rel="prefetch" href="/assets/√D22-结构化编译加速构建.html-974f9d27.js" as="script"><link rel="prefetch" href="/assets/√E25-ELF文件.html-726d1bc7.js" as="script"><link rel="prefetch" href="/assets/√E27-编译器链接.html-11fa9ee6.js" as="script"><link rel="prefetch" href="/assets/√E28-运行时动态链接.html-9abefd28.js" as="script"><link rel="prefetch" href="/assets/√F37-C编译执行（1）.html-f682ff0e.js" as="script"><link rel="prefetch" href="/assets/√F38-C编译执行（2）.html-02ac2d04.js" as="script"><link rel="prefetch" href="/assets/√F39-C编译执行（3）.html-1e57f21f.js" as="script"><link rel="prefetch" href="/assets/深入C语言和程序运行原理.html-d2271740.js" as="script"><link rel="prefetch" href="/assets/A：《JVM基本原理》.html-b027e327.js" as="script"><link rel="prefetch" href="/assets/B03-Java类的加载.html-58bea25d.js" as="script"><link rel="prefetch" href="/assets/B：《Java类的加载》.html-d0b6aa47.js" as="script"><link rel="prefetch" href="/assets/C04-JVM执行方法调用1.html-16b1f427.js" as="script"><link rel="prefetch" href="/assets/C05-JVM执行方法调用2.html-cd4e5cea.js" as="script"><link rel="prefetch" href="/assets/C：《执行方法调用》.html-5f6bfb8d.js" as="script"><link rel="prefetch" href="/assets/D06-异常机制.html-84cf7378.js" as="script"><link rel="prefetch" href="/assets/D07-反射机制1.html-6b85490f.js" as="script"><link rel="prefetch" href="/assets/D08-反射机制2.html-7c2a2dc7.js" as="script"><link rel="prefetch" href="/assets/D09-反射机制3.html-9fd78fa1.js" as="script"><link rel="prefetch" href="/assets/D：《异常以及反射》.html-34bc8cc2.js" as="script"><link rel="prefetch" href="/assets/E10-对象内存布局.html-a48250a2.js" as="script"><link rel="prefetch" href="/assets/E：《对象内存布局》.html-fa8e3981.js" as="script"><link rel="prefetch" href="/assets/F11-垃圾回收1.html-4d17743e.js" as="script"><link rel="prefetch" href="/assets/F12-垃圾回收2.html-73897523.js" as="script"><link rel="prefetch" href="/assets/F：《垃圾回收技术》.html-e1637250.js" as="script"><link rel="prefetch" href="/assets/G13-Java内存模型.html-da8542b6.js" as="script"><link rel="prefetch" href="/assets/G：《Java内存模型》.html-8142a72c.js" as="script"><link rel="prefetch" href="/assets/H14-实现synchronized.html-e1e504e2.js" as="script"><link rel="prefetch" href="/assets/H：《实现synchronized》.html-b328c477.js" as="script"><link rel="prefetch" href="/assets/I15-语法糖与编译器.html-e5747fda.js" as="script"><link rel="prefetch" href="/assets/I：《语法糖与编译器》.html-8d7bdc21.js" as="script"><link rel="prefetch" href="/assets/J16-即时编译1.html-0715160c.js" as="script"><link rel="prefetch" href="/assets/J17-即时编译2.html-6d8caabd.js" as="script"><link rel="prefetch" href="/assets/J18-即时编译3.html-3a8cc153.js" as="script"><link rel="prefetch" href="/assets/J：《JIT即时编译》.html-a8c86a00.js" as="script"><link rel="prefetch" href="/assets/K19-Java字节码.html-20b9c384.js" as="script"><link rel="prefetch" href="/assets/K：《Java字节码》.html-e7776e01.js" as="script"><link rel="prefetch" href="/assets/L20-方法内联1.html-d01dea19.js" as="script"><link rel="prefetch" href="/assets/L21-方法内联2.html-9b0670b5.js" as="script"><link rel="prefetch" href="/assets/L：《方法内联》.html-95e2bf98.js" as="script"><link rel="prefetch" href="/assets/M22-HotSpot虚拟机.html-e5bca0b2.js" as="script"><link rel="prefetch" href="/assets/M：《HotSpot虚拟机》.html-4bcc6c0a.js" as="script"><link rel="prefetch" href="/assets/N23-逃逸分析.html-81e0d71b.js" as="script"><link rel="prefetch" href="/assets/N：《逃逸分析》.html-e2311d32.js" as="script"><link rel="prefetch" href="/assets/O24-字段访问优化.html-e7b6e02d.js" as="script"><link rel="prefetch" href="/assets/O25-循环优化.html-012a4427.js" as="script"><link rel="prefetch" href="/assets/O26-向量化.html-253d4b56.js" as="script"><link rel="prefetch" href="/assets/O：《代码优化环节》.html-42ccf5bc.js" as="script"><link rel="prefetch" href="/assets/P27-注解处理器.html-f2a4ddb4.js" as="script"><link rel="prefetch" href="/assets/P：《注解处理器》.html-d4661e9a.js" as="script"><link rel="prefetch" href="/assets/Q28-基准测试JMH(上).html-445a88b2.js" as="script"><link rel="prefetch" href="/assets/Q29-基准测试JMH(下).html-25aee028.js" as="script"><link rel="prefetch" href="/assets/Q：《基准测试框架》.html-c252b8ac.js" as="script"><link rel="prefetch" href="/assets/R29-常用工具介绍.html-cbb4c09b.js" as="script"><link rel="prefetch" href="/assets/R30-监控诊断工具(上).html-5f5a99b5.js" as="script"><link rel="prefetch" href="/assets/R31-监控诊断工具(下).html-26f984ce.js" as="script"><link rel="prefetch" href="/assets/index.html-bf1329c5.js" as="script"><link rel="prefetch" href="/assets/R：《监控诊断工具》.html-a9361ed5.js" as="script"><link rel="prefetch" href="/assets/S32-JNI运行机制.html-f540f99d.js" as="script"><link rel="prefetch" href="/assets/S：《JNI运行机制》.html-fa13bd52.js" as="script"><link rel="prefetch" href="/assets/T33-Agent与字节码注入.html-35656a4d.js" as="script"><link rel="prefetch" href="/assets/T：《Agent字节码注入》.html-ef765a50.js" as="script"><link rel="prefetch" href="/assets/U34-GraalVM.html-b22292b8.js" as="script"><link rel="prefetch" href="/assets/U35-Truffle.html-40225c7f.js" as="script"><link rel="prefetch" href="/assets/U36-SubstrateVM.html-5b714250.js" as="script"><link rel="prefetch" href="/assets/U：《新奇黑科技》.html-4f8d0037.js" as="script"><link rel="prefetch" href="/assets/V37-结束语.html-b85ffbd0.js" as="script"><link rel="prefetch" href="/assets/V38-结课测试.html-108a0fe8.js" as="script"><link rel="prefetch" href="/assets/V：《结束语》.html-6328ff83.js" as="script"><link rel="prefetch" href="/assets/√A00-开篇词.html-5d13bb31.js" as="script"><link rel="prefetch" href="/assets/√A01-代码如何运行.html-8f121050.js" as="script"><link rel="prefetch" href="/assets/√A02-Java基本类型.html-7425ed8c.js" as="script"><link rel="prefetch" href="/assets/深入拆解Java虚拟机.html-c346d28a.js" as="script"><link rel="prefetch" href="/assets/404.html-19781e6d.js" as="script"><link rel="prefetch" href="/assets/index.html-dfb4aac6.js" as="script"><link rel="prefetch" href="/assets/index.html-2d7b531c.js" as="script"><link rel="prefetch" href="/assets/index.html-c182e722.js" as="script"><link rel="prefetch" href="/assets/index.html-548207d6.js" as="script"><link rel="prefetch" href="/assets/index.html-b196c80d.js" as="script"><link rel="prefetch" href="/assets/index.html-7fabb5eb.js" as="script"><link rel="prefetch" href="/assets/index.html-36023b59.js" as="script"><link rel="prefetch" href="/assets/index.html-47d6606d.js" as="script"><link rel="prefetch" href="/assets/index.html-8d1b2f99.js" as="script"><link rel="prefetch" href="/assets/index.html-f5845446.js" as="script"><link rel="prefetch" href="/assets/index.html-b06e5453.js" as="script"><link rel="prefetch" href="/assets/index.html-c2d394ca.js" as="script"><link rel="prefetch" href="/assets/index.html-841fc9ff.js" as="script"><link rel="prefetch" href="/assets/index.html-407ecdc2.js" as="script"><link rel="prefetch" href="/assets/index.html-c5dd652b.js" as="script"><link rel="prefetch" href="/assets/index.html-acd755a8.js" as="script"><link rel="prefetch" href="/assets/index.html-ac20901a.js" as="script"><link rel="prefetch" href="/assets/index.html-91418cca.js" as="script"><link rel="prefetch" href="/assets/index.html-ce684d25.js" as="script"><link rel="prefetch" href="/assets/index.html-d33d59ae.js" as="script"><link rel="prefetch" href="/assets/index.html-5714a44a.js" as="script"><link rel="prefetch" href="/assets/index.html-6acd1d66.js" as="script"><link rel="prefetch" href="/assets/index.html-237ee2fc.js" as="script"><link rel="prefetch" href="/assets/index.html-a7a83537.js" as="script"><link rel="prefetch" href="/assets/index.html-d05515d1.js" as="script"><link rel="prefetch" href="/assets/index.html-034ed990.js" as="script"><link rel="prefetch" href="/assets/index.html-5ce675cf.js" as="script"><link rel="prefetch" href="/assets/index.html-bff735a4.js" as="script"><link rel="prefetch" href="/assets/index.html-f4f1d85f.js" as="script"><link rel="prefetch" href="/assets/index.html-a26564c0.js" as="script"><link rel="prefetch" href="/assets/index.html-c832c545.js" as="script"><link rel="prefetch" href="/assets/index.html-4c5d34c1.js" as="script"><link rel="prefetch" href="/assets/index.html-c6cb25b1.js" as="script"><link rel="prefetch" href="/assets/index.html-61fc23b0.js" as="script"><link rel="prefetch" href="/assets/index.html-56134dfc.js" as="script"><link rel="prefetch" href="/assets/index.html-c97f263b.js" as="script"><link rel="prefetch" href="/assets/index.html-7e5d2600.js" as="script"><link rel="prefetch" href="/assets/index.html-39c405a6.js" as="script"><link rel="prefetch" href="/assets/index.html-a2ad4ef2.js" as="script"><link rel="prefetch" href="/assets/index.html-4b0ae76e.js" as="script"><link rel="prefetch" href="/assets/index.html-8c654b39.js" as="script"><link rel="prefetch" href="/assets/index.html-29b75130.js" as="script"><link rel="prefetch" href="/assets/index.html-6780d1db.js" as="script"><link rel="prefetch" href="/assets/index.html-02b177ca.js" as="script"><link rel="prefetch" href="/assets/index.html-e4894269.js" as="script"><link rel="prefetch" href="/assets/index.html-c0921a25.js" as="script"><link rel="prefetch" href="/assets/index.html-9ea6c0fa.js" as="script"><link rel="prefetch" href="/assets/index.html-550cffdb.js" as="script"><link rel="prefetch" href="/assets/index.html-979781cd.js" as="script"><link rel="prefetch" href="/assets/index.html-aee65c44.js" as="script"><link rel="prefetch" href="/assets/index.html-3bec58f7.js" as="script"><link rel="prefetch" href="/assets/index.html-f068c700.js" as="script"><link rel="prefetch" href="/assets/index.html-d19c081d.js" as="script"><link rel="prefetch" href="/assets/index.html-1c6d667d.js" as="script"><link rel="prefetch" href="/assets/index.html-fb255393.js" as="script"><link rel="prefetch" href="/assets/index.html-57c4b095.js" as="script"><link rel="prefetch" href="/assets/index.html-5470c77c.js" as="script"><link rel="prefetch" href="/assets/index.html-6794144b.js" as="script"><link rel="prefetch" href="/assets/index.html-8d8dfba6.js" as="script"><link rel="prefetch" href="/assets/index.html-5527b664.js" as="script"><link rel="prefetch" href="/assets/index.html-db943792.js" as="script"><link rel="prefetch" href="/assets/index.html-4a7fced6.js" as="script"><link rel="prefetch" href="/assets/index.html-034bcffb.js" as="script"><link rel="prefetch" href="/assets/index.html-4046c6f6.js" as="script"><link rel="prefetch" href="/assets/index.html-6c00f740.js" as="script"><link rel="prefetch" href="/assets/index.html-5308fc7a.js" as="script"><link rel="prefetch" href="/assets/index.html-7276329b.js" as="script"><link rel="prefetch" href="/assets/index.html-af09e078.js" as="script"><link rel="prefetch" href="/assets/index.html-4689e7df.js" as="script"><link rel="prefetch" href="/assets/index.html-1b60c4ef.js" as="script"><link rel="prefetch" href="/assets/index.html-a7566623.js" as="script"><link rel="prefetch" href="/assets/index.html-b15f6681.js" as="script"><link rel="prefetch" href="/assets/index.html-a2a2df55.js" as="script"><link rel="prefetch" href="/assets/index.html-5497974c.js" as="script"><link rel="prefetch" href="/assets/index.html-cfe30bf3.js" as="script"><link rel="prefetch" href="/assets/index.html-73037594.js" as="script"><link rel="prefetch" href="/assets/index.html-bee6c8b9.js" as="script"><link rel="prefetch" href="/assets/index.html-340cfd28.js" as="script"><link rel="prefetch" href="/assets/index.html-6d428b2a.js" as="script"><link rel="prefetch" href="/assets/index.html-6c86eae8.js" as="script"><link rel="prefetch" href="/assets/index.html-0e290aa7.js" as="script"><link rel="prefetch" href="/assets/index.html-2c92448e.js" as="script"><link rel="prefetch" href="/assets/index.html-a37a68f5.js" as="script"><link rel="prefetch" href="/assets/index.html-2fc4a442.js" as="script"><link rel="prefetch" href="/assets/index.html-88cd249a.js" as="script"><link rel="prefetch" href="/assets/index.html-6b39a034.js" as="script"><link rel="prefetch" href="/assets/index.html-9a876cf1.js" as="script"><link rel="prefetch" href="/assets/index.html-0faf66b2.js" as="script"><link rel="prefetch" href="/assets/index.html-c9d39240.js" as="script"><link rel="prefetch" href="/assets/index.html-c0425c68.js" as="script"><link rel="prefetch" href="/assets/index.html-3595c9bb.js" as="script"><link rel="prefetch" href="/assets/index.html-58c6f6da.js" as="script"><link rel="prefetch" href="/assets/index.html-6a95079f.js" as="script"><link rel="prefetch" href="/assets/index.html-819d63f8.js" as="script"><link rel="prefetch" href="/assets/index.html-a6e9028b.js" as="script"><link rel="prefetch" href="/assets/index.html-563a71d7.js" as="script"><link rel="prefetch" href="/assets/index.html-d8739ba4.js" as="script"><link rel="prefetch" href="/assets/index.html-6fcb04d4.js" as="script"><link rel="prefetch" href="/assets/index.html-7767924d.js" as="script"><link rel="prefetch" href="/assets/index.html-9fadbcd8.js" as="script"><link rel="prefetch" href="/assets/index.html-b228f74f.js" as="script"><link rel="prefetch" href="/assets/index.html-5588452d.js" as="script"><link rel="prefetch" href="/assets/index.html-36a3290c.js" as="script"><link rel="prefetch" href="/assets/index.html-d8da9f7d.js" as="script"><link rel="prefetch" href="/assets/index.html-f19ff867.js" as="script"><link rel="prefetch" href="/assets/index.html-50c9282f.js" as="script"><link rel="prefetch" href="/assets/index.html-5771dc6d.js" as="script"><link rel="prefetch" href="/assets/index.html-62bccc25.js" as="script"><link rel="prefetch" href="/assets/index.html-861221c1.js" as="script"><link rel="prefetch" href="/assets/index.html-f9b1c9f0.js" as="script"><link rel="prefetch" href="/assets/index.html-cd1d979e.js" as="script"><link rel="prefetch" href="/assets/index.html-7b25fb42.js" as="script"><link rel="prefetch" href="/assets/index.html-f28d55d7.js" as="script"><link rel="prefetch" href="/assets/index.html-1a1eb916.js" as="script"><link rel="prefetch" href="/assets/index.html-9de9d8f6.js" as="script"><link rel="prefetch" href="/assets/index.html-7f60992b.js" as="script"><link rel="prefetch" href="/assets/index.html-df8340a8.js" as="script"><link rel="prefetch" href="/assets/index.html-b6783b87.js" as="script"><link rel="prefetch" href="/assets/index.html-6eb4c592.js" as="script"><link rel="prefetch" href="/assets/index.html-d9ed5881.js" as="script"><link rel="prefetch" href="/assets/index.html-596344ba.js" as="script"><link rel="prefetch" href="/assets/index.html-7caa8ba0.js" as="script"><link rel="prefetch" href="/assets/index.html-1ff2885e.js" as="script"><link rel="prefetch" href="/assets/index.html-571aa468.js" as="script"><link rel="prefetch" href="/assets/index.html-35f8c5f2.js" as="script"><link rel="prefetch" href="/assets/index.html-60057fe6.js" as="script"><link rel="prefetch" href="/assets/index.html-26ab8781.js" as="script"><link rel="prefetch" href="/assets/index.html-d83e2d15.js" as="script"><link rel="prefetch" href="/assets/index.html-0c9fe6c8.js" as="script"><link rel="prefetch" href="/assets/index.html-11c372b1.js" as="script"><link rel="prefetch" href="/assets/index.html-30081f5d.js" as="script"><link rel="prefetch" href="/assets/index.html-0b6549eb.js" as="script"><link rel="prefetch" href="/assets/index.html-7a9ebf6e.js" as="script"><link rel="prefetch" href="/assets/index.html-c861efc1.js" as="script"><link rel="prefetch" href="/assets/dash.all.min-76ffc349.js" as="script"><link rel="prefetch" href="/assets/mpegts-26b98fc2.js" as="script"><link rel="prefetch" href="/assets/hls.min-95bb3ba3.js" as="script"><link rel="prefetch" href="/assets/artplayer-85459a86.js" as="script"><link rel="prefetch" href="/assets/plyr.min-d2156373.js" as="script"><link rel="prefetch" href="/assets/browser-21db0a97.js" as="script"><link rel="prefetch" href="/assets/plyr.min-d2156373.js" as="script"><link rel="prefetch" href="/assets/auto-fe80bb03.js" as="script"><link rel="prefetch" href="/assets/index-2bf332f6.js" as="script"><link rel="prefetch" href="/assets/flowchart-c441f34d.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-84525218.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-c2644c10.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script"><link rel="prefetch" href="/assets/SearchResult-7cf40d1b.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/导航栏图标/logo1.png" alt="NgxuAnGMH"><!----><span class="vp-site-name hide-in-pad">NgxuAnGMH</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-home" style=""></span>Home<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="   代码能力   "><span class="title"><span class="font-icon icon iconfont icon-creative" style=""></span>   代码能力   </span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-alias" style=""></span> 1 - 数据结构算法<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Code/DataStructure/数据结构与算法之美/"><!---->数据结构与算法之美<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Code/DataStructure/快速上手CPP数据结构与算法/"><!---->快速上手C++<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Code/DataStructure/检索技术核心20讲/"><!---->检索技术核心20讲<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-relation" style=""></span> 2 - 经典设计模式<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Code/DesignPattern/深入设计模式/"><!---->深入设计模式<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Code/DesignPattern/设计模式之美/"><!---->设计模式之美<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-script" style=""></span> 3 - 面试考核题库<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Code/InterviewCheck/Java核心技术面试精选/"><!---->Java核心技术面试精选<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Code/InterviewCheck/后端技术面试38讲/"><!---->后端技术面试38讲<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="   通用基础   "><span class="title"><span class="font-icon icon iconfont icon-cycle" style=""></span>   通用基础   </span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-keyboard" style=""></span> 1 - 语言编程思想<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/ThinkIn/OnJava/"><!---->OnJava<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/ThinkIn/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"><!---->深入拆解Java虚拟机<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/ThinkIn/%E6%B7%B1%E5%85%A5C%E8%AF%AD%E8%A8%80%E5%92%8C%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86/"><!---->深入C语言和程序运行原理<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/ThinkIn/C语言程序设计/"><!---->C语言程序设计<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-android" style=""></span> 2 - 底层操作系统<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link active" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><!---->趣谈Linux操作系统<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/LinuxOS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%9845%E8%AE%B2/"><!---->操作系统实战45讲<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/LinuxOS/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%AE%9E%E6%88%98%E8%AF%BE/"><!---->计算机基础实战课<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/LinuxOS/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"><!---->深入浅出计算机组成原理<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/LinuxOS/编程高手必学的内存知识/"><!---->编程高手必学的内存知识<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-http" style=""></span> 3 - 网络通信协议<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/NetWork/趣谈网络协议/"><!---->趣谈网络协议<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/NetWork/网络排查案例课/"><!---->网络排查案例课<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Universal/NetWork/网络编程实战/"><!---->网络编程实战<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="   后端工程   "><span class="title"><span class="font-icon icon iconfont icon-customize" style=""></span>   后端工程   </span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-mysql" style=""></span> 1 - 数据库存储相关<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Backend/DataBase/MySQL实战45讲/"><!---->MySQL实战45讲<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Backend/DataBase/后端存储实战课/"><!---->后端存储实战课<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-repair" style=""></span> 2 - 应用层流行框架<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Backend/Framework/手把手带你写一个MiniSpring/"><!---->手把手带你写一个MiniSpring<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Backend/Framework/深入拆解TomcatJetty/"><!---->深入拆解Tomcat&amp;Jetty<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-nginx" style=""></span> 3 - 异步解耦中间件<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Backend/Middleware/RPC实战与核心原理/"><!---->RPC实战与核心原理<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Backend/Middleware/高并发系统设计40问/"><!---->高并发系统设计40问<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Backend/Middleware/中间件核心技术与实战/"><!---->中间件核心技术与实战<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="   了解前端   "><span class="title"><span class="font-icon icon iconfont icon-html" style=""></span>   了解前端   </span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-javascript" style=""></span> 1 - 上古基础三件套<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/00/项目A/"><!---->深入设计模式<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-react" style=""></span> 2 - 现行组件化方案<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/00/项目A/"><!---->深入设计模式<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-npm" style=""></span> 3 - 相关包管理工具<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/00/项目A/"><!---->深入设计模式<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="   一生一芯   "><span class="title"><span class="font-icon icon iconfont icon-process" style=""></span>   一生一芯   </span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-javascript" style=""></span> 1 - 官方讲义整理<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/00/项目A/"><!---->深入设计模式<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-react" style=""></span> 2 - 其他参考资料<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/00/项目A/"><!---->深入设计模式<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-npm" style=""></span> 3 - 解决困惑记录<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/00/项目A/"><!---->深入设计模式<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title"></span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">操作系统实战45讲</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">深入浅出计算机组成原理</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">计算机基础实战课</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">趣谈Linux操作系统</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><!---->趣谈Linux操作系统<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/E%EF%BC%9A%E3%80%8A%E5%BC%80%E7%AF%87%E5%AF%BC%E8%AF%BB%E3%80%8B.html"><!---->E：《开篇导读》<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/E00-%E5%BC%80%E7%AF%87%E8%AF%8D.html"><!---->E00-开篇词<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/E01-%E5%85%A5%E5%AD%A6%E6%B5%8B%E9%AA%8C.html"><!---->E01-入学测验<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/E02-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84.html"><!---->E02-学习路径<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/E03-%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html"><!---->E03-实用指南<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/E04-%E5%AD%A6%E4%B9%A0%E6%94%BB%E7%95%A5.html"><!---->E04-学习攻略<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/F%EF%BC%9A%E3%80%8ALinux%E7%BB%BC%E8%BF%B0%E3%80%8B.html"><!---->F：《Linux综述》<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/F03-%E7%90%86%E8%A7%A3%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html"><!---->F03-理解操作系统<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/F04-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html"><!---->F04-命令行快速上手<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/F05-%E7%90%86%E8%A7%A3%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8.html"><!---->F05-理解系统调用<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/F06-Linux%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0%E5%A4%A7%E5%85%A8.html"><!---->F06-Linux系统调用函数大全<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/F07-Linux%E5%A4%A7%E5%9E%8B%E5%85%AC%E5%8F%B8.html"><!---->F07-Linux大型公司<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/G%EF%BC%9A%E3%80%90%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%91.html"><!---->G：【系统初始化】<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/G05-%E7%A7%91%E6%99%AEBootLoader.html"><!---->G05-科普BootLoader<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/G06-x86CPU%E6%9E%B6%E6%9E%84%E8%A7%A3%E6%9E%90.html"><!---->G06-x86CPU架构解析<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/G07-%E4%BB%8EBIOS%E5%88%B0BootLoader.html"><!---->G07-从BIOS到BootLoader<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/G08-%E5%86%85%E6%A0%B8%E5%88%9D%E5%A7%8B%E5%8C%96.html"><!---->G08-内核初始化<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/G09-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8.html"><!---->G09-系统调用<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H%EF%BC%9A%E3%80%90%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E3%80%91.html"><!---->H：【进程管理系统】<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H10-%E8%BF%9B%E7%A8%8B.html"><!---->H10-进程<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H11-%E7%BA%BF%E7%A8%8B.html"><!---->H11-线程<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H12-%E8%BF%9B%E7%A8%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->H12-进程数据结构（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H13-%E8%BF%9B%E7%A8%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%AD%EF%BC%89.html"><!---->H13-进程数据结构（中）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H14-%E8%BF%9B%E7%A8%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->H14-进程数据结构（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H15-%E8%B0%83%E5%BA%A6%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->H15-调度（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H16-%E8%B0%83%E5%BA%A6%EF%BC%88%E4%B8%AD%EF%BC%89.html"><!---->H16-调度（中）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H17-%E8%B0%83%E5%BA%A6%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->H17-调度（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H18-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA.html"><!---->H18-进程的创建<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/H19-%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA.html"><!---->H19-线程的创建<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/I%EF%BC%9A%E3%80%90%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E3%80%91.html"><!---->I：【内存管理系统】<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/I20-%E8%BF%9B%E7%A8%8B%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E5%B8%83%E5%B1%80.html"><!---->I20-进程内存空间布局<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/I21-%E5%88%86%E6%AE%B5%E5%88%86%E9%A1%B5%E6%9C%BA%E5%88%B6%E6%AF%94%E5%AF%B9.html"><!---->I21-分段分页机制比对<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/I22-%E8%BF%9B%E7%A8%8B%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86.html"><!---->I22-进程空间管理<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/I23-%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->I23-物理内存管理（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/I24-%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->I24-物理内存管理（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/I25-%E7%94%A8%E6%88%B7%E6%80%81%E5%86%85%E5%AD%98%E6%98%A0%E5%B0%84.html"><!---->I25-用户态内存映射<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/I26-%E5%86%85%E6%A0%B8%E6%80%81%E5%86%85%E5%AD%98%E6%98%A0%E5%B0%84.html"><!---->I26-内核态内存映射<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/J%EF%BC%9A%E3%80%90%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E3%80%91.html"><!---->J：【文件管理系统】<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/J27-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html"><!---->J27-文件系统<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/J28-%E7%A1%AC%E7%9B%98%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html"><!---->J28-硬盘文件系统<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/J29-VFS%E8%99%9A%E6%8B%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html"><!---->J29-VFS虚拟文件系统<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/J30-%E6%96%87%E4%BB%B6%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6.html"><!---->J30-文件缓存机制<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/K%EF%BC%9A%E3%80%90IO%E7%B3%BB%E7%BB%9F%E4%B8%8E%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E3%80%91.html"><!---->K：【IO系统与设备管理】<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/K31-IO%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E6%B5%81%E7%A8%8B%E7%BB%93%E6%9E%84.html"><!---->K31-IO设备管理流程结构<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/K32-%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->K32-字符设备（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/K33-%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->K33-字符设备（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/K34-%E5%9D%97%E8%AE%BE%E5%A4%87%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->K34-块设备（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/K35-%E5%9D%97%E8%AE%BE%E5%A4%87%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->K35-块设备（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/L%EF%BC%9A%E3%80%90%E8%BF%9B%E7%A8%8B%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E3%80%91.html"><!---->L：【进程之间通信】<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/L36-%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1.html"><!---->L36-进程间通信<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/L37-%E4%BF%A1%E5%8F%B7%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->L37-信号（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/L38-%E4%BF%A1%E5%8F%B7%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->L38-信号（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/L39-%E7%AE%A1%E9%81%93.html"><!---->L39-管道<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/L40-IPC%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->L40-IPC（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/L41-IPC%EF%BC%88%E4%B8%AD%EF%BC%89.html"><!---->L41-IPC（中）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/L42-IPC%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->L42-IPC（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M%EF%BC%9A%E3%80%90%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E6%A0%88%E3%80%91.html"><!---->M：【网络通信协议栈】<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M00-%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3%E7%9A%84%E5%8A%A0%E9%A4%90%E9%A2%84%E4%B9%A0.html"><!---->M00-网络相关的加餐预习<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M43-Socket%E9%80%9A%E4%BF%A1.html"><!---->M43-Socket通信<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html"><!---->M44-Socket内核数据结构<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#解析-socket-函数"><!---->解析 socket 函数<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#_1-family-地址族【网络层】"><!---->1. family 地址族【网络层】<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#_2-type-类型【数据格式】"><!---->2. type 类型【数据格式】<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#_3-protocol-协议【传输层】"><!---->3. protocol 协议【传输层】<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#sock-stream-类型-ipproto-tcp-协议"><!---->SOCK_STREAM 类型 / IPPROTO_TCP 协议<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#函数具体细节和流程"><!---->函数具体细节和流程<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#_1-net-families-family"><!---->### 1. net_families[family]<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#创建socket系统调用"><!---->创建socket系统调用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#_2-inetsw-sock-type"><!---->### 2. inetsw[sock-&gt;type]<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#inetsw-array-定义"><!---->inetsw_array 定义<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#tcp-prot-定义"><!---->tcp_prot 定义<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#解析-bind-函数"><!---->解析 bind 函数<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#解析-listen-函数"><!---->解析 listen 函数<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#维护连接的数据结构"><!---->维护连接的数据结构<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#已建立连接的队列"><!---->已建立连接的队列<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#解析-accept-函数"><!---->解析 accept 函数<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#三次握手"><!---->三次握手<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#解析-connect-函数"><!---->解析 connect 函数<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#维护连接的数据结构-1"><!---->维护连接的数据结构<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#发送-syn-包"><!---->发送 SYN 包<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#网络包过程"><!---->网络包过程<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#服务端接收"><!---->服务端接收<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#总结时刻"><!---->总结时刻<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#课堂练习"><!---->课堂练习<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M44-Socket%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#课后讨论"><!---->课后讨论<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M45-%E5%8F%91%E9%80%81%E7%BD%91%E7%BB%9C%E5%8C%85%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->M45-发送网络包（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M46-%E5%8F%91%E9%80%81%E7%BD%91%E7%BB%9C%E5%8C%85%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->M46-发送网络包（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M47-%E6%8E%A5%E6%94%B6%E7%BD%91%E7%BB%9C%E5%8C%85%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->M47-接收网络包（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M48-%E6%8E%A5%E6%94%B6%E7%BD%91%E7%BB%9C%E5%8C%85%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->M48-接收网络包（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/N%EF%BC%9A%E3%80%90%E8%99%9A%E6%8B%9F%E5%8C%96%E7%9A%84%E6%8A%80%E6%9C%AF%E3%80%91.html"><!---->N：【虚拟化的技术】<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/N49-%E8%99%9A%E6%8B%9F%E6%9C%BA.html"><!---->N49-虚拟机<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/N50-%E8%99%9A%E6%8B%9FCPU%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->N50-虚拟CPU（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/N51-%E8%99%9A%E6%8B%9FCPU%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->N51-虚拟CPU（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/N52-%E5%86%85%E5%AD%98%E8%99%9A%E6%8B%9F%E5%8C%96.html"><!---->N52-内存虚拟化<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/N53-%E5%AD%98%E5%82%A8%E8%99%9A%E6%8B%9F%E5%8C%96%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->N53-存储虚拟化（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/N54-%E5%AD%98%E5%82%A8%E8%99%9A%E6%8B%9F%E5%8C%96%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->N54-存储虚拟化（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/N55-%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96.html"><!---->N55-网络虚拟化<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/O%EF%BC%9A%E3%80%90%E5%AE%B9%E5%99%A8%E5%8C%96%E7%9A%84%E6%8A%80%E6%9C%AF%E3%80%91.html"><!---->O：【容器化的技术】<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/O56-%E5%AE%B9%E5%99%A8.html"><!---->O56-容器<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/O57-Namespace%E6%8A%80%E6%9C%AF.html"><!---->O57-Namespace技术<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/O58-cgroup%E6%8A%80%E6%9C%AF.html"><!---->O58-cgroup技术<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/O59-%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html"><!---->O59-数据中心操作系统<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E2%88%9AP%EF%BC%9A%E3%80%8A%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E3%80%8B.html"><!---->P：《实验环境搭建》<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E2%88%9AP60-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%88%E4%B8%8A%EF%BC%89.html"><!---->P60-实验环境搭建（上）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E2%88%9AP61-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%88%E4%B8%8B%EF%BC%89.html"><!---->P61-实验环境搭建（下）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Q%EF%BC%9A%E3%80%8A%E5%8E%9F%E7%90%86%E7%9F%A5%E8%AF%86%E4%B8%B2%E8%AE%B2%E3%80%8B.html"><!---->Q：《原理知识串讲》<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Q62-%E7%9F%A5%E8%AF%86%E4%B8%B2%E8%AE%B2%EF%BC%88%E4%B8%80%EF%BC%89.html"><!---->Q62-知识串讲（一）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Q63-%E7%9F%A5%E8%AF%86%E4%B8%B2%E8%AE%B2%EF%BC%88%E4%BA%8C%EF%BC%89.html"><!---->Q63-知识串讲（二）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Q64-%E7%9F%A5%E8%AF%86%E4%B8%B2%E8%AE%B2%EF%BC%88%E4%B8%89%EF%BC%89.html"><!---->Q64-知识串讲（三）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Q65-%E7%9F%A5%E8%AF%86%E4%B8%B2%E8%AE%B2%EF%BC%88%E5%9B%9B%EF%BC%89.html"><!---->Q65-知识串讲（四）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Q66-%E7%9F%A5%E8%AF%86%E4%B8%B2%E8%AE%B2%EF%BC%88%E4%BA%94%EF%BC%89.html"><!---->Q66-知识串讲（五）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/R%EF%BC%9A%E3%80%8A%E7%BB%93%E6%9D%9F%E7%AD%94%E7%96%91%E4%B8%8E%E5%8A%A0%E9%A4%90%E3%80%8B.html"><!---->R：《结束答疑与加餐》<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/R67-%E7%BB%93%E6%9D%9F%E8%AF%AD.html"><!---->R67-结束语<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/R68-%E6%9C%9F%E6%9C%AB%E6%B5%8B%E8%AF%95.html"><!---->R68-期末测试<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->44 | Socket内核数据结构：如何成立特大项目合作部？</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">安东尼这次认真的</span></span><span property="author" content="安东尼这次认真的"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-04-27T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 27 分钟</span><meta property="timeRequired" content="PT27M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category6 clickable" role="navigation">Socket/Stream数据流TCP/Datagram数据报UDP/Raw原始数据包/直达链路</span><!--]--><meta property="articleSection" content="Socket/Stream数据流TCP/Datagram数据报UDP/Raw原始数据包/直达链路"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag1 clickable" role="navigation">Socket/数据结构/接口编程</span><!--]--><meta property="keywords" content="Socket/数据结构/接口编程"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#解析-socket-函数">解析 socket 函数</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-family-地址族【网络层】">1. family 地址族【网络层】</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_2-type-类型【数据格式】">2. type 类型【数据格式】</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_3-protocol-协议【传输层】">3. protocol 协议【传输层】</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#sock-stream-类型-ipproto-tcp-协议">SOCK_STREAM 类型 / IPPROTO_TCP 协议</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#函数具体细节和流程">函数具体细节和流程</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-net-families-family">### 1. net_families[family]</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#创建socket系统调用">创建socket系统调用</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_2-inetsw-sock-type">### 2. inetsw[sock-&gt;type]</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#inetsw-array-定义">inetsw_array 定义</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#tcp-prot-定义">tcp_prot 定义</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#解析-bind-函数">解析 bind 函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#解析-listen-函数">解析 listen 函数</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#维护连接的数据结构">维护连接的数据结构</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#已建立连接的队列">已建立连接的队列</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#解析-accept-函数">解析 accept 函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#三次握手">三次握手</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#解析-connect-函数">解析 connect 函数</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#维护连接的数据结构-1">维护连接的数据结构</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#发送-syn-包">发送 SYN 包</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#网络包过程">网络包过程</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#服务端接收">服务端接收</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#总结时刻">总结时刻</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#课堂练习">课堂练习</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#课后讨论">课后讨论</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="_44-socket内核数据结构-如何成立特大项目合作部" tabindex="-1"><a class="header-anchor" href="#_44-socket内核数据结构-如何成立特大项目合作部" aria-hidden="true">#</a> 44 | Socket内核数据结构：如何成立特大项目合作部？</h1><p>上一节我们讲了 Socket 在 TCP 和 UDP 场景下的调用流程。这一节，我们就沿着这个流程到内核里面一探究竟，看看在内核里面，都创建了哪些数据结构，做了哪些事情。</p><h2 id="解析-socket-函数" tabindex="-1"><a class="header-anchor" href="#解析-socket-函数" aria-hidden="true">#</a> <strong>解析 socket 函数</strong></h2><p>我们从 Socket 系统调用开始。这里面的代码比较容易看懂，</p><blockquote><p><mark>Socket 系统调用</mark>会 1. 调用 <code>sock_create</code> 创建一个 <code>struct socket</code> 结构，2. 然后通过 <code>sock_map_fd</code> 和 <code>文件描述符</code> 对应起来。</p><ol><li><code>sock_create</code>(family, type, protocol, &amp;sock)<br> 创建一个 <code>struct socket</code> 结构</li><li><code>sock_map_fd</code>(sock, flags &amp; (O_CLOEXEC | O_NONBLOCK))<br> 并和 <code>文件描述符</code> 对应起来</li></ol></blockquote><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token function">SYSCALL_DEFINE3</span><span class="token punctuation">(</span>socket<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> family<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> protocol<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">int</span> retval<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">;</span>
  <span class="token keyword">int</span> flags<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>SOCK_NONBLOCK <span class="token operator">!=</span> O_NONBLOCK <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> SOCK_NONBLOCK<span class="token punctuation">)</span><span class="token punctuation">)</span>
    flags <span class="token operator">=</span> <span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> <span class="token operator">~</span>SOCK_NONBLOCK<span class="token punctuation">)</span> <span class="token operator">|</span> O_NONBLOCK<span class="token punctuation">;</span>

  <span class="token comment">// 调用 `sock_create` 创建一个 `struct socket` 结构</span>
  retval <span class="token operator">=</span> <span class="token function">sock_create</span><span class="token punctuation">(</span>family<span class="token punctuation">,</span> type<span class="token punctuation">,</span> protocol<span class="token punctuation">,</span> <span class="token operator">&amp;</span>sock<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// 然后通过 `sock_map_fd` 和`文件描述符`对应起来。</span>
  retval <span class="token operator">=</span> <span class="token function">sock_map_fd</span><span class="token punctuation">(</span>sock<span class="token punctuation">,</span> flags <span class="token operator">&amp;</span> <span class="token punctuation">(</span>O_CLOEXEC <span class="token operator">|</span> O_NONBLOCK<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> retval<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在创建 Socket 的时候，有三个参数。</p><h3 id="_1-family-地址族【网络层】" tabindex="-1"><a class="header-anchor" href="#_1-family-地址族【网络层】" aria-hidden="true">#</a> 1. family 地址族【网络层】</h3><p>一个是 <strong><code>family</code></strong>，表示<code>地址族</code>。</p><ul><li>不是所有的 Socket 都要通过 IP 进行通信，还有其他的通信方式。</li><li>例如，下面的定义中，domain sockets 就是通过本地文件进行通信的，不需要 IP 地址。</li><li>只不过，通过 IP 地址只是最常用的模式，所以我们这里着重分析这种模式。</li></ul><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AF_UNIX</span> <span class="token expression"><span class="token number">1</span></span><span class="token comment">/* Unix domain sockets */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AF_INET</span> <span class="token expression"><span class="token number">2</span></span><span class="token comment">/* Internet IP Protocol */</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-type-类型【数据格式】" tabindex="-1"><a class="header-anchor" href="#_2-type-类型【数据格式】" aria-hidden="true">#</a> 2. type 类型【数据格式】</h3><p>第二个参数是 <strong>type</strong>，也即 <code>Socket 的类型</code>。类型是比较少的。</p><p>常用的 Socket 类型有三种，分别是 <code>SOCK_STREAM</code>、<code>SOCK_DGRAM</code> 和 <code>SOCK_RAW</code>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">enum</span> <span class="token class-name">sock_type</span> <span class="token punctuation">{</span>
SOCK_STREAM <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>	<span class="token comment">// 面向数据流</span>
SOCK_DGRAM <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>		<span class="token comment">// 面向数据报</span>
SOCK_RAW <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>		<span class="token comment">// 原始的 IP 包</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-protocol-协议【传输层】" tabindex="-1"><a class="header-anchor" href="#_3-protocol-协议【传输层】" aria-hidden="true">#</a> 3. protocol 协议【传输层】</h3><p>第三个参数是 <strong>protocol</strong>，是<code>协议</code>。协议数目是比较多的，也就是说，<mark><strong>多个协议</strong>会属于<strong>同一种类型</strong></mark>。</p><p>SOCK_STREAM 是面向数据流的，协议 <code>IPPROTO_TCP</code> 属于这种类型。SOCK_DGRAM 是面向数据报的，协议 <code>IPPROTO_UDP</code> 属于这种类型。如果在内核里面看的话，<code>IPPROTO_ICMP</code> 也属于这种类型。SOCK_RAW 是原始的 IP 包，<code>IPPROTO_IP</code> 属于这种类型。</p><h3 id="sock-stream-类型-ipproto-tcp-协议" tabindex="-1"><a class="header-anchor" href="#sock-stream-类型-ipproto-tcp-协议" aria-hidden="true">#</a> SOCK_STREAM 类型 / IPPROTO_TCP 协议</h3><p><strong>这一节，我们重点看 <code>SOCK_STREAM 类型</code>和 <code>IPPROTO_TCP 协议</code>。</strong></p><p>为了管理 family、type、protocol 这三个分类层次，<code>内核会创建对应的数据结构</code>。</p><h3 id="函数具体细节和流程" tabindex="-1"><a class="header-anchor" href="#函数具体细节和流程" aria-hidden="true">#</a> 函数具体细节和流程</h3><blockquote><p><code>sock_create</code>(family, type, protocol, &amp;sock)<br> 创建一个 <code>struct socket</code> 结构</p><p><code>sock_map_fd</code>(sock, flags &amp; (O_CLOEXEC | O_NONBLOCK))<br> 并和 <code>文件描述符</code> 对应起来</p></blockquote><p>接下来，我们打开 sock_create 函数看一下。</p><ol><li><p>它会调用 <code>__sock_create</code>。</p></li><li><p>这里先是分配了一个 <code>struct socket</code> 结构。</p></li></ol><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// 1. 它会调用 `__sock_create`。</span>
<span class="token keyword">int</span> <span class="token function">__sock_create</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">net</span> <span class="token operator">*</span>net<span class="token punctuation">,</span> <span class="token keyword">int</span> family<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">,</span> <span class="token keyword">int</span> protocol<span class="token punctuation">,</span>
       <span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span><span class="token operator">*</span>res<span class="token punctuation">,</span> <span class="token keyword">int</span> kern<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">int</span> err<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">;</span>					<span class="token comment">// struct socket</span>
  <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">net_proto_family</span> <span class="token operator">*</span>pf<span class="token punctuation">;</span>	<span class="token comment">// struct net_proto_family</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  sock <span class="token operator">=</span> <span class="token function">sock_alloc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2. 这里先是分配了一个 `struct socket` 结构。</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  sock<span class="token operator">-&gt;</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// 3. 接下来我们要用到 family 参数。这里有一个 `net_families` 数组，</span>
  pf <span class="token operator">=</span> <span class="token function">rcu_dereference</span><span class="token punctuation">(</span>net_families<span class="token punctuation">[</span>family<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 4. 我们可以以 family 参数为下标，找到对应的 `struct net_proto_family`。</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  err <span class="token operator">=</span> pf<span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span>net<span class="token punctuation">,</span> sock<span class="token punctuation">,</span> protocol<span class="token punctuation">,</span> kern<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 5. `struct net_proto_family`-&gt;creat()方法，创建socket系统调用</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token operator">*</span>res <span class="token operator">=</span> sock<span class="token punctuation">;</span> <span class="token comment">// End</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-net-families-family" tabindex="-1"><a class="header-anchor" href="#_1-net-families-family" aria-hidden="true">#</a> ### 1. net_families[family]</h3><ol start="3"><li>接下来我们要用到 <mark>1. family 参数</mark>。这里有一个 <code>net_families 数组</code>，</li><li>我们可以以 family 参数为下标，找到对应的 <code>struct net_proto_family 元素</code>。</li></ol><p><em>+++ A. 我们可以找到 <code>net_families 数组</code>的定义。</em></p><p><em>+++ B. 每一个地址族在这个数组里面都有一项，里面的内容是 <code>net_proto_family 元素</code>。</em></p><p><em>+++ C. 即每一种地址族都有自己的 net_proto_family 元素，</em></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// A. 我们可以找到 net_families 数组的定义。</span>
<span class="token comment">/* Supported address families. */</span>		<span class="token comment">// B. 每一个地址族在这个数组里面都有一项，里面的内容是 net_proto_family 元素。</span>
										<span class="token comment">// C. 即每一种地址族都有自己的 net_proto_family 元素，</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AF_UNSPEC</span>  <span class="token expression"><span class="token number">0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AF_UNIX</span>    <span class="token expression"><span class="token number">1</span>  </span><span class="token comment">/* Unix domain sockets     */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AF_LOCAL</span>  <span class="token expression"><span class="token number">1</span>  </span><span class="token comment">/* POSIX name for AF_UNIX  */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AF_INET</span>    <span class="token expression"><span class="token number">2</span>  </span><span class="token comment">/* Internet IP Protocol   */</span></span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AF_INET6</span>  <span class="token expression"><span class="token number">10</span>  </span><span class="token comment">/* IP version 6      */</span></span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AF_MPLS</span>    <span class="token expression"><span class="token number">28</span>  </span><span class="token comment">/* MPLS */</span></span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AF_MAX</span>    <span class="token expression"><span class="token number">44</span>  </span><span class="token comment">/* For now.. */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NPROTO</span>    <span class="token expression">AF_MAX</span></span>

<span class="token keyword">struct</span> <span class="token class-name">net_proto_family</span> __rcu <span class="token operator">*</span>net_families<span class="token punctuation">[</span>NPROTO<span class="token punctuation">]</span> __read_mostly<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>+++ D. <code>IP 地址族</code>的 net_proto_family 定义如下，里面最重要的就是，<code>create 函数指向 inet_create</code>。<strong>这个用于<mark>socket系统调用</mark>创建</strong></em></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// D. IP 地址族的 net_proto_family 定义如下，</span>
<span class="token comment">//net/ipv4/af_inet.c</span>
<span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">net_proto_family</span> inet_family_ops <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span>family <span class="token operator">=</span> PF_INET<span class="token punctuation">,</span>
  <span class="token comment">// create 函数指向 inet_create。</span>
  <span class="token punctuation">.</span>create <span class="token operator">=</span> inet_create<span class="token punctuation">,</span>	<span class="token comment">//这个用于==socket系统调用==创建</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建socket系统调用" tabindex="-1"><a class="header-anchor" href="#创建socket系统调用" aria-hidden="true">#</a> 创建socket系统调用</h3><ol start="5"><li>**struct net_proto_family<code>-&gt;creat()</code>**方法，创建socket系统调用</li></ol><p>我们回到函数 __sock_create。接下来，在这里面，这个 <code>inet_create</code> 会被调用。</p><p>一 | 在 inet_create 中，我们先会看到一个循环 <code>list_for_each_entry_rcu</code>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// 5. **struct net_proto_family`-&gt;creat()`**方法，创建socket系统调用</span>
<span class="token comment">// 这个 `inet_create` 会被调用。</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">inet_create</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">net</span> <span class="token operator">*</span>net<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">,</span> <span class="token keyword">int</span> protocol<span class="token punctuation">,</span> <span class="token keyword">int</span> kern<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">;</span>				<span class="token comment">// 而非上层的 socket *sock</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_protosw</span> <span class="token operator">*</span>answer<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_sock</span> <span class="token operator">*</span>inet<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">proto</span> <span class="token operator">*</span>answer_prot<span class="token punctuation">;</span>
  <span class="token keyword">unsigned</span> <span class="token keyword">char</span> answer_flags<span class="token punctuation">;</span>
  <span class="token keyword">int</span> try_loading_module <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> err<span class="token punctuation">;</span>

  <span class="token comment">/* Look for the requested type/protocol pair. */</span>
lookup_protocol<span class="token operator">:</span>
  <span class="token comment">// 一 | 在 inet_create 中，我们先会看到一个循环 list_for_each_entry_rcu。</span>
  <span class="token function">list_for_each_entry_rcu</span><span class="token punctuation">(</span>answer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>inetsw<span class="token punctuation">[</span>sock<span class="token operator">-&gt;</span>type<span class="token punctuation">]</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 二 | 在这里，第二个 ==2. type 参数==开始起作用。因为循环查看的是 inetsw[sock-&gt;type]。</span>
    <span class="token comment">// (1)这是在 `inetsw 数组`中，根据 type 找到`属于这个类型的列表`，</span>
      
    err <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      
    <span class="token comment">// (2)然后依次比较列表中的 `struct inet_protosw` 的 protocol 是不是用户指定的 protocol；</span>
    <span class="token comment">/* Check the non-wild match. */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>protocol <span class="token operator">==</span> answer<span class="token operator">-&gt;</span>protocol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>protocol <span class="token operator">!=</span> IPPROTO_IP<span class="token punctuation">)</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">/* Check for the two wild cases. */</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>IPPROTO_IP <span class="token operator">==</span> protocol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        protocol <span class="token operator">=</span> answer<span class="token operator">-&gt;</span>protocol<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>IPPROTO_IP <span class="token operator">==</span> answer<span class="token operator">-&gt;</span>protocol<span class="token punctuation">)</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// (3)如果是，就得到了符合用户指定的 family-&gt;type-&gt;protocol 的 `struct inet_protosw *answer 对象`。</span>
      
    err <span class="token operator">=</span> <span class="token operator">-</span>EPROTONOSUPPORT<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// (4)接下来，struct socket *sock 的 ops 成员变量，被赋值为 answer 的 ops。</span>
  <span class="token comment">// (5)对于 `TCP` 来讲，就是 inet_stream_ops。后面任何用户对于这个 socket 的操作，都是通过 `inet_stream_ops` 进行的。</span>
  sock<span class="token operator">-&gt;</span>ops <span class="token operator">=</span> answer<span class="token operator">-&gt;</span>ops<span class="token punctuation">;</span>
  answer_prot <span class="token operator">=</span> answer<span class="token operator">-&gt;</span>prot<span class="token punctuation">;</span>
  answer_flags <span class="token operator">=</span> answer<span class="token operator">-&gt;</span>flags<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// (6)接下来，我们创建一个 struct sock *sk 对象。</span>
    	<span class="token comment">// ==socket== 是用于负责对上给用户提供接口，并且和文件系统关联。</span>
    	<span class="token comment">// 而 ==sock==，负责向下对接内核网络协议栈。</span>
  sk <span class="token operator">=</span> <span class="token function">sk_alloc</span><span class="token punctuation">(</span>net<span class="token punctuation">,</span> PF_INET<span class="token punctuation">,</span> GFP_KERNEL<span class="token punctuation">,</span> answer_prot<span class="token punctuation">,</span> kern<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// (7)在 sk_alloc 函数中，struct inet_protosw *answer 结构的 tcp_prot 赋值给了 struct sock *sk 的 sk_prot 成员。</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// (8)接下来创建一个 struct inet_sock 结构，</span>
  	  <span class="token comment">// 这个结构一开始就是 struct sock，然后扩展了一些其他的信息，剩下的代码就填充这些信息。</span>
  inet <span class="token operator">=</span> <span class="token function">inet_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  inet<span class="token operator">-&gt;</span>nodefrag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>SOCK_RAW <span class="token operator">==</span> sock<span class="token operator">-&gt;</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    inet<span class="token operator">-&gt;</span>inet_num <span class="token operator">=</span> protocol<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>IPPROTO_RAW <span class="token operator">==</span> protocol<span class="token punctuation">)</span>
      inet<span class="token operator">-&gt;</span>hdrincl <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  inet<span class="token operator">-&gt;</span>inet_id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token function">sock_init_data</span><span class="token punctuation">(</span>sock<span class="token punctuation">,</span> sk<span class="token punctuation">)</span><span class="token punctuation">;</span>

  sk<span class="token operator">-&gt;</span>sk_destruct     <span class="token operator">=</span> inet_sock_destruct<span class="token punctuation">;</span>
  sk<span class="token operator">-&gt;</span>sk_protocol     <span class="token operator">=</span> protocol<span class="token punctuation">;</span>
  sk<span class="token operator">-&gt;</span>sk_backlog_rcv <span class="token operator">=</span> sk<span class="token operator">-&gt;</span>sk_prot<span class="token operator">-&gt;</span>backlog_rcv<span class="token punctuation">;</span>

  inet<span class="token operator">-&gt;</span>uc_ttl  <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  inet<span class="token operator">-&gt;</span>mc_loop  <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  inet<span class="token operator">-&gt;</span>mc_ttl  <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  inet<span class="token operator">-&gt;</span>mc_all  <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  inet<span class="token operator">-&gt;</span>mc_index  <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  inet<span class="token operator">-&gt;</span>mc_list  <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
  inet<span class="token operator">-&gt;</span>rcv_tos  <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>inet<span class="token operator">-&gt;</span>inet_num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    inet<span class="token operator">-&gt;</span>inet_sport <span class="token operator">=</span> <span class="token function">htons</span><span class="token punctuation">(</span>inet<span class="token operator">-&gt;</span>inet_num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* Add to protocol hash chains. */</span>
    err <span class="token operator">=</span> sk<span class="token operator">-&gt;</span>sk_prot<span class="token operator">-&gt;</span><span class="token function">hash</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>sk<span class="token operator">-&gt;</span>sk_prot<span class="token operator">-&gt;</span>init<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    err <span class="token operator">=</span> sk<span class="token operator">-&gt;</span>sk_prot<span class="token operator">-&gt;</span><span class="token function">init</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token comment">// (9)这一幕我们会经常看到，将一个结构放在另一个结构的开始位置，然后扩展一些成员，通过对于指针的强制类型转换，来访问这些成员。</span>
    <span class="token comment">// socket 的创建至此结束。</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-inetsw-sock-type" tabindex="-1"><a class="header-anchor" href="#_2-inetsw-sock-type" aria-hidden="true">#</a> ### 2. inetsw[sock-&gt;type]</h3><p>二 | 在这里，第二个 <mark>2. type 参数</mark>开始起作用。因为循环查看的是 <code>inetsw[sock-&gt;type] 数组</code>。</p><p>+++ A. 这里的 <code>inetsw</code> 也是一个数组，<code>type</code> 作为下标，里面的内容是 <code>struct inet_protosw，是协议</code>，</p><p>+++ B. 也即 <code>inetsw 数组</code>对于<code>每个类型</code>有一项，<code>这一项</code>里面是<code>属于这个类型的协议</code>。</p><p><mark><strong>多个协议</strong>会属于<strong>同一种类型</strong></mark>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// A. 这里的 inetsw 也是一个数组，type 作为下标，里面的内容是 `struct inet_protosw，是协议`，</span>
<span class="token comment">// B. 也即 `inetsw 数组`对于`每个类型`有一项，`这一项`里面是`属于这个类型的协议`。</span>
<span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">list_head</span> inetsw<span class="token punctuation">[</span>SOCK_MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// C. inetsw 数组 是在系统初始化的时候初始化的，就像下面代码里面实现的一样。</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> __init <span class="token function">inet_init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">/* Register the socket-side information for inet_create. */</span>
  <span class="token comment">// D. 首先，一个循环会将 inetsw 数组的 `每一项` ，都初始化为 `一个链表` 。</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token operator">&amp;</span>inetsw<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> <span class="token operator">&amp;</span>inetsw<span class="token punctuation">[</span>SOCK_MAX<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">++</span>r<span class="token punctuation">)</span>
    <span class="token function">INIT_LIST_HEAD</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// E. 咱们前面说了，`一个 type 类型会包含多个 protocol`，因而我们需要一个链表。</span>
  <span class="token comment">// F. 接下来一个循环，是将 `inetsw_array` 注册到 `inetsw 数组`里面去。</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>q <span class="token operator">=</span> inetsw_array<span class="token punctuation">;</span> q <span class="token operator">&lt;</span> <span class="token operator">&amp;</span>inetsw_array<span class="token punctuation">[</span>INETSW_ARRAY_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">++</span>q<span class="token punctuation">)</span>
    <span class="token function">inet_register_protosw</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>+++ C. <code>inetsw 数组</code>是在<code>系统初始化</code>的时候初始化的，就像下面代码里面实现的一样。</p><p>+++ D. 首先，一个循环会将 inetsw 数组的<code>每一项</code>，都初始化为<code>一个链表</code>。</p><p>+++ E. 咱们前面说了，<code>一个 type 类型会包含多个 protocol</code>，因而我们需要一个链表。</p><p>+++ F. 接下来一个循环，是将 <code>inetsw_array</code> 注册到 <code>inetsw 数组</code>里面去。</p><h3 id="inetsw-array-定义" tabindex="-1"><a class="header-anchor" href="#inetsw-array-定义" aria-hidden="true">#</a> inetsw_array 定义</h3><p><code>inetsw_array</code> 的定义如下，这个数组里面的内容很重要，后面会用到它们。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">inet_protosw</span> inetsw_array<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span>
<span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    <span class="token punctuation">.</span>type <span class="token operator">=</span>       SOCK_STREAM<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>protocol <span class="token operator">=</span>   IPPROTO_TCP<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>prot <span class="token operator">=</span>       <span class="token operator">&amp;</span>tcp_prot<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>ops <span class="token operator">=</span>        <span class="token operator">&amp;</span>inet_stream_ops<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>flags <span class="token operator">=</span>      INET_PROTOSW_PERMANENT <span class="token operator">|</span>
            INET_PROTOSW_ICSK<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token punctuation">.</span>type <span class="token operator">=</span>       SOCK_DGRAM<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>protocol <span class="token operator">=</span>   IPPROTO_UDP<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>prot <span class="token operator">=</span>       <span class="token operator">&amp;</span>udp_prot<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>ops <span class="token operator">=</span>        <span class="token operator">&amp;</span>inet_dgram_ops<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>flags <span class="token operator">=</span>      INET_PROTOSW_PERMANENT<span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">{</span>
    <span class="token punctuation">.</span>type <span class="token operator">=</span>       SOCK_DGRAM<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>protocol <span class="token operator">=</span>   IPPROTO_ICMP<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>prot <span class="token operator">=</span>       <span class="token operator">&amp;</span>ping_prot<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>ops <span class="token operator">=</span>        <span class="token operator">&amp;</span>inet_sockraw_ops<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>flags <span class="token operator">=</span>      INET_PROTOSW_REUSE<span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">{</span>
        <span class="token punctuation">.</span>type <span class="token operator">=</span>       SOCK_RAW<span class="token punctuation">,</span>
      <span class="token punctuation">.</span>protocol <span class="token operator">=</span>   IPPROTO_IP<span class="token punctuation">,</span>  <span class="token comment">/* wild card */</span>
      <span class="token punctuation">.</span>prot <span class="token operator">=</span>       <span class="token operator">&amp;</span>raw_prot<span class="token punctuation">,</span>
      <span class="token punctuation">.</span>ops <span class="token operator">=</span>        <span class="token operator">&amp;</span>inet_sockraw_ops<span class="token punctuation">,</span>
      <span class="token punctuation">.</span>flags <span class="token operator">=</span>      INET_PROTOSW_REUSE<span class="token punctuation">,</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><mark><strong>我们回到 inet_create 的 list_for_each_entry_rcu 循环中。到这里就好理解了，</strong></mark></p><p>(1)这是在 <code>inetsw 数组</code>中，根据 type 找到<code>属于这个类型的列表</code>，</p><p>(2)然后依次比较列表中的 <code>struct inet_protosw</code> 的 protocol 是不是用户指定的 protocol；</p><p>(3)如果是，就得到了符合用户指定的 family-&gt;type-&gt;protocol 的 <code>struct inet_protosw *answer 对象</code>。</p><p>(4)接下来，struct socket *sock 的 <code>ops 成员变量</code>，被赋值为 answer 的 ops。</p><p>(5)对于 <code>TCP</code> 来讲，就是 inet_stream_ops。后面任何用户对于这个 socket 的操作，都是通过 <code>inet_stream_ops</code> 进行的。</p><p>(6)接下来，我们创建一个 <code>struct sock *sk 对象</code>。这里比较让人困惑。socket 和 sock 看起来几乎一样，容易让人混淆，这里需要说明一下，</p><ul><li><mark>socket</mark> 是用于负责<strong>对上给用户提供接口，并且和文件系统关联</strong>。</li><li>而 <mark>sock</mark>，负责<strong>向下对接内核网络协议栈</strong>。</li></ul><p>(7)在 sk_alloc 函数中，struct inet_protosw *answer 结构的 <code>tcp_prot</code> 赋值给了 struct sock *sk 的 <code>sk_prot</code> 成员。</p><h3 id="tcp-prot-定义" tabindex="-1"><a class="header-anchor" href="#tcp-prot-定义" aria-hidden="true">#</a> tcp_prot 定义</h3><p>tcp_prot 的定义如下，里面定义了很多的函数，都是 sock 之下内核协议栈的动作。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">proto</span> tcp_prot <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span>name      <span class="token operator">=</span> <span class="token string">&quot;TCP&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span>owner      <span class="token operator">=</span> THIS_MODULE<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>close      <span class="token operator">=</span> tcp_close<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>connect    <span class="token operator">=</span> tcp_v4_connect<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>disconnect    <span class="token operator">=</span> tcp_disconnect<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>accept      <span class="token operator">=</span> inet_csk_accept<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>ioctl      <span class="token operator">=</span> tcp_ioctl<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>init      <span class="token operator">=</span> tcp_v4_init_sock<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>destroy    <span class="token operator">=</span> tcp_v4_destroy_sock<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>shutdown    <span class="token operator">=</span> tcp_shutdown<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>setsockopt    <span class="token operator">=</span> tcp_setsockopt<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>getsockopt    <span class="token operator">=</span> tcp_getsockopt<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>keepalive    <span class="token operator">=</span> tcp_set_keepalive<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>recvmsg    <span class="token operator">=</span> tcp_recvmsg<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>sendmsg    <span class="token operator">=</span> tcp_sendmsg<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>sendpage    <span class="token operator">=</span> tcp_sendpage<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>backlog_rcv    <span class="token operator">=</span> tcp_v4_do_rcv<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>release_cb    <span class="token operator">=</span> tcp_release_cb<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>hash      <span class="token operator">=</span> inet_hash<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>get_port    <span class="token operator">=</span> inet_csk_get_port<span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><mark><strong>在 inet_create 函数中，</strong></mark></p><p>(8)接下来创建一个 <code>struct inet_sock</code> 结构，这个结构一开始就是 struct sock，然后扩展了一些其他的信息，剩下的代码就填充这些信息。</p><p>(9)这一幕我们会经常看到，将一个结构放在另一个结构的开始位置，然后扩展一些成员，通过对于指针的强制类型转换，来访问这些成员。在 inet_create 函数中，接下来创建一个 struct inet_sock 结构，这个结构一开始就是 struct sock，然后扩展了一些其他的信息，剩下的代码就填充这些信息。这一幕我们会经常看到，将一个结构放在另一个结构的开始位置，然后扩展一些成员，通过对于指针的强制类型转换，来访问这些成员。</p><p>socket 的创建至此结束。</p><h2 id="解析-bind-函数" tabindex="-1"><a class="header-anchor" href="#解析-bind-函数" aria-hidden="true">#</a> <strong>解析 bind 函数</strong></h2><p>接下来，我们来看 bind。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token function">SYSCALL_DEFINE3</span><span class="token punctuation">(</span>bind<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> __user <span class="token operator">*</span><span class="token punctuation">,</span> umyaddr<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> addrlen<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">sockaddr_storage</span> address<span class="token punctuation">;</span>
  <span class="token keyword">int</span> err<span class="token punctuation">,</span> fput_needed<span class="token punctuation">;</span>

  <span class="token comment">// (1) 在 bind 中，`sockfd_lookup_light` 会根据 `fd 文件描述符`，找到 `struct socket 结构`。</span>
  sock <span class="token operator">=</span> <span class="token function">sockfd_lookup_light</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token operator">&amp;</span>err<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fput_needed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// (2) 然后将 sockaddr 从 用户态 拷贝到 内核态，</span>
    err <span class="token operator">=</span> <span class="token function">move_addr_to_kernel</span><span class="token punctuation">(</span>umyaddr<span class="token punctuation">,</span> addrlen<span class="token punctuation">,</span> <span class="token operator">&amp;</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// (3) 然后调用 struct socket 结构里面 `ops 的 bind 函数`。</span>
      err <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>ops<span class="token operator">-&gt;</span><span class="token function">bind</span><span class="token punctuation">(</span>sock<span class="token punctuation">,</span>
                  <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> <span class="token operator">*</span><span class="token punctuation">)</span>
                  <span class="token operator">&amp;</span>address<span class="token punctuation">,</span> addrlen<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// (4) 根据前面创建 socket 的时候的设定，调用的是 `inet_stream_ops 的 bind 函数`，也即调用 `inet_bind`。</span>
    <span class="token punctuation">}</span>
    <span class="token function">fput_light</span><span class="token punctuation">(</span>sock<span class="token operator">-&gt;</span>file<span class="token punctuation">,</span> fput_needed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(1) 在 bind 中，<code>sockfd_lookup_light</code> 会根据 <code>fd 文件描述符</code>，找到 <code>struct socket 结构</code>。</p><p>(2) 然后将 sockaddr 从<code>用户态</code>拷贝到<code>内核态</code>，</p><p>(3) 然后调用 struct socket 结构里面 <code>ops 的 bind 函数</code>。</p><p>(4) 根据前面创建 socket 的时候的设定，调用的是 <code>inet_stream_ops 的 bind 函数</code>，也即调用 <code>inet_bind</code>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">inet_bind</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> <span class="token operator">*</span>uaddr<span class="token punctuation">,</span> <span class="token keyword">int</span> addr_len<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">sockaddr_in</span> <span class="token operator">*</span>addr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sockaddr_in</span> <span class="token operator">*</span><span class="token punctuation">)</span>uaddr<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>sk<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_sock</span> <span class="token operator">*</span>inet <span class="token operator">=</span> <span class="token function">inet_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">net</span> <span class="token operator">*</span>net <span class="token operator">=</span> <span class="token function">sock_net</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">unsigned</span> <span class="token keyword">short</span> snum<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  snum <span class="token operator">=</span> <span class="token function">ntohs</span><span class="token punctuation">(</span>addr<span class="token operator">-&gt;</span>sin_port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  inet<span class="token operator">-&gt;</span>inet_rcv_saddr <span class="token operator">=</span> inet<span class="token operator">-&gt;</span>inet_saddr <span class="token operator">=</span> addr<span class="token operator">-&gt;</span>sin_addr<span class="token punctuation">.</span>s_addr<span class="token punctuation">;</span>
  <span class="token comment">/* Make sure we are allowed to bind here. */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>snum <span class="token operator">||</span> <span class="token operator">!</span>inet<span class="token operator">-&gt;</span>bind_address_no_port<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      <span class="token comment">// (5) bind 里面会调用 `sk_prot 的 get_port 函数`，也即 `inet_csk_get_port` 来检查端口是否冲突，是否可以绑定。</span>
      sk<span class="token operator">-&gt;</span>sk_prot<span class="token operator">-&gt;</span><span class="token function">get_port</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> snum<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// (6) 如果允许，则会设置 struct inet_sock 的 本方的地址 inet_saddr 和 本方的端口 inet_sport</span>
  inet<span class="token operator">-&gt;</span>inet_sport <span class="token operator">=</span> <span class="token function">htons</span><span class="token punctuation">(</span>inet<span class="token operator">-&gt;</span>inet_num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// (7) `对方的地址 inet_daddr` 和`对方的端口 inet_dport` 都初始化为 0。</span>
  inet<span class="token operator">-&gt;</span>inet_daddr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  inet<span class="token operator">-&gt;</span>inet_dport <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token function">sk_dst_reset</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(5) bind 里面会调用 <code>sk_prot 的 get_port 函数</code>，也即 <code>inet_csk_get_port</code> 来检查端口是否冲突，是否可以绑定。</p><p>(6) 如果允许，则会设置 struct inet_sock 的<code>本方的地址 inet_saddr</code> 和<code>本方的端口 inet_sport</code>，</p><p>(7) <code>对方的地址 inet_daddr</code> 和<code>对方的端口 inet_dport</code> 都初始化为 0。</p><p>bind 的逻辑相对比较简单，就到这里了。</p><h2 id="解析-listen-函数" tabindex="-1"><a class="header-anchor" href="#解析-listen-函数" aria-hidden="true">#</a> <strong>解析 listen 函数</strong></h2><p>接下来我们来看 listen。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token function">SYSCALL_DEFINE2</span><span class="token punctuation">(</span>listen<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> fd<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> backlog<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">;</span>
  <span class="token keyword">int</span> err<span class="token punctuation">,</span> fput_needed<span class="token punctuation">;</span>
  <span class="token keyword">int</span> somaxconn<span class="token punctuation">;</span>

  <span class="token comment">// (1) 在 listen 中，我们还是通过 `sockfd_lookup_light`，根据 `fd 文件描述符`，找到 `struct socket 结构`。</span>
  sock <span class="token operator">=</span> <span class="token function">sockfd_lookup_light</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token operator">&amp;</span>err<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fput_needed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    somaxconn <span class="token operator">=</span> <span class="token function">sock_net</span><span class="token punctuation">(</span>sock<span class="token operator">-&gt;</span>sk<span class="token punctuation">)</span><span class="token operator">-&gt;</span>core<span class="token punctuation">.</span>sysctl_somaxconn<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>backlog <span class="token operator">&gt;</span> somaxconn<span class="token punctuation">)</span>
      backlog <span class="token operator">=</span> somaxconn<span class="token punctuation">;</span>
    <span class="token comment">// (2) 接着，我们调用 struct socket 结构里面 `ops 的 listen 函数`。</span>
    err <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>ops<span class="token operator">-&gt;</span><span class="token function">listen</span><span class="token punctuation">(</span>sock<span class="token punctuation">,</span> backlog<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token comment">// (3) 根据前面创建 socket 的时候的设定，调用的是 inet_stream_ops 的 listen 函数，也即调用 inet_listen。</span>
    <span class="token function">fput_light</span><span class="token punctuation">(</span>sock<span class="token operator">-&gt;</span>file<span class="token punctuation">,</span> fput_needed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(1) 在 listen 中，我们还是通过 <code>sockfd_lookup_light</code>，根据 <code>fd 文件描述符</code>，找到 <code>struct socket 结构</code>。</p><p>(2) 接着，我们调用 struct socket 结构里面 <code>ops 的 listen 函数</code>。</p><p>(3) 根据前面创建 socket 的时候的设定，调用的是 <code>inet_stream_ops 的 listen 函数</code>，也即调用 <code>inet_listen</code>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">inet_listen</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">,</span> <span class="token keyword">int</span> backlog<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>sk<span class="token punctuation">;</span>
  <span class="token keyword">unsigned</span> <span class="token keyword">char</span> old_state<span class="token punctuation">;</span>
  <span class="token keyword">int</span> err<span class="token punctuation">;</span>
  old_state <span class="token operator">=</span> sk<span class="token operator">-&gt;</span>sk_state<span class="token punctuation">;</span>
  <span class="token comment">/* Really, if the socket is already in listen state
   * we can only allow the backlog to be adjusted.
   */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>old_state <span class="token operator">!=</span> TCP_LISTEN<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// (4) 如果这个 socket 还不在 TCP_LISTEN 状态，会调用 `inet_csk_listen_start` 进入`监听状态`。</span>
    err <span class="token operator">=</span> <span class="token function">inet_csk_listen_start</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> backlog<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  sk<span class="token operator">-&gt;</span>sk_max_ack_backlog <span class="token operator">=</span> backlog<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(4) 如果这个 socket 还不在 TCP_LISTEN 状态，会调用 <code>inet_csk_listen_start</code> 进入<code>监听状态</code>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">inet_csk_listen_start</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">,</span> <span class="token keyword">int</span> backlog<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_connection_sock</span> <span class="token operator">*</span>icsk <span class="token operator">=</span> <span class="token function">inet_csk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 维护连接的数据结构</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_sock</span> <span class="token operator">*</span>inet <span class="token operator">=</span> <span class="token function">inet_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> err <span class="token operator">=</span> <span class="token operator">-</span>EADDRINUSE<span class="token punctuation">;</span>
							<span class="token comment">// 已建立连接的队列</span>
  <span class="token function">reqsk_queue_alloc</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>icsk<span class="token operator">-&gt;</span>icsk_accept_queue<span class="token punctuation">)</span><span class="token punctuation">;</span>

  sk<span class="token operator">-&gt;</span>sk_max_ack_backlog <span class="token operator">=</span> backlog<span class="token punctuation">;</span>
  sk<span class="token operator">-&gt;</span>sk_ack_backlog <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token function">inet_csk_delack_init</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 初始化完之后，将 TCP 的状态设置为 TCP_LISTEN，</span>
  <span class="token function">sk_state_store</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> TCP_LISTEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sk<span class="token operator">-&gt;</span>sk_prot<span class="token operator">-&gt;</span><span class="token function">get_port</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> inet<span class="token operator">-&gt;</span>inet_num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      	<span class="token comment">// 再次调用 get_port 判断端口是否冲突。</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="维护连接的数据结构" tabindex="-1"><a class="header-anchor" href="#维护连接的数据结构" aria-hidden="true">#</a> 维护连接的数据结构</h3><p>这里面建立了<code>一个新的结构 inet_connection_sock</code>，这个结构一开始是 <code>struct inet_sock</code>，inet_csk 其实做了一次强制类型转换，扩大了结构，看到了吧，又是这个套路。</p><p>struct inet_connection_sock 结构比较复杂。<code>如果打开它</code>，你能看到<code>处于各种状态的队列，各种超时时间、拥塞控制等</code>字眼。我们说 TCP 是面向连接的，就是客户端和服务端都是<code>有一个结构</code>用来<code>维护连接的状态</code>，就是指这个结构。我们这里先不详细分析里面的变量，因为太多了，后面我们遇到一个分析一个。</p><h3 id="已建立连接的队列" tabindex="-1"><a class="header-anchor" href="#已建立连接的队列" aria-hidden="true">#</a> 已建立连接的队列</h3><p>首先，我们遇到的是 <code>icsk_accept_queue</code>。它是干什么的呢？</p><p>在 TCP 的状态里面，有一个 listen 状态，当调用 listen 函数之后，就会进入这个状态，虽然我们写程序的时候，一般要等待服务端调用 accept 后，等待在哪里的时候，让客户端就发起连接。其实服务端一旦处于 listen 状态，不用 accept，客户端也能发起连接。</p><p>其实 TCP 的状态中，没有一个表示是否被 accept 的状态，那 accept 函数的作用是什么呢？</p><p>在内核中，为每个 Socket 维护两个队列。</p><ol><li>一个是已经建立了连接的队列，这时候连接三次握手已经完毕，处于 <code>established 状态</code>；</li><li>一个是还没有完全建立连接的队列，这个时候三次握手还没完成，处于 <code>syn_rcvd 的状态</code>。</li></ol><p>服务端调用 <code>accept 函数</code>，其实是在第一个队列中拿出一个已经完成的连接进行处理。如果还没有完成就阻塞等待。这里的 icsk_accept_queue 就是第一个队列。</p><p>初始化完之后，将 TCP 的状态设置为 TCP_LISTEN，再次调用 <code>get_port</code> 判断端口是否冲突。</p><p>至此，listen 的逻辑就结束了。</p><h2 id="解析-accept-函数" tabindex="-1"><a class="header-anchor" href="#解析-accept-函数" aria-hidden="true">#</a> <strong>解析 accept 函数</strong></h2><p>接下来，我们解析服务端调用 accept。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token function">SYSCALL_DEFINE3</span><span class="token punctuation">(</span>accept<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> __user <span class="token operator">*</span><span class="token punctuation">,</span> upeer_sockaddr<span class="token punctuation">,</span>
    <span class="token keyword">int</span> __user <span class="token operator">*</span><span class="token punctuation">,</span> upeer_addrlen<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">sys_accept4</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> upeer_sockaddr<span class="token punctuation">,</span> upeer_addrlen<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">SYSCALL_DEFINE4</span><span class="token punctuation">(</span>accept4<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> __user <span class="token operator">*</span><span class="token punctuation">,</span> upeer_sockaddr<span class="token punctuation">,</span>
    <span class="token keyword">int</span> __user <span class="token operator">*</span><span class="token punctuation">,</span> upeer_addrlen<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> flags<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">,</span> <span class="token operator">*</span>newsock<span class="token punctuation">;</span>	<span class="token comment">// 监听 socket / 连接 socket</span>
  <span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>newfile<span class="token punctuation">;</span>				<span class="token comment">// 新的 file</span>
  <span class="token keyword">int</span> err<span class="token punctuation">,</span> len<span class="token punctuation">,</span> newfd<span class="token punctuation">,</span> fput_needed<span class="token punctuation">;</span>	<span class="token comment">// 新的 fd</span>
  <span class="token keyword">struct</span> <span class="token class-name">sockaddr_storage</span> address<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// 这里我们会找到原来的 struct socket。监听 socket。</span>
  sock <span class="token operator">=</span> <span class="token function">sockfd_lookup_light</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token operator">&amp;</span>err<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fput_needed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 并基于它去创建一个新的 newsock。这才是连接 socket。</span>
  newsock <span class="token operator">=</span> <span class="token function">sock_alloc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  newsock<span class="token operator">-&gt;</span>type <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>type<span class="token punctuation">;</span>
  newsock<span class="token operator">-&gt;</span>ops <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>ops<span class="token punctuation">;</span>
  <span class="token comment">// 除此之外，我们还会创建一个新的 struct file 和 fd，并关联到 socket。</span>
  newfd <span class="token operator">=</span> <span class="token function">get_unused_fd_flags</span><span class="token punctuation">(</span>flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
  newfile <span class="token operator">=</span> <span class="token function">sock_alloc_file</span><span class="token punctuation">(</span>newsock<span class="token punctuation">,</span> flags<span class="token punctuation">,</span> sock<span class="token operator">-&gt;</span>sk<span class="token operator">-&gt;</span>sk_prot_creator<span class="token operator">-&gt;</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 这里面还会调用 struct socket 的 `sock-&gt;ops-&gt;accept`，</span>
  <span class="token comment">// 也即会调用 `inet_stream_ops 的 accept 函数`，也即 `inet_accept`。</span>
  err <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>ops<span class="token operator">-&gt;</span><span class="token function">accept</span><span class="token punctuation">(</span>sock<span class="token punctuation">,</span> newsock<span class="token punctuation">,</span> sock<span class="token operator">-&gt;</span>file<span class="token operator">-&gt;</span>f_flags<span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>upeer_sockaddr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newsock<span class="token operator">-&gt;</span>ops<span class="token operator">-&gt;</span><span class="token function">getname</span><span class="token punctuation">(</span>newsock<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>address<span class="token punctuation">,</span> <span class="token operator">&amp;</span>len<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    err <span class="token operator">=</span> <span class="token function">move_addr_to_user</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>address<span class="token punctuation">,</span>
          len<span class="token punctuation">,</span> upeer_sockaddr<span class="token punctuation">,</span> upeer_addrlen<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">fd_install</span><span class="token punctuation">(</span>newfd<span class="token punctuation">,</span> newfile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>accept 函数的实现，印证了 socket 的原理中说的那样，原来的 socket 是<code>监听 socket</code>，这里我们会找到原来的 struct socket，并基于它去创建一个新的 newsock。这才是<code>连接 socket</code>。除此之外，我们还会创建一个<code>新的</code> struct <code>file</code> 和 <code>fd</code>，并关联到 socket。</p><p>这里面还会调用 struct socket 的 <code>sock-&gt;ops-&gt;accept</code>，也即会调用 <code>inet_stream_ops 的 accept 函数</code>，也即 <code>inet_accept</code>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">inet_accept</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>newsock<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token punctuation">,</span> bool kern<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk1 <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>sk<span class="token punctuation">;</span>
  <span class="token keyword">int</span> err <span class="token operator">=</span> <span class="token operator">-</span>EINVAL<span class="token punctuation">;</span>
  <span class="token comment">// inet_accept 会调用 `struct sock 的 sk1-&gt;sk_prot-&gt;accept`</span>
  <span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk2 <span class="token operator">=</span> sk1<span class="token operator">-&gt;</span>sk_prot<span class="token operator">-&gt;</span><span class="token function">accept</span><span class="token punctuation">(</span>sk1<span class="token punctuation">,</span> flags<span class="token punctuation">,</span> <span class="token operator">&amp;</span>err<span class="token punctuation">,</span> kern<span class="token punctuation">)</span><span class="token punctuation">;</span>
   		<span class="token comment">// 也即 `tcp_prot 的 accept 函数`，`inet_csk_accept` 函数。</span>
  <span class="token function">sock_rps_record_flow</span><span class="token punctuation">(</span>sk2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">sock_graft</span><span class="token punctuation">(</span>sk2<span class="token punctuation">,</span> newsock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  newsock<span class="token operator">-&gt;</span>state <span class="token operator">=</span> SS_CONNECTED<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>inet_accept 会调用 <code>struct sock 的 sk1-&gt;sk_prot-&gt;accept</code>，也即 <code>tcp_prot</code> 的 accept 函数，<code>inet_csk_accept</code> 函数。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">/*
 * This will accept the next outstanding connection.
 */</span>
<span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span><span class="token function">inet_csk_accept</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>err<span class="token punctuation">,</span> bool kern<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_connection_sock</span> <span class="token operator">*</span>icsk <span class="token operator">=</span> <span class="token function">inet_csk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">request_sock_queue</span> <span class="token operator">*</span>queue <span class="token operator">=</span> <span class="token operator">&amp;</span>icsk<span class="token operator">-&gt;</span>icsk_accept_queue<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">request_sock</span> <span class="token operator">*</span>req<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>newsk<span class="token punctuation">;</span>
  <span class="token keyword">int</span> error<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>sk<span class="token operator">-&gt;</span>sk_state <span class="token operator">!=</span> TCP_LISTEN<span class="token punctuation">)</span>
    <span class="token keyword">goto</span> out_err<span class="token punctuation">;</span>

  <span class="token comment">/* Find already established connection */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">reqsk_queue_empty</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">long</span> timeo <span class="token operator">=</span> <span class="token function">sock_rcvtimeo</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> flags <span class="token operator">&amp;</span> O_NONBLOCK<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果 icsk_accept_queue 为空，则调用 `inet_csk_wait_for_connect` 进行等待；</span>
    error <span class="token operator">=</span> <span class="token function">inet_csk_wait_for_connect</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> timeo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 一旦 icsk_accept_queue 不为空，就从 inet_csk_wait_for_connect 中返回，</span>
  req <span class="token operator">=</span> <span class="token function">reqsk_queue_remove</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span> sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 在队列中取出一个 struct sock 对象赋值给 newsk。</span>
  newsk <span class="token operator">=</span> req<span class="token operator">-&gt;</span>sk<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
 * Wait for an incoming connection, avoid race conditions. This must be called
 * with the socket locked.
 */</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">inet_csk_wait_for_connect</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">,</span> <span class="token keyword">long</span> timeo<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_connection_sock</span> <span class="token operator">*</span>icsk <span class="token operator">=</span> <span class="token function">inet_csk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">DEFINE_WAIT</span><span class="token punctuation">(</span>wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> err<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">prepare_to_wait_exclusive</span><span class="token punctuation">(</span><span class="token function">sk_sleep</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>wait<span class="token punctuation">,</span>
            TASK_INTERRUPTIBLE<span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">// 将进程状态设置为 TASK_INTERRUPTIBLE。</span>
    <span class="token function">release_sock</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">reqsk_queue_empty</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>icsk<span class="token operator">-&gt;</span>icsk_accept_queue<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// 等待的时候，调用 `schedule_timeout`，让出 CPU，并且将进程状态设置为 TASK_INTERRUPTIBLE。</span>
      timeo <span class="token operator">=</span> <span class="token function">schedule_timeout</span><span class="token punctuation">(</span>timeo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sched_annotate_sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">lock_sock</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
    err <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">reqsk_queue_empty</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>icsk<span class="token operator">-&gt;</span>icsk_accept_queue<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    err <span class="token operator">=</span> <span class="token operator">-</span>EINVAL<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sk<span class="token operator">-&gt;</span>sk_state <span class="token operator">!=</span> TCP_LISTEN<span class="token punctuation">)</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    err <span class="token operator">=</span> <span class="token function">sock_intr_errno</span><span class="token punctuation">(</span>timeo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果再次 CPU 醒来，我们会接着判断 icsk_accept_queue 是否为空，</span>
    <span class="token comment">// 同时也会调用 `signal_pending` 看有没有信号可以处理。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">signal_pending</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    err <span class="token operator">=</span> <span class="token operator">-</span>EAGAIN<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timeo<span class="token punctuation">)</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">finish_wait</span><span class="token punctuation">(</span><span class="token function">sk_sleep</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>inet_csk_accept 的实现，印证了上面我们讲的两个队列的逻辑。</p><ul><li><p>如果 icsk_accept_queue 为空，则调用 <code>inet_csk_wait_for_connect</code> 进行等待；</p></li><li><p>等待的时候，调用 <code>schedule_timeout</code>，让出 CPU，并且将进程状态设置为 TASK_INTERRUPTIBLE。</p></li><li><p>如果再次 CPU 醒来，我们会接着判断 icsk_accept_queue 是否为空，同时也会调用 <code>signal_pending</code> 看有没有信号可以处理。</p></li><li><p>一旦 icsk_accept_queue 不为空，就从 inet_csk_wait_for_connect 中返回，在队列中取出一个 struct sock 对象赋值给 newsk。</p></li></ul><h2 id="三次握手" tabindex="-1"><a class="header-anchor" href="#三次握手" aria-hidden="true">#</a> 三次握手</h2><p>什么情况下，icsk_accept_queue 才不为空呢？当然是三次握手结束才可以。接下来我们来分析三次握手的过程。</p><figure><img src="/assets/ab92c2afb4aafb53143c471293ccb2df-b351ee83.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="解析-connect-函数" tabindex="-1"><a class="header-anchor" href="#解析-connect-函数" aria-hidden="true">#</a> <strong>解析 connect 函数</strong></h2><p>三次握手一般是由<mark>TCP 客户端</mark>调用 <code>connect</code> 发起。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token function">SYSCALL_DEFINE3</span><span class="token punctuation">(</span>connect<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> __user <span class="token operator">*</span><span class="token punctuation">,</span> uservaddr<span class="token punctuation">,</span>
    <span class="token keyword">int</span><span class="token punctuation">,</span> addrlen<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">sockaddr_storage</span> address<span class="token punctuation">;</span>
  <span class="token keyword">int</span> err<span class="token punctuation">,</span> fput_needed<span class="token punctuation">;</span>
  <span class="token comment">// 通过 `sockfd_lookup_light`，根据 `fd 文件描述符`，找到 `struct socket 结构`。</span>
  sock <span class="token operator">=</span> <span class="token function">sockfd_lookup_light</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token operator">&amp;</span>err<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fput_needed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  err <span class="token operator">=</span> <span class="token function">move_addr_to_kernel</span><span class="token punctuation">(</span>uservaddr<span class="token punctuation">,</span> addrlen<span class="token punctuation">,</span> <span class="token operator">&amp;</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 接着，我们会调用 struct socket 结构里面 `ops 的 connect 函数`，</span>
  err <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>ops<span class="token operator">-&gt;</span><span class="token function">connect</span><span class="token punctuation">(</span>sock<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>address<span class="token punctuation">,</span> addrlen<span class="token punctuation">,</span> sock<span class="token operator">-&gt;</span>file<span class="token operator">-&gt;</span>f_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 根据前面创建 socket 的时候的设定，调用 `inet_stream_ops 的 connect 函数`，也即调用 `inet_stream_connect`。</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>connect 函数的实现一开始你应该很眼熟，还是通过 <code>sockfd_lookup_light</code>，根据 <code>fd 文件描述符</code>，找到 <code>struct socket 结构</code>。</p><p>接着，我们会调用 struct socket 结构里面 <code>ops 的 connect 函数</code>，</p><p>根据前面创建 socket 的时候的设定，调用 <code>inet_stream_ops 的 connect 函数</code>，也即调用 <code>inet_stream_connect</code>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">/*
 *  Connect to a remote host. There is regrettably still a little
 *  TCP &#39;magic&#39; in here.
 */</span>
<span class="token keyword">int</span> <span class="token function">__inet_stream_connect</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">socket</span> <span class="token operator">*</span>sock<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> <span class="token operator">*</span>uaddr<span class="token punctuation">,</span>
        <span class="token keyword">int</span> addr_len<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token punctuation">,</span> <span class="token keyword">int</span> is_sendmsg<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk <span class="token operator">=</span> sock<span class="token operator">-&gt;</span>sk<span class="token punctuation">;</span>
  <span class="token keyword">int</span> err<span class="token punctuation">;</span>
  <span class="token keyword">long</span> timeo<span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>sock<span class="token operator">-&gt;</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">case</span> SS_UNCONNECTED<span class="token operator">:</span>	<span class="token comment">// 如果 socket 处于 `SS_UNCONNECTED 状态`，</span>
    err <span class="token operator">=</span> <span class="token operator">-</span>EISCONN<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sk<span class="token operator">-&gt;</span>sk_state <span class="token operator">!=</span> TCP_CLOSE<span class="token punctuation">)</span>
      <span class="token keyword">goto</span> out<span class="token punctuation">;</span>
	<span class="token comment">// 那就调用 struct sock 的 `sk-&gt;sk_prot-&gt;connect`，</span>
    err <span class="token operator">=</span> sk<span class="token operator">-&gt;</span>sk_prot<span class="token operator">-&gt;</span><span class="token function">connect</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> uaddr<span class="token punctuation">,</span> addr_len<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// 也即 `tcp_prot` 的 connect 函数——`tcp_v4_connect` 函数。</span>
    sock<span class="token operator">-&gt;</span>state <span class="token operator">=</span> SS_CONNECTING<span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  timeo <span class="token operator">=</span> <span class="token function">sock_sndtimeo</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> flags <span class="token operator">&amp;</span> O_NONBLOCK<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> sk<span class="token operator">-&gt;</span>sk_state<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>TCPF_SYN_SENT <span class="token operator">|</span> TCPF_SYN_RECV<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// 我们回到 __inet_stream_connect 函数，在调用 sk-&gt;sk_prot-&gt;connect 之后，</span>
    <span class="token comment">// inet_wait_for_connect 会一直等待客户端收到服务端的 ACK。而我们知道，服务端在 accept 之后，也是在等待中。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timeo <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">inet_wait_for_connect</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> timeo<span class="token punctuation">,</span> writebias<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">goto</span> out<span class="token punctuation">;</span>

    err <span class="token operator">=</span> <span class="token function">sock_intr_errno</span><span class="token punctuation">(</span>timeo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">signal_pending</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">goto</span> out<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  sock<span class="token operator">-&gt;</span>state <span class="token operator">=</span> SS_CONNECTED<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 __inet_stream_connect 里面，我们发现，如果 socket 处于 <code>SS_UNCONNECTED 状态</code>，</p><p>那就调用 struct sock 的 <code>sk-&gt;sk_prot-&gt;connect</code>，也即 <code>tcp_prot</code> 的 connect 函数——<code>tcp_v4_connect</code> 函数。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">tcp_v4_connect</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sockaddr</span> <span class="token operator">*</span>uaddr<span class="token punctuation">,</span> <span class="token keyword">int</span> addr_len<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">sockaddr_in</span> <span class="token operator">*</span>usin <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sockaddr_in</span> <span class="token operator">*</span><span class="token punctuation">)</span>uaddr<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_sock</span> <span class="token operator">*</span>inet <span class="token operator">=</span> <span class="token function">inet_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">tcp_sock</span> <span class="token operator">*</span>tp <span class="token operator">=</span> <span class="token function">tcp_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  __be16 orig_sport<span class="token punctuation">,</span> orig_dport<span class="token punctuation">;</span>
  __be32 daddr<span class="token punctuation">,</span> nexthop<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">flowi4</span> <span class="token operator">*</span>fl4<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">rtable</span> <span class="token operator">*</span>rt<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  orig_sport <span class="token operator">=</span> inet<span class="token operator">-&gt;</span>inet_sport<span class="token punctuation">;</span>
  orig_dport <span class="token operator">=</span> usin<span class="token operator">-&gt;</span>sin_port<span class="token punctuation">;</span>
  <span class="token comment">// `ip_route_connect` 其实是做一个路由的选择。</span>
  rt <span class="token operator">=</span> <span class="token function">ip_route_connect</span><span class="token punctuation">(</span>fl4<span class="token punctuation">,</span> nexthop<span class="token punctuation">,</span> inet<span class="token operator">-&gt;</span>inet_saddr<span class="token punctuation">,</span>
            <span class="token function">RT_CONN_FLAGS</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">,</span> sk<span class="token operator">-&gt;</span>sk_bound_dev_if<span class="token punctuation">,</span>
            IPPROTO_TCP<span class="token punctuation">,</span>
            orig_sport<span class="token punctuation">,</span> orig_dport<span class="token punctuation">,</span> sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token function">tcp_set_state</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> TCP_SYN_SENT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 接下来，在发送 SYN 之前，我们先将客户端 socket 的状态设置为 `TCP_SYN_SENT`。</span>
  err <span class="token operator">=</span> <span class="token function">inet_hash_connect</span><span class="token punctuation">(</span>tcp_death_row<span class="token punctuation">,</span> sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">sk_set_txhash</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  rt <span class="token operator">=</span> <span class="token function">ip_route_newports</span><span class="token punctuation">(</span>fl4<span class="token punctuation">,</span> rt<span class="token punctuation">,</span> orig_sport<span class="token punctuation">,</span> orig_dport<span class="token punctuation">,</span>
             inet<span class="token operator">-&gt;</span>inet_sport<span class="token punctuation">,</span> inet<span class="token operator">-&gt;</span>inet_dport<span class="token punctuation">,</span> sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* OK, now commit destination to socket.  */</span>
  sk<span class="token operator">-&gt;</span>sk_gso_type <span class="token operator">=</span> SKB_GSO_TCPV4<span class="token punctuation">;</span>
  <span class="token function">sk_setup_caps</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> <span class="token operator">&amp;</span>rt<span class="token operator">-&gt;</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">likely</span><span class="token punctuation">(</span><span class="token operator">!</span>tp<span class="token operator">-&gt;</span>repair<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tp<span class="token operator">-&gt;</span>write_seq<span class="token punctuation">)</span>
      <span class="token comment">// 然后初始化 TCP 的 seq num，也即 `write_seq`，</span>
      tp<span class="token operator">-&gt;</span>write_seq <span class="token operator">=</span> <span class="token function">secure_tcp_seq</span><span class="token punctuation">(</span>inet<span class="token operator">-&gt;</span>inet_saddr<span class="token punctuation">,</span>
                   inet<span class="token operator">-&gt;</span>inet_daddr<span class="token punctuation">,</span>
                   inet<span class="token operator">-&gt;</span>inet_sport<span class="token punctuation">,</span>
                   usin<span class="token operator">-&gt;</span>sin_port<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tp<span class="token operator">-&gt;</span>tsoffset <span class="token operator">=</span> <span class="token function">secure_tcp_ts_off</span><span class="token punctuation">(</span><span class="token function">sock_net</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">,</span>
             inet<span class="token operator">-&gt;</span>inet_saddr<span class="token punctuation">,</span>
             inet<span class="token operator">-&gt;</span>inet_daddr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  rt <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// 然后调用 `tcp_connect` 进行发送。</span>
  err <span class="token operator">=</span> <span class="token function">tcp_connect</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 tcp_v4_connect 函数中，<code>ip_route_connect</code> 其实是做一个路由的选择。为什么呢？因为三次握手马上就要发送一个 SYN 包了，这就要凑齐源地址、源端口、目标地址、目标端口。<mark>目标地址</mark>和<mark>目标端口</mark>是服务端的，已经知道<mark>源端口</mark>是客户端随机分配的，<mark>源地址</mark>应该用哪一个呢？<code>这时候要选择一条路由</code>，看从哪个网卡出去，就应该填写哪个网卡的 IP 地址。</p><p>接下来，在发送 SYN 之前，我们先将客户端 socket 的状态设置为 <code>TCP_SYN_SENT</code>。然后初始化 TCP 的 seq num，也即 <code>write_seq</code>，然后调用 <code>tcp_connect</code> 进行发送。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">/* Build a SYN and send it off. */</span>
<span class="token keyword">int</span> <span class="token function">tcp_connect</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">tcp_sock</span> <span class="token operator">*</span>tp <span class="token operator">=</span> <span class="token function">tcp_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 维护连接的数据结构</span>
  <span class="token keyword">struct</span> <span class="token class-name">sk_buff</span> <span class="token operator">*</span>buff<span class="token punctuation">;</span>
  <span class="token keyword">int</span> err<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token function">tcp_connect_init</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  buff <span class="token operator">=</span> <span class="token function">sk_stream_alloc_skb</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> sk<span class="token operator">-&gt;</span>sk_allocation<span class="token punctuation">,</span> true<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// 接下来 `tcp_init_nondata_skb` 初始化一个 SYN 包</span>
  <span class="token function">tcp_init_nondata_skb</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span> tp<span class="token operator">-&gt;</span>write_seq<span class="token operator">++</span><span class="token punctuation">,</span> TCPHDR_SYN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">tcp_mstamp_refresh</span><span class="token punctuation">(</span>tp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  tp<span class="token operator">-&gt;</span>retrans_stamp <span class="token operator">=</span> <span class="token function">tcp_time_stamp</span><span class="token punctuation">(</span>tp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">tcp_connect_queue_skb</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">tcp_ecn_send_syn</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> buff<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* Send off SYN; include data in Fast Open. */</span>
  err <span class="token operator">=</span> tp<span class="token operator">-&gt;</span>fastopen_req <span class="token operator">?</span> <span class="token function">tcp_send_syn_data</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> buff<span class="token punctuation">)</span> <span class="token operator">:</span>
        <span class="token function">tcp_transmit_skb</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> buff<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> sk<span class="token operator">-&gt;</span>sk_allocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token comment">// `tcp_transmit_skb` 将 SYN 包发送出去</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  tp<span class="token operator">-&gt;</span>snd_nxt <span class="token operator">=</span> tp<span class="token operator">-&gt;</span>write_seq<span class="token punctuation">;</span>
  tp<span class="token operator">-&gt;</span>pushed_seq <span class="token operator">=</span> tp<span class="token operator">-&gt;</span>write_seq<span class="token punctuation">;</span>
  buff <span class="token operator">=</span> <span class="token function">tcp_send_head</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">unlikely</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tp<span class="token operator">-&gt;</span>snd_nxt  <span class="token operator">=</span> <span class="token function">TCP_SKB_CB</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token operator">-&gt;</span>seq<span class="token punctuation">;</span>
    tp<span class="token operator">-&gt;</span>pushed_seq  <span class="token operator">=</span> <span class="token function">TCP_SKB_CB</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token operator">-&gt;</span>seq<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">/* Timer for repeating the SYN until an answer. */</span>
  <span class="token comment">// `inet_csk_reset_xmit_timer` 设置了一个 timer，如果 SYN 发送不成功，则再次发送。</span>
  <span class="token function">inet_csk_reset_xmit_timer</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> ICSK_TIME_RETRANS<span class="token punctuation">,</span>
          <span class="token function">inet_csk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token operator">-&gt;</span>icsk_rto<span class="token punctuation">,</span> TCP_RTO_MAX<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="维护连接的数据结构-1" tabindex="-1"><a class="header-anchor" href="#维护连接的数据结构-1" aria-hidden="true">#</a> 维护连接的数据结构</h3><p>在 tcp_connect 中，有一个新的结构 <code>struct tcp_sock</code>，如果打开他，你会发现他是 <code>struct inet_connection_sock</code> 的一个扩展，struct inet_connection_sock 在 struct tcp_sock 开头的位置，通过强制类型转换访问，故伎重演又一次。</p><p>struct tcp_sock 里面<code>维护了更多的 TCP 的状态</code>，咱们同样是遇到了再分析。</p><h3 id="发送-syn-包" tabindex="-1"><a class="header-anchor" href="#发送-syn-包" aria-hidden="true">#</a> 发送 SYN 包</h3><p>接下来 <code>tcp_init_nondata_skb</code> 初始化一个 SYN 包，<code>tcp_transmit_skb</code> 将 SYN 包发送出去，<code>inet_csk_reset_xmit_timer</code> 设置了一个 timer，如果 SYN 发送不成功，则再次发送。</p><p>发送网络包的过程，我们放到下一节讲解。这里我们姑且认为 SYN 已经发送出去了。</p><h3 id="网络包过程" tabindex="-1"><a class="header-anchor" href="#网络包过程" aria-hidden="true">#</a> 网络包过程</h3><p>我们回到 __inet_stream_connect 函数，在调用 sk-&gt;sk_prot-&gt;connect 之后，inet_wait_for_connect 会一直等待客户端收到服务端的 ACK。而我们知道，服务端在 accept 之后，也是在等待中。</p><p>网络包是如何接收的呢？对于解析的详细过程，我们会在下下节讲解，这里为了解析三次握手，我们简单的看网络包接收到 TCP 层做的部分事情。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">net_protocol</span> tcp_protocol <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span>early_demux  <span class="token operator">=</span>  tcp_v4_early_demux<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>early_demux_handler <span class="token operator">=</span>  tcp_v4_early_demux<span class="token punctuation">,</span>
  <span class="token comment">// 通过 struct net_protocol 结构中的 handler 进行接收，调用的函数是 tcp_v4_rcv。</span>
  <span class="token punctuation">.</span>handler  <span class="token operator">=</span>  tcp_v4_rcv<span class="token punctuation">,</span>
  <span class="token comment">// 接下来的调用链为 tcp_v4_rcv-&gt;tcp_v4_do_rcv-&gt;tcp_rcv_state_process。</span>
  <span class="token punctuation">.</span>err_handler  <span class="token operator">=</span>  tcp_v4_err<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>no_policy  <span class="token operator">=</span>  <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span>netns_ok  <span class="token operator">=</span>  <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span>icmp_strict_tag_validation <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们通过 struct net_protocol 结构中的 handler 进行接收，调用的函数是 <code>tcp_v4_rcv</code>。接下来的调用链为 tcp_v4_rcv-&gt;tcp_v4_do_rcv-&gt;tcp_rcv_state_process。<code>tcp_rcv_state_process</code>，顾名思义，是用来处理接收一个网络包后引起状态变化的。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// `tcp_rcv_state_process`，顾名思义，是用来处理接收一个网络包后引起状态变化的。</span>
<span class="token keyword">int</span> <span class="token function">tcp_rcv_state_process</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sk_buff</span> <span class="token operator">*</span>skb<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">tcp_sock</span> <span class="token operator">*</span>tp <span class="token operator">=</span> <span class="token function">tcp_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_connection_sock</span> <span class="token operator">*</span>icsk <span class="token operator">=</span> <span class="token function">inet_csk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">tcphdr</span> <span class="token operator">*</span>th <span class="token operator">=</span> <span class="token function">tcp_hdr</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">request_sock</span> <span class="token operator">*</span>req<span class="token punctuation">;</span>
  <span class="token keyword">int</span> queued <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  bool acceptable<span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>sk<span class="token operator">-&gt;</span>sk_state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">case</span> TCP_LISTEN<span class="token operator">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>th<span class="token operator">-&gt;</span>syn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 目前服务端是处于 TCP_LISTEN 状态的，而且发过来的包是 SYN，</span>
      acceptable <span class="token operator">=</span> icsk<span class="token operator">-&gt;</span>icsk_af_ops<span class="token operator">-&gt;</span><span class="token function">conn_request</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> skb<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token comment">// 因而就有了上面的代码，调用 icsk-&gt;icsk_af_ops-&gt;conn_request 函数。</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>acceptable<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token function">consume_skb</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>目前服务端是处于 TCP_LISTEN 状态的，而且发过来的包是 SYN，因而就有了上面的代码，调用 icsk-&gt;icsk_af_ops-&gt;conn_request 函数。</p><p>struct inet_connection_sock 对应的操作是 <code>inet_connection_sock_af_ops</code>，按照下面的定义，其实调用的是 <code>tcp_v4_conn_request</code>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">inet_connection_sock_af_ops</span> ipv4_specific <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span>queue_xmit        <span class="token operator">=</span> ip_queue_xmit<span class="token punctuation">,</span>
        <span class="token punctuation">.</span>send_check        <span class="token operator">=</span> tcp_v4_send_check<span class="token punctuation">,</span>
        <span class="token punctuation">.</span>rebuild_header    <span class="token operator">=</span> inet_sk_rebuild_header<span class="token punctuation">,</span>
        <span class="token punctuation">.</span>sk_rx_dst_set     <span class="token operator">=</span> inet_sk_rx_dst_set<span class="token punctuation">,</span>
    	<span class="token comment">// 按照下面的定义，其实调用的是 `tcp_v4_conn_request`</span>
        <span class="token punctuation">.</span>conn_request      <span class="token operator">=</span> tcp_v4_conn_request<span class="token punctuation">,</span>
        <span class="token punctuation">.</span>syn_recv_sock     <span class="token operator">=</span> tcp_v4_syn_recv_sock<span class="token punctuation">,</span>
        <span class="token punctuation">.</span>net_header_len    <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">iphdr</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span>setsockopt        <span class="token operator">=</span> ip_setsockopt<span class="token punctuation">,</span>
        <span class="token punctuation">.</span>getsockopt        <span class="token operator">=</span> ip_getsockopt<span class="token punctuation">,</span>
        <span class="token punctuation">.</span>addr2sockaddr     <span class="token operator">=</span> inet_csk_addr2sockaddr<span class="token punctuation">,</span>
        <span class="token punctuation">.</span>sockaddr_len      <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sockaddr_in</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span>mtu_reduced       <span class="token operator">=</span> tcp_v4_mtu_reduced<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tcp_v4_conn_request 会调用 <code>tcp_conn_request</code>，这个函数也比较长，里面调用了 <code>send_synack</code>，但实际调用的是 <code>tcp_v4_send_synack</code>。具体发送的过程我们不去管它，看注释我们能知道，这是收到了 SYN 后，回复一个 <code>SYN-ACK</code>，回复完毕后，服务端处于 <code>TCP_SYN_RECV</code>。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">tcp_conn_request</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">request_sock_ops</span> <span class="token operator">*</span>rsk_ops<span class="token punctuation">,</span>
         <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">tcp_request_sock_ops</span> <span class="token operator">*</span>af_ops<span class="token punctuation">,</span>
         <span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sk_buff</span> <span class="token operator">*</span>skb<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment">// 里面调用了 `send_synack`，但实际调用的是 `tcp_v4_send_synack`。</span>
af_ops<span class="token operator">-&gt;</span><span class="token function">send_synack</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fl<span class="token punctuation">,</span> req<span class="token punctuation">,</span> <span class="token operator">&amp;</span>foc<span class="token punctuation">,</span>
            <span class="token operator">!</span>want_cookie <span class="token operator">?</span> TCP_SYNACK_NORMAL <span class="token operator">:</span>
               TCP_SYNACK_COOKIE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
 *  Send a SYN-ACK after having received a SYN.
 
 这是收到了 SYN 后，回复一个 `SYN-ACK`，回复完毕后，服务端处于 `TCP_SYN_RECV`。
 */</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">tcp_v4_send_synack</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">dst_entry</span> <span class="token operator">*</span>dst<span class="token punctuation">,</span>
            <span class="token keyword">struct</span> <span class="token class-name">flowi</span> <span class="token operator">*</span>fl<span class="token punctuation">,</span>
            <span class="token keyword">struct</span> <span class="token class-name">request_sock</span> <span class="token operator">*</span>req<span class="token punctuation">,</span>
            <span class="token keyword">struct</span> <span class="token class-name">tcp_fastopen_cookie</span> <span class="token operator">*</span>foc<span class="token punctuation">,</span>
            <span class="token keyword">enum</span> <span class="token class-name">tcp_synack_type</span> synack_type<span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="客户端接收" tabindex="-1"><a class="header-anchor" href="#客户端接收" aria-hidden="true">#</a> 客户端接收</h4><p>这个时候，轮到<mark>TCP 客户端</mark>接收网络包了。都是 TCP 协议栈，所以过程和服务端没有太多区别，还是会走到 <code>tcp_rcv_state_process</code> 函数的，只不过由于客户端目前处于 <code>TCP_SYN_SENT</code> 状态，就进入了下面的代码分支。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">tcp_rcv_state_process</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sk_buff</span> <span class="token operator">*</span>skb<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">tcp_sock</span> <span class="token operator">*</span>tp <span class="token operator">=</span> <span class="token function">tcp_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_connection_sock</span> <span class="token operator">*</span>icsk <span class="token operator">=</span> <span class="token function">inet_csk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">tcphdr</span> <span class="token operator">*</span>th <span class="token operator">=</span> <span class="token function">tcp_hdr</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">request_sock</span> <span class="token operator">*</span>req<span class="token punctuation">;</span>
  <span class="token keyword">int</span> queued <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  bool acceptable<span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>sk<span class="token operator">-&gt;</span>sk_state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">case</span> TCP_SYN_SENT<span class="token operator">:</span>			<span class="token comment">// TCP_SYN_SENT</span>
    tp<span class="token operator">-&gt;</span>rx_opt<span class="token punctuation">.</span>saw_tstamp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">tcp_mstamp_refresh</span><span class="token punctuation">(</span>tp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// tcp_rcv_synsent_state_process 会调用 `tcp_send_ack`，</span>
          <span class="token comment">// 发送一个 `ACK-ACK`，发送后客户端处于 `TCP_ESTABLISHED 状态`。</span>
    queued <span class="token operator">=</span> <span class="token function">tcp_rcv_synsent_state_process</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> skb<span class="token punctuation">,</span> th<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>queued <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> queued<span class="token punctuation">;</span>
    <span class="token comment">/* Do step6 onward by hand. */</span>
    <span class="token function">tcp_urg</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> skb<span class="token punctuation">,</span> th<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">__kfree_skb</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">tcp_data_snd_check</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tcp_rcv_synsent_state_process 会调用 <code>tcp_send_ack</code>，发送一个 <code>ACK-ACK</code>，发送后客户端处于 <code>TCP_ESTABLISHED 状态</code>。</p><h3 id="服务端接收" tabindex="-1"><a class="header-anchor" href="#服务端接收" aria-hidden="true">#</a> 服务端接收</h3><p>又轮到服务端接收网络包了，我们还是归 tcp_rcv_state_process 函数处理。由于服务端目前处于状态 <code>TCP_SYN_RECV 状态</code>，因而又走了另外的分支。当收到这个网络包的时候，服务端也处于 <code>TCP_ESTABLISHED 状态</code>，三次握手结束。</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">tcp_rcv_state_process</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sock</span> <span class="token operator">*</span>sk<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">sk_buff</span> <span class="token operator">*</span>skb<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> <span class="token class-name">tcp_sock</span> <span class="token operator">*</span>tp <span class="token operator">=</span> <span class="token function">tcp_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">inet_connection_sock</span> <span class="token operator">*</span>icsk <span class="token operator">=</span> <span class="token function">inet_csk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">tcphdr</span> <span class="token operator">*</span>th <span class="token operator">=</span> <span class="token function">tcp_hdr</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">request_sock</span> <span class="token operator">*</span>req<span class="token punctuation">;</span>
  <span class="token keyword">int</span> queued <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  bool acceptable<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>sk<span class="token operator">-&gt;</span>sk_state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> TCP_SYN_RECV<span class="token operator">:</span>		<span class="token comment">// TCP_SYN_RECV</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">inet_csk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token operator">-&gt;</span>icsk_retransmits <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token function">reqsk_fastopen_remove</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> req<span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">/* Make sure socket is routed, for correct metrics. */</span>
      icsk<span class="token operator">-&gt;</span>icsk_af_ops<span class="token operator">-&gt;</span><span class="token function">rebuild_header</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">tcp_call_bpf</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> BPF_SOCK_OPS_PASSIVE_ESTABLISHED_CB<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">tcp_init_congestion_control</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">tcp_mtup_init</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
      tp<span class="token operator">-&gt;</span>copied_seq <span class="token operator">=</span> tp<span class="token operator">-&gt;</span>rcv_nxt<span class="token punctuation">;</span>
      <span class="token function">tcp_init_buffer_space</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">smp_mb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">tcp_set_state</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> TCP_ESTABLISHED<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sk<span class="token operator">-&gt;</span><span class="token function">sk_state_change</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sk<span class="token operator">-&gt;</span>sk_socket<span class="token punctuation">)</span>
      <span class="token function">sk_wake_async</span><span class="token punctuation">(</span>sk<span class="token punctuation">,</span> SOCK_WAKE_IO<span class="token punctuation">,</span> POLL_OUT<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tp<span class="token operator">-&gt;</span>snd_una <span class="token operator">=</span> <span class="token function">TCP_SKB_CB</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token operator">-&gt;</span>ack_seq<span class="token punctuation">;</span>
    tp<span class="token operator">-&gt;</span>snd_wnd <span class="token operator">=</span> <span class="token function">ntohs</span><span class="token punctuation">(</span>th<span class="token operator">-&gt;</span>window<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> tp<span class="token operator">-&gt;</span>rx_opt<span class="token punctuation">.</span>snd_wscale<span class="token punctuation">;</span>
    <span class="token function">tcp_init_wl</span><span class="token punctuation">(</span>tp<span class="token punctuation">,</span> <span class="token function">TCP_SKB_CB</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token operator">-&gt;</span>seq<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="总结时刻" tabindex="-1"><a class="header-anchor" href="#总结时刻" aria-hidden="true">#</a> <strong>总结时刻</strong></h2><p>这一节除了网络包的接收和发送，其他的系统调用我们都分析到了。可以看出来，它们有一个统一的数据结构和流程。具体如下图所示：</p><figure><img src="/assets/c028381cf45d65d3f148e57408d26bd8-64adea1f.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>首先，Socket 系统调用会有三级参数 family、type、protocal，通过这三级参数，分别在 net_proto_family 表中找到 type 链表，在 type 链表中找到 protocal 对应的操作。这个操作分为两层，对于 TCP 协议来讲，第一层是 inet_stream_ops 层，第二层是 tcp_prot 层。</p><p>于是，接下来的系统调用规律就都一样了：</p><ul><li>bind 第一层调用 inet_stream_ops 的 inet_bind 函数，<br> 第二层调用 tcp_prot 的 inet_csk_get_port 函数；</li><li>listen 第一层调用 inet_stream_ops 的 inet_listen 函数，<br> 第二层调用 tcp_prot 的 inet_csk_get_port 函数；</li><li>accept 第一层调用 inet_stream_ops 的 inet_accept 函数，<br> 第二层调用 tcp_prot 的 inet_csk_accept 函数；</li><li>connect 第一层调用 inet_stream_ops 的 inet_stream_connect 函数，<br> 第二层调用 tcp_prot 的 tcp_v4_connect 函数。</li></ul><h2 id="课堂练习" tabindex="-1"><a class="header-anchor" href="#课堂练习" aria-hidden="true">#</a> <strong>课堂练习</strong></h2><p>TCP 的三次握手协议非常重要，请你务必跟着代码走读一遍。另外我们这里重点关注了 TCP 的场景，请走读代码的时候，也看一下 UDP 是如何实现各层的函数的。</p><p>欢迎留言和我分享你的疑惑和见解 ，也欢迎可以收藏本节内容，反复研读。你也可以把今天的内容分享给你的朋友，和他一起学习和进步。</p><h2 id="课后讨论" tabindex="-1"><a class="header-anchor" href="#课后讨论" aria-hidden="true">#</a> 课后讨论</h2><ul><li>tcp_sock 继承自 inet_connection_sock，</li><li>inet_connection_sock 继承自 inet_sock，</li><li>inet_sock 继承自 sock；</li></ul><p>1.上述四个结构的关系具有十足的面向对象的特征，struct是基类，通过层层继承，实现了类的复用；</p><p>2.内核中网络相关的很多函数，参数往往都是struct sock，函数内部依照不同的业务逻辑，将struct sock转换为不同的业务结构；</p><p>这样做的好处： 1.简化接口的设计复杂度； 2.使用基类作为参数，十分类似于面向对象中的多态特性，能够有效的增强接口的稳定性、提升扩展性。</p><p>同一个TCP链接上先后发送2次rpc请求，后发送的请求其结果先返回，先发送的请求结果后返回，这样有没有问题呢，系统能区分各自的返回结果么，靠什么机制保证的呢？一直没有想明白<br> 作者回复：RPC是应用层的，需要应用层自己保证请求和结果的对应。</p><p>一些函数：<br> socket: 根据参数创建相应socket<br> bind: 绑定IP、端口<br> listen: 建立两个队列，改变状态为TCP_LISTEN<br> accept: 从完成三次握手的队列中取出一个socket，没有的话让出cpu<br> connect: 三次握手</p><p>调用accept的时候,会新建一个socket,以及其对应的struct file,然后会从icsk_accept_queue 取出一个req,将其sk赋值给新建的socket-&gt;sk,这样就可以读取到请求的数据了,不理解的是后面讲到接收数据包时tcp层有三个队列,会根据内核低延时 高吞吐量的等策略以及socket当时的状态来决定放入哪个队列,这里的socket是怎么选出来的啊,数据包是先发送到处于监听队列的socket然后由其将数据分发到其通过accept生成的sokcet上吗,如果是直接由通过accept生成的socket来处理,怎么分辨出来到底该给哪个socket呢,根据数据包的源地址与端口吗?<br> 作者回复: 监听的端口号</p><p>syn到底是个什么东西呀？是个integer还是char类型<br> 作者回复: 详见网络包的格式，TCP头里面有syn</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 109900456+NgxuAnGMH@users.noreply.github.com">安东尼</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M43-Socket%E9%80%9A%E4%BF%A1.html"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->M43-Socket通信</div></a><a class="vp-link nav-link next" href="/Universal/LinuxOS/%E8%B6%A3%E8%B0%88Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/M45-%E5%8F%91%E9%80%81%E7%BD%91%E7%BB%9C%E5%8C%85%EF%BC%88%E4%B8%8A%EF%BC%89.html"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">M45-发送网络包（上）<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright &nbsp©&nbsp 2023-present &nbspMingHin&nbsp Choi &nbsp|&nbsp 無限進步</div></footer></div><!--]--><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-cdabc73c.js" defer></script>
  </body>
</html>
